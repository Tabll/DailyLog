# 2019-10-8 周二
以下两种写法可以等效
```php
return isset($modifiedNames[$this->modified]) ? $modifiedNames[$this->modified] : $this->modified;
return $modifiedNames[$this->modified] ?? $this->modified;
```
# 2019-10-9 周三

### Kernel
执行
```sh
php artisan test
```

# 2019-10-10 周四
添加索引
```php
$table->index(['retrieved_at', 'approved_at'], 'index_idx');
$table->index(['deleted_at', 'res_type_id'], 'idx_deletedat_restypeid');
```

# 2019-10-11 周五

**小心使用 `artisan` 命令，防止清空数据库**
```sh
php artisan migrate:fresh
php artisan migrate:fresh --seed
```
修改完配置文件需要及时执行
```php
php artisan config:clear
```
今天误把集成环境数据库清空了，在 `.ENV` 文件中修改过后，一定要刷新设置

# 2019-10-12 周六
添加了定时任务的监控后出现了同一任务多次报错发送邮件的问题，现在将错误的文件名放到 `Redis` 中记录，过期时间为 `1天`
```php
// 限制同一文件一天内只发送一次邮件
if (!Cache::has('exception:'.$e->getFile())) {
    dispatch(new SendEmail('email.exception', $data, $emailAddresses, $subject));

    $expiresAt = Carbon::now()->addDay(1); // 键值过期时间
    Cache::put('exception:'.$e->getFile(), 'exception', $expiresAt);
}
```

# 2019-10-14 周一
因为 Horizon 无法在 Windows 中安装，所以安装新的依赖时需要加上 `--ignore-platform-reqs`：
```sh
composer install --ignore-platform-reqs
```
