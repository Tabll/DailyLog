# 2019-8-14
代码删除
#### 文件 `E:\www\LinhuibaServer\app\Http\Controllers\Api\Inner\V1\AttributeController.php`
常量删除
```php
//    const REPEAT_NAME_CODE = -101;
//    const REPEAT_NAME_MSG = '同类型,名称重复';
```

`store` 方法中
```php
//        属性名称重复性检查
//        $acount = Attribute::where('type', $type)
//            ->where('name', $name)
//            ->count();
//        if ($acount) {
//            return response()->fail(self::REPEAT_NAME_CODE, self::REPEAT_NAME_MSG);
//        }
```
`update` 方法中
```php
//        名称重复性检查
//        $acount = Attribute::where('type', $type)
//            ->where('name', $name)
//            ->where('id', '<>', $id)
//            ->count();
//        if ($acount) {
//            return response()->fail(self::REPEAT_NAME_CODE, self::REPEAT_NAME_MSG);
//        }
```

可能是误删除后恢复
文件 `app/Services/OrderService.php`
```php
//       'field_follower' => function ($q) {
//           $q->select('id', 'name', 'mobile');
//       },
```

迁移文件 `2019_08_27_105937_add_pre_invoice_status_into_field_order_items.php`
```php
<?php

use Illuminate\Support\Facades\Schema;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Database\Migrations\Migration;

class AddPreInvoiceStatusIntoFieldOrderItems extends Migration
{
    /**
     * Run the migrations.
     *
     * @return void
     */
    public function up()
    {
        Schema::table('field_order_items', function (Blueprint $table) {
            $table->boolean('pre_invoice_status')
                ->after('invoice_status')
                ->default(0)
                ->comment('预开票(0:没有预开票,1:已预开票)');
        });
    }

    /**
     * Reverse the migrations.
     *
     * @return void
     */
    public function down()
    {
        Schema::table('field_order_items', function (Blueprint $table) {
            $table->dropColumn('pre_invoice_status');
        });
    }
}

```

`app\Http\Controllers\Api\Inner\V1\OrderItemController.php` LINE `2613`
```php
//  对于已开票的订单，取消需要财务作废发票
//  if ($orderItem->invoice_status == FieldOrderItem::INVOICE_STATUS_ISSUE) {
//      $orderItem->status = FieldOrderItem::ORDER_STATUS_WAIT_FINANCIAL_CANCELED;
//      $orderItem->save();
//  }
```

`app\Http\Controllers\Api\Inner\V1\OrderItemController.php` LINE `1872`
```php
->when($request->filled('deposit_type'), function ($query) use ($deposit_type) {
    if ($deposit_type == 0) {
        $query->where(function ($query) {
            $query->where('deposit', '>', 0)
                ->orWhere('expense_deposit', '>', 0);
        });
    } elseif ($deposit_type == 1) {
        $query->where('deposit', '>', 0);
    } else {
        $query->where('expense_deposit', '>', 0);
    }
})
->when($request->filled('deposit_status'), function ($query) use ($deposit_status) {
    $query->where('deposit_status', $deposit_status);
})
->when($request->filled('expense_deposit_status'), function ($query) use ($expense_deposit_status) {
    $query->where('expense_deposit_status', $expense_deposit_status);
})
```

```sql
SET FOREIGN_KEY_CHECKS=0;

CREATE TABLE `linhui_test`.`abilities`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `label` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `parent_id` int(11) NULL DEFAULT NULL,
  `icon` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图标，前端写在class里面的内容',
  `menu_uri` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `api_uri` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `visible` int(11) NOT NULL DEFAULT 1 COMMENT '操作是否可见 0/不可见 1/可见',
  `display_name` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '显示名称（用于后台前端展示给用户）',
  `description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '权限描述（管理用户对应的权限描述）',
  `is_crm` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否是移动端crm,默认0不是 1是',
  `guard_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'web',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '能力表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`activity_case_configurations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `activity_case_id` int(11) NULL DEFAULT NULL COMMENT '案例表id,见表activity_cases',
  `case_img_id` int(11) NULL DEFAULT NULL COMMENT '图片库id,见表m_cases_imgs',
  `spread_way_id` int(11) NULL DEFAULT NULL COMMENT '推广形式id,见表spread_ways',
  `promotion_purpose_id` int(11) NULL DEFAULT NULL COMMENT '推广目的id,见表m_promotion_purposes',
  `brand_id` int(11) NULL DEFAULT NULL COMMENT '品牌id,见表m_brands',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_activity_case`(`activity_case_id`) USING BTREE,
  INDEX `idx_case_img`(`case_img_id`) USING BTREE,
  INDEX `idx_spread_way`(`spread_way_id`) USING BTREE,
  INDEX `idx_promotion_purpose`(`promotion_purpose_id`) USING BTREE,
  INDEX `idx_brand`(`brand_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '案例和案例图片添加与编辑中一些多选项保存表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`activity_case_labels`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `label_id` int(11) NOT NULL DEFAULT 0 COMMENT '标签id',
  `activity_case_id` int(11) NOT NULL DEFAULT 0 COMMENT '案例id',
  `case_img_id` int(11) NOT NULL DEFAULT 0 COMMENT '案例图片id对应表m_cases_imgs',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_label_id`(`label_id`) USING BTREE,
  INDEX `idx_activity_case_id`(`activity_case_id`) USING BTREE,
  INDEX `idx_case_img_id`(`case_img_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '标签-案例中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`activity_cases`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `source` tinyint(4) NULL DEFAULT NULL COMMENT '来源 :1-第三方',
  `field_order_item_id` int(11) NULL DEFAULT NULL COMMENT '订单id,见表field_order_items',
  `industry_id` int(11) NULL DEFAULT NULL COMMENT '行业id,见表industries',
  `title` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标题',
  `activity_start` date NULL DEFAULT NULL COMMENT '活动开始时间',
  `activity_end` date NULL DEFAULT NULL COMMENT '活动结束时间',
  `physical_resources_name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '关联展位name',
  `physical_resources_id` int(11) NULL DEFAULT NULL COMMENT '关联展位id',
  `province_id` int(11) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  `district_id` int(11) NULL DEFAULT NULL,
  `address` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '详细地址',
  `seq` int(11) NULL DEFAULT 1 COMMENT '排序',
  `theme_id` int(11) NULL DEFAULT NULL COMMENT '主题选择的id',
  `cover_pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '封面图片url',
  `description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '内容描述',
  `is_home_show` int(4) NOT NULL DEFAULT 0 COMMENT '是否首页显示，0表示不显示，1表示显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `is_display` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否在展位详情显示  0：否  1：是',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `physical_resources_id`(`physical_resources_id`) USING BTREE,
  INDEX `idx_field_order_item`(`field_order_item_id`) USING BTREE,
  INDEX `idx_industry`(`industry_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '增加活动案例表activity_cases' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`activity_cases_cities`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `activity_case_id` int(11) NOT NULL COMMENT '关联案例ID',
  `city_id` int(11) NOT NULL COMMENT '关联城市ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_activity_case`(`activity_case_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '活动案例关联展示城市表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`activity_cases_urls`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `activity_case_id` int(11) NOT NULL COMMENT '关联案例ID',
  `activity_case_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '活动案例URL地址',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '活动案例图片类型 1：图片 2：视频',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '活动案例关联案例图表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`activity_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '活动类型表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`ad_print_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`ad_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '广告类型表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`admin_shopping_carts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `add_by` int(11) NOT NULL COMMENT '后台帮忙加车人员id',
  `user_id` int(11) NOT NULL COMMENT '帮谁加车的id',
  `selling_resource_id` int(11) NOT NULL COMMENT '目标资源，售卖资源id',
  `count` int(11) NULL DEFAULT 1,
  `count_of_time_unit` int(11) NOT NULL DEFAULT 1 COMMENT '时间单位数量',
  `selling_resource_price_id` int(4) NOT NULL COMMENT '资源价格表id,见selling_resource_prices表',
  `start` date NOT NULL COMMENT '开始时间',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `appeal_id` int(4) NULL DEFAULT NULL COMMENT '需求id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '后台人工下单加车表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`advance_payment_selling_resources`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `advance_payment_id` int(11) NOT NULL COMMENT '预付款id，见advance_payments表',
  `selling_resource_id` int(11) NOT NULL COMMENT '关联场地id，即售卖资源id，见selling_resources表',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '预付款关联场地表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`advance_payments`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `advance_pay` decimal(16, 2) NOT NULL COMMENT '预付款金额',
  `company_id` int(4) NOT NULL COMMENT '公司id,见company表',
  `method` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '结算方式，metering(计次)，withholding(扣款)',
  `times` tinyint(4) NULL DEFAULT NULL COMMENT '可用总次数',
  `s_valid_period` date NOT NULL COMMENT '有效期（开始）',
  `e_valid_period` date NOT NULL COMMENT '有效期（结束）',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `used_times` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '已使用次数',
  `used_money` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '已使用金额',
  `out_trade_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '流水号',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `paid_by` int(4) NOT NULL COMMENT '付款人id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '预付款表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`amount_advance_approve_records`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `amount_advance_id` int(11) NOT NULL COMMENT '大额垫款表id',
  `level` int(11) NOT NULL DEFAULT 1 COMMENT '审批等级：1 一级，2 二级，3 三级',
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '审批状态：submitted 待审批，approved 同意，canceled 拒绝',
  `approved_by` int(11) NOT NULL COMMENT '审批人，一级默认二把，二级默认冠男',
  `approved_at` datetime(0) NULL DEFAULT NULL COMMENT '审批同意时间',
  `certificate` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '审批同意凭证',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '审批同意备注',
  `canceled_at` datetime(0) NULL DEFAULT NULL COMMENT '审批拒绝时间',
  `objection` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '审批拒绝理由',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_amount_advance_id`(`amount_advance_id`) USING BTREE COMMENT 'amount_advances索引'
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '大额垫款表审批记录表（每个垫款创建时生成三条记录）' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`amount_advance_field_order_items`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `amount_advance_id` int(11) NOT NULL COMMENT '大额垫款id，见amount_advances',
  `field_order_item_id` int(11) NOT NULL COMMENT '订单id，见field_order_items',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_field_order_item_id`(`field_order_item_id`) USING BTREE COMMENT 'field_order_items索引',
  INDEX `idx_amount_advance_id`(`amount_advance_id`) USING BTREE COMMENT 'amount_advances索引'
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '大额垫款关联订单表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`amount_advance_files`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `amount_advance_id` int(11) NOT NULL COMMENT '大额垫款表id',
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图片标题',
  `file_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_amount_advance_id`(`amount_advance_id`) USING BTREE COMMENT 'amount_advances索引'
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '大额垫款关联的上传凭证表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`amount_advances`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_by` int(11) NOT NULL DEFAULT 1 COMMENT '创建人（申请人）id',
  `amount` int(11) NOT NULL DEFAULT 0 COMMENT '申请垫款金额，单位：分',
  `certificate` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '申请凭证',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '垫款状态：submitted 已申请，approved 所有审批同意，canceled 审批拒绝',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_created_by`(`created_by`) USING BTREE COMMENT 'users索引'
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '大额垫款表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`app_navigation_catgories`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `app_navigation_id` int(11) NOT NULL COMMENT 'app导航栏id,见app_navigations',
  `category_id` int(11) NOT NULL COMMENT '类目id,见categories',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'app首页导航类目管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`app_navigations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标题',
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片',
  `seq` tinyint(1) NOT NULL COMMENT '排序',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'app首页导航配置' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_age_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `age_level_id` int(11) NOT NULL COMMENT '年龄层次id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '需求-年龄段中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_cities`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `city_id` int(11) NOT NULL COMMENT '城市名称id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_appeal`(`appeal_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '需求-城市中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_community_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `community_type_id` int(11) NOT NULL COMMENT '场地类型id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_ca`(`community_type_id`, `appeal_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '需求场地类型关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_consumption_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `m_consumption_level_id` int(11) NOT NULL COMMENT '用户消费水平id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_field_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `field_type_id` int(11) NOT NULL COMMENT '场地类型表id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_fa`(`field_type_id`, `appeal_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '效果图URL地址',
  `appeal_id` int(20) NOT NULL COMMENT '需求ID',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `seq` int(11) NULL DEFAULT 0 COMMENT '图片显示顺序',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '需求效果图表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_industries`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `industry_id` int(11) NOT NULL COMMENT '行业表id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '需求行业关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_infos`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市id',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '登录用户id',
  `connect_name` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '联系人姓名/公司名称',
  `mobile` char(11) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '联系人手机号',
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '默认1代表商家2代表加盟商3代表服务商',
  `remarks` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '备注内容',
  `status_at` datetime(0) NULL DEFAULT NULL COMMENT '处理的时间null代表未处理',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '服务商/加盟商/商家需求表v3.5' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeal_spread_ways`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `spread_way_id` int(11) NOT NULL COMMENT '推广方式表id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '需求推广形式关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`appeals`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市ID',
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系人',
  `mobile` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系方式',
  `question_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '需求附件URL',
  `answer_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '解决方案URL',
  `answer` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '解决方案',
  `description` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '描述',
  `status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '需求状态 0：待处理 1：处理中 2：已处理  ',
  `handler_id` int(11) NULL DEFAULT NULL COMMENT '需求处理人id',
  `handling_at` datetime(0) NULL DEFAULT NULL COMMENT '处理时间',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `company` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `product` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `area` decimal(16, 2) NULL DEFAULT NULL COMMENT '需求面积',
  `m_pushing_frequency_level_id` tinyint(4) NULL DEFAULT NULL COMMENT '频率ID,见表m_pushing_frequency_levels',
  `price_prefer_id` tinyint(4) NULL DEFAULT NULL COMMENT '价格预订偏好ID',
  `lowest` int(11) NULL DEFAULT NULL COMMENT '最低价',
  `highest` int(11) NULL DEFAULT NULL COMMENT '最高价',
  `workstaff_num` int(11) NOT NULL COMMENT '工作人员数量',
  `feature_description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `desk` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要桌子(0不需要，1需要)',
  `desk_size` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '桌子大小',
  `backdrop` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要背景板(0不需要，1需要)',
  `backdrop_size` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '背景板大小',
  `tent` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要帐篷(0不需要，1需要)',
  `tent_size` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '背景板大小',
  `leaflet` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要发传单(0不需要，1需要)',
  `leaflet_size` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '对传单的补充说明',
  `roll_up_banner` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要易拉宝(0不需要，1需要)',
  `roll_up_banner_size` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '对易拉宝的补充说明',
  `gift` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要礼物(0不需要，1需要)',
  `gift_size` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '对礼物的补充说明',
  `stay_overnight` tinyint(4) NULL DEFAULT NULL COMMENT '物料是否需要过夜(0不需要，1需要)',
  `power` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要供电(0不需要，1需要)',
  `establish` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要设计搭建(0不需要，1需要)',
  `ex_description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `result` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '处理结果',
  `single_field_budget` decimal(16, 2) NULL DEFAULT NULL COMMENT '单场预算（单位：元）',
  `number_of_fields` int(11) NULL DEFAULT NULL COMMENT '所需场地数',
  `start` date NULL DEFAULT NULL COMMENT '开始时间',
  `minimum_area` decimal(16, 2) NULL DEFAULT NULL COMMENT '最小需求面积(单位:米,精确到小数点后两位)',
  `maximum_area` decimal(16, 2) NULL DEFAULT NULL COMMENT '最大需求面积(单位:米,精确到小数点后两位)',
  `part_time_job` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否需要兼职(0表示不需要兼职，1表示需要兼职)',
  `field_order_id` int(4) NULL DEFAULT NULL COMMENT '大订单id',
  `end` date NULL DEFAULT NULL COMMENT '结束时间',
  `carport` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否需要停车(0:表示不需要,1:表示需要)',
  `backstage_remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '后台备注',
  `community_resource_id` int(11) NULL DEFAULT NULL COMMENT '场地id',
  `physical_resource_id` int(11) NULL DEFAULT NULL COMMENT '展位id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '需求管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`applets`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '类型',
  `number` int(11) NOT NULL COMMENT '编号',
  `field_id` int(11) NULL DEFAULT NULL COMMENT '场地id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approvables`  (
  `approval_id` int(11) NOT NULL COMMENT '审核单ID',
  `approvable_id` int(11) NOT NULL COMMENT '关联表ID',
  `approvable_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联类型',
  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联标题',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  UNIQUE INDEX `idx`(`approval_id`, `approvable_id`, `approvable_type`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_actions`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `type` tinyint(4) NOT NULL COMMENT '权限类型：1发起人，2审核人',
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '操作名称',
  `option` tinyint(4) NOT NULL COMMENT '选项：0无，1填写操作原因，2指定审批',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_approver_settings`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `template_id` int(11) NOT NULL COMMENT '审核模板ID，对应approval_templates表id',
  `level` tinyint(4) NOT NULL COMMENT '审批层级',
  `pass_type` tinyint(4) NOT NULL COMMENT '多人审批时的通过方式：1会签，2或签',
  `empty_type` tinyint(4) NOT NULL COMMENT '审批人为空时：1自动通过，2转交管理员',
  `approver_type` tinyint(4) NOT NULL COMMENT '审批方式：1主管审批，2指定成员，3指定角色，4发起人自选，5发起人自己',
  `range_type` tinyint(4) NOT NULL DEFAULT 0 COMMENT '发起人自选时的选择范围：0全公司，1指定成员，2指定角色',
  `approver_ids` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '指定审批方式后所选的对应ids',
  `up_level` tinyint(4) NOT NULL COMMENT '主管层级',
  `take_up` tinyint(4) NOT NULL COMMENT '找不到主管时由上级主管代审批：1是，0否',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_approvers`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `approval_id` int(11) NOT NULL COMMENT '审核ID，对应approvals表id',
  `user_id` int(11) NOT NULL COMMENT '审核人,对应users表id',
  `status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '状态：0审核中，1已通过，2已拒绝',
  `level` tinyint(4) NOT NULL COMMENT '审核层级',
  `batch` tinyint(4) NOT NULL DEFAULT 1 COMMENT '审批批次，重新发起审批后+1',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_attentions`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `approval_id` int(11) NOT NULL COMMENT '审核ID，对应approvals表id',
  `user_id` int(11) NOT NULL COMMENT '用户ID，对应users表id',
  `type` tinyint(4) NOT NULL COMMENT '提醒类型：1我发起的，2待我审核的，3抄送我的',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_comments`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `operators_id` int(11) NOT NULL COMMENT '审批操作人id，对应approval_operators表id',
  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '评论内容',
  `attachment` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '附件地址',
  `attachment_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '附件名称',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_groups`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_operations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `operator_id` int(11) NOT NULL COMMENT '操作ID，对应approval_operators表id',
  `approval_id` int(11) NOT NULL COMMENT '审批ID，对应approvals表id',
  `action_id` tinyint(4) NOT NULL COMMENT '操作ID，对应approval_actions表id',
  `reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '操作理由',
  `template_id` int(11) NULL DEFAULT NULL COMMENT '关联的审核ID，对应approval_templates表id',
  `submitter_id` int(11) NULL DEFAULT NULL COMMENT '发起人ID，对应users表id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_operators`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `approval_id` int(11) NOT NULL COMMENT '审核ID，对应approvals表id',
  `user_id` int(11) NOT NULL COMMENT '操作人,对应users表id',
  `type` tinyint(4) NOT NULL COMMENT '操作人类型：1发起人，2审批人，3抄送人',
  `level` tinyint(4) NOT NULL DEFAULT 1 COMMENT '审批人层级',
  `batch` tinyint(4) NOT NULL DEFAULT 1 COMMENT '审批批次，重新发起审批后+1',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_template_permissions`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `template_id` int(11) NOT NULL COMMENT '审核模板ID，对应approval_templates表id',
  `action_id` tinyint(4) NOT NULL COMMENT '权限ID，对应approval_actions表id',
  `approver_level` tinyint(4) NOT NULL DEFAULT 1 COMMENT '审批人层级',
  `with_reason` tinyint(4) NOT NULL COMMENT '操作理由是否必填：1是，0否',
  `template_ids` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '可选择的审批ids',
  `msg_title` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '提醒消息标题',
  `msg_content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '提醒消息内容',
  `msg_type` tinyint(4) NOT NULL COMMENT '通知人类型：1部门，2员工，3角色',
  `msg_ids` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '通知人类型ids',
  `sort` tinyint(4) NOT NULL COMMENT '排序',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approval_templates`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名称',
  `group_id` smallint(6) NOT NULL COMMENT '分组ID',
  `instruction` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '说明',
  `form` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '审核表单',
  `submitter_type` tinyint(4) NOT NULL COMMENT '发起人类型：1部门，2员工，3角色',
  `submitter_ids` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '发起人类型对应ids',
  `remove_duplicate` tinyint(4) NOT NULL COMMENT '审核人是否去重：1是，0否',
  `copy_type` tinyint(4) NOT NULL COMMENT '抄送人类型：1部门，2员工，3角色',
  `copy_to_ids` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '抄送人类型对应ids',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`approvals`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `template_id` smallint(6) NOT NULL COMMENT '审核模板ID',
  `number` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '审批编号',
  `user_id` int(11) NOT NULL COMMENT '发起人，对应users表id',
  `content` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '审核内容',
  `status` tinyint(4) NOT NULL COMMENT '状态：0审批中，1通过，2拒绝，3驳回',
  `level` tinyint(4) NOT NULL DEFAULT 1 COMMENT '当前审核层级',
  `batch` tinyint(4) NOT NULL DEFAULT 1 COMMENT '当前审核批次，重新发起后+1',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`article_pages`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT NULL COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '后台文章管理页面标签表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`article_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT NULL COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `parent_id` int(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '后台文章管理类型标签表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`articles`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `page` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `content` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,
  `created_by` int(11) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市，留空表示所有城市可见',
  `seq` int(11) NULL DEFAULT NULL COMMENT '排序',
  `digest` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '摘要',
  `source` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '来源',
  `published_at` datetime(0) NULL DEFAULT NULL COMMENT '发表时间',
  `origin` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '原文链接',
  `article_type_id` int(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`assign_logs`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `relation_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联的model',
  `relation_id` int(11) NOT NULL COMMENT '关联的model的id',
  `operator_id` int(11) NOT NULL COMMENT '操作人用户id',
  `assigned_id` int(11) NOT NULL COMMENT '被指派的用户id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_relation`(`relation_id`) USING BTREE,
  INDEX `idx_operator`(`operator_id`) USING BTREE,
  INDEX `idx_assignor`(`assigned_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`attachments`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_id` int(11) NOT NULL DEFAULT 0 COMMENT '需求id,见表demands',
  `attachment_name` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '附件名称',
  `attachment_url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '附件url地址',
  `created_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '附件信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`attribute_options`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `value` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '属性值',
  `attribute_id` int(11) NOT NULL COMMENT '属性id,见attributes',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `is_input` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否有输入框(0:没有,1:有)',
  `seq` tinyint(1) NOT NULL DEFAULT 0 COMMENT '排序字段',
  `placeholder` varchar(18) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '选项的提示语',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `att`(`attribute_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '属性值表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`attributes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '属性名称',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `type` tinyint(1) NOT NULL COMMENT '控件类型(1:单选型,2:多选型,3:单文本,4:多文本)',
  `required` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否必填(0:选填,1:必填)',
  `is_filter` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否前端筛选(0:不筛选,1:筛选)',
  `is_user_edit` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否用户填写(0:不需要用户填写,1:需要用户填写)',
  `all_inputs` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否所有选项框都有输入框(0:没有,1:有)',
  `min_length` smallint(6) NULL DEFAULT NULL COMMENT '文本框最小长度',
  `max_length` smallint(6) NULL DEFAULT NULL COMMENT '文本框最大长度',
  `hint` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '文本框默认提示语',
  `remark` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '属性表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`banner_imgs`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `community_id` int(11) NOT NULL,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`banner_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT NULL COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '后台图片类别标签管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`banners`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `link` varchar(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `pic_url` varchar(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `title` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `seq` int(11) NULL DEFAULT NULL COMMENT '排序',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市，留空表示所有城市可见',
  `banner_type_id` int(11) NULL DEFAULT NULL,
  `role_id` tinyint(4) NULL DEFAULT 0 COMMENT '合作伙伴是否为物业(0:表示未选择，2:物业，3:商家)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`bills`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `serial_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '流水号',
  `paid_at` datetime(0) NOT NULL COMMENT '付款时间',
  `transaction_type_id` int(4) NOT NULL COMMENT '交易类型',
  `amount` decimal(16, 2) NOT NULL COMMENT '金额',
  `paid_by` int(11) NULL DEFAULT NULL COMMENT '付款方',
  `beneficiary` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款方',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `payment_mode` int(4) NULL DEFAULT NULL COMMENT '支付方式',
  `serial_type` int(4) NOT NULL COMMENT '流水类别：1 收入  2 支出',
  `relation_id` int(4) NOT NULL COMMENT '关系id',
  `relation_type` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关系类型',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '收支明细表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`browse_histories`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '访问页面的用户',
  `view` char(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '页面标识',
  `cur_city_id` int(11) NOT NULL DEFAULT 90 COMMENT '当前城市ID',
  `parameters` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '浏览页面的参数字符串',
  `source` tinyint(3) UNSIGNED NOT NULL COMMENT '客户端来源:1:android、2:ios、3:pc、4:wap、5:wxApplet',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `browse_content` varchar(127) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '浏览内容',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_userid`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`business_field_type`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_type_id` int(11) NOT NULL,
  `business_id` int(11) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`business_histories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `business_id` int(11) NOT NULL,
  `column_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '修改字段',
  `origin` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '修改前内容',
  `revised` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '修改后内容',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '商家变更表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`businesses`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NULL DEFAULT NULL,
  `mobile` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '手机号',
  `nickname` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户的备注名称',
  `city` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `company` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `type` tinyint(4) NULL DEFAULT NULL COMMENT '类型,1代表品牌方(买家);2代表渠道方(供应商)',
  `product` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `contact` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `position` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `prev_mobile` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `area` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `industry` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `promotion` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '推广形式（选项来自于spread_ways）',
  `freq` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `is_out` int(11) NULL DEFAULT NULL,
  `need_tent` int(11) NULL DEFAULT NULL,
  `need_power` int(11) NULL DEFAULT NULL,
  `need_bee` int(11) NULL DEFAULT NULL,
  `need_hawl` int(11) NULL DEFAULT NULL,
  `target` int(11) NULL DEFAULT NULL COMMENT '目标人群消费水平，关联消费水平管理表m_consumption_levels',
  `status` tinyint(4) NULL DEFAULT NULL COMMENT '状态:1已创建2已注册3已下单',
  `created_by` int(11) NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  `followed_by` int(11) NULL DEFAULT NULL,
  `industry_id` int(11) NULL DEFAULT NULL,
  `root_industry_id` int(11) NULL DEFAULT NULL,
  `min_freq` int(11) NULL DEFAULT NULL COMMENT '每月最低地推次数',
  `min_area` decimal(10, 2) NULL DEFAULT NULL COMMENT '商家需求的最小场地面积',
  `company_id` int(11) NULL DEFAULT NULL COMMENT '所属公司',
  `province_id` int(11) NULL DEFAULT NULL,
  `district_id` int(11) NULL DEFAULT NULL,
  `max_freq` int(11) NULL DEFAULT NULL COMMENT '每月最高地推次数',
  `age_levels` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '商家需要的年龄层，用|分开',
  `needed_cities` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '商家需要执行的城市，用|分开',
  `min_price` int(11) NULL DEFAULT NULL COMMENT '商家可以接受的最低单场价格',
  `max_price` int(11) NULL DEFAULT NULL COMMENT '商家可以接受的最高单场价格',
  `max_area` decimal(10, 2) NULL DEFAULT NULL COMMENT '商家需求的最大场地面积',
  `cooperation_with_others` tinyint(4) NOT NULL DEFAULT 2 COMMENT '是否已经和其他竞争对手合作了:0没有1和其他合作了2没有填选',
  `cooperation_company` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '合作的竞争对手公司名称',
  `gender_tendency` tinyint(4) NOT NULL DEFAULT 0 COMMENT '目标人群性别倾向：0不限,1男,2女',
  `pushing_frequency_level_id` int(11) NULL DEFAULT NULL COMMENT '地推频率ID,对应表m_pushing_frequency_levels',
  `other_requirement` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '其他需求',
  `without_limit_need_city` tinyint(4) NOT NULL DEFAULT 0 COMMENT '不限需求城市1不限',
  `without_limit_field_type` tinyint(4) NOT NULL DEFAULT 0 COMMENT '不限场地类型1不限',
  `without_limit_age_level` tinyint(4) NOT NULL DEFAULT 0 COMMENT '不限年龄层1不限',
  `remind_time` timestamp(0) NULL DEFAULT NULL COMMENT '提醒时间',
  `remind_content` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '提醒内容',
  `unschedule_interval` int(11) NOT NULL DEFAULT 0 COMMENT '用户未下单时长',
  `is_perfect` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否完善了备注信息:默认0没完善 1完善了',
  `register_at` datetime(0) NULL DEFAULT NULL COMMENT '注册用户的注册时间',
  `record_number` int(11) NOT NULL DEFAULT 0 COMMENT '用户跟进记录数量',
  `last_follow_time` datetime(0) NULL DEFAULT NULL COMMENT '最近跟进时间',
  `followed_at` datetime(0) NULL DEFAULT NULL COMMENT '跟进人开始跟进的时间',
  `clue_person` int(11) NULL DEFAULT NULL COMMENT '线索人',
  `clue_at` datetime(0) NULL DEFAULT NULL COMMENT '添加线索人时间',
  `clue_assignor` int(11) NOT NULL DEFAULT 0 COMMENT '线索指派人,0代表是第一次迁移过来的或者是邀请码直接同步过来的',
  `kp_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联KP表id',
  `department` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门信息',
  `budget` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '预算',
  `plan_spread_time` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '计划推广时间',
  `source_id` int(11) NULL DEFAULT NULL COMMENT '来源id(关联sources表)',
  `is_storage` tinyint(1) NULL DEFAULT NULL COMMENT '是否入库:默认null未知,0未入库,1已入库,2未知',
  `is_hq` tinyint(4) NULL DEFAULT NULL COMMENT '是否总部:默认null未知,0非总部,1总部',
  `storage_remark` varchar(800) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '已入库备注',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_deletedat_followedby`(`deleted_at`, `followed_by`) USING BTREE,
  INDEX `idx_userid`(`user_id`) USING BTREE,
  INDEX `idx_clue_person`(`clue_person`) USING BTREE,
  INDEX `kp_id`(`kp_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`businesses_brands`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `business_id` int(11) NOT NULL COMMENT '意向用户id',
  `brand_id` int(11) NOT NULL COMMENT '品牌id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `business_id`(`business_id`) USING BTREE,
  INDEX `brand_id`(`brand_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '意向用户-品牌表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`calendars`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `exp_date` date NOT NULL COMMENT '指定日期',
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源ID(见selling_resources表)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '日历管理，日期代表当天不能下单' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`campaign_user`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `campaign_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`campaigns`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NULL DEFAULT NULL,
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `description` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `filter_id` int(11) NULL DEFAULT NULL,
  `notify_mode` int(11) NOT NULL COMMENT '1:邮件；2.短信；',
  `start` datetime(0) NOT NULL,
  `end` datetime(0) NOT NULL,
  `plan_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `notify_time` datetime(0) NULL DEFAULT NULL,
  `notify_content` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `type` int(11) NOT NULL COMMENT '1:发放优惠券；2.寄送礼品',
  `budget` int(11) NULL DEFAULT NULL,
  `cost` int(11) NULL DEFAULT NULL,
  `result` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_by` int(11) NOT NULL,
  `charged_by` int(11) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`cases`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `service_provider_id` int(11) NOT NULL COMMENT '优质服务商id',
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标题',
  `cover_pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '封面图片URL',
  `detail` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '文章详情',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `reading` int(11) NULL DEFAULT 0 COMMENT '阅读量',
  `summary` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '摘要',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '优质服务商相关案例表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`categories`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '类目名称',
  `parent_id` int(11) NULL DEFAULT NULL COMMENT '父类ID',
  `sub_ids` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '子类目id串',
  `level` tinyint(1) NOT NULL DEFAULT 1 COMMENT '类目级别(1,2,3,4四种级别)',
  `standard` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否为标类（0非标类，1标类）',
  `enable` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否启用(0:停用,1:启用)',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `amap_poitypes` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '高德POI类型映射',
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '显示顺序',
  `top_belong_type` char(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `pid`(`parent_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '类目表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`category_attributes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `category_id` int(11) NOT NULL COMMENT '类目ID(见categories)',
  `attribute_id` int(11) NOT NULL COMMENT '属性ID(见attributes)',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `seq` mediumint(9) NOT NULL DEFAULT 1 COMMENT '属性顺序',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `cat`(`category_id`) USING BTREE,
  INDEX `att`(`attribute_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '类目属性表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`certification`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NULL DEFAULT NULL,
  `name` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户姓名',
  `idno` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户身份证',
  `idno_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户证件类型',
  `mobile` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户手机号',
  `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户邮箱',
  `account_id` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `cert_url` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '实名认证地址',
  `information` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '实名认证信息',
  `service_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'e签宝实名认证ID',
  `status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '0:未认证 1已认证',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`cities`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `province_id` int(11) NOT NULL,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `code` int(11) NOT NULL,
  `located` tinyint(2) NULL DEFAULT NULL,
  `status` int(1) NULL DEFAULT NULL COMMENT '状态1：全开放 ，2：只开放给物业使用',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `latitude` double NOT NULL DEFAULT 0 COMMENT '纬度',
  `longitude` double NOT NULL DEFAULT 0 COMMENT '经度',
  `domain_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '域名简称',
  `service_phone` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '057188573825' COMMENT '客服电话',
  `tier` tinyint(4) NOT NULL DEFAULT 4 COMMENT '城市等级：1到4',
  `en_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '城市拼音',
  `delivery_fee` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '不同城市快递费（单位：元，精确到小数点后两位）',
  `service_representative_id` int(11) NULL DEFAULT NULL COMMENT '客服ID',
  `opened_by` int(11) NOT NULL COMMENT '城市开通者 关联 users.id',
  `online_time` datetime(0) NOT NULL COMMENT '上线时间',
  `opening_time` date NOT NULL COMMENT '开城时间',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `domain_name`(`domain_name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`collections`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `object_id` int(11) NOT NULL COMMENT '外键 id',
  `type` tinyint(4) NOT NULL COMMENT '类型 1 精准联系人 2 客户 3 场地需求',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `collections_object_id_index`(`object_id`) USING BTREE,
  INDEX `collections_type_index`(`type`) USING BTREE,
  INDEX `collections_created_by_index`(`created_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`comment_tags`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `res_type_id` int(11) NOT NULL COMMENT '资源类型ID',
  `display_name` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '评论可选的标签表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`comments`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `relation_id` int(11) NOT NULL COMMENT '跟进记录表id,见records表',
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '关联类型 1-跟进记录评论 2-汇报评论',
  `created_by` int(11) NOT NULL COMMENT '创建人id,见users表',
  `content` varchar(512) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '评论内容',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_creator`(`created_by`) USING BTREE,
  INDEX `idx_type_and_id`(`type`, `relation_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '评论表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`communities`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `parent_id` int(20) NULL DEFAULT NULL,
  `community_type_id` int(11) NOT NULL,
  `wechat_group_id` int(20) NULL DEFAULT NULL,
  `access_token` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat_app_id` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_app_secret` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_mch_id` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_mch_key` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `entrance_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `company_id` int(20) NULL DEFAULT NULL,
  `province_id` int(20) NOT NULL,
  `city_id` int(20) NOT NULL,
  `district_id` int(20) NOT NULL,
  `hide_bottom_nav` int(11) NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `tel_num` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `amap_lng` decimal(10, 0) NULL DEFAULT NULL COMMENT '高德地图经度',
  `amap_lat` decimal(10, 0) NULL DEFAULT NULL COMMENT '高德地图纬度',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`companies`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `created_by` int(11) NOT NULL COMMENT '创建者',
  `name` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '公司名称',
  `product` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '产品名称',
  `level` tinyint(4) NOT NULL DEFAULT 1 COMMENT '客户等级 1 普通 2 KA 3 SKA',
  `status` tinyint(4) NOT NULL DEFAULT 1 COMMENT '1 已创建 2 待审核',
  `budget_level` tinyint(4) NULL DEFAULT NULL COMMENT '年营销体量， 1 万级 2 十万级 3 百万级 4 千万级',
  `industry_id` int(11) NULL DEFAULT NULL COMMENT '主行业',
  `province_id` int(11) NULL DEFAULT NULL COMMENT '省',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '市',
  `district_id` int(11) NULL DEFAULT NULL COMMENT '区',
  `address` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '详细地址',
  `cooperation` tinyint(4) NULL DEFAULT NULL COMMENT '是否与竞争对手合作, 1 是 2 否',
  `past_from` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '以往场地获取方式',
  `source_id` int(11) NULL DEFAULT NULL COMMENT '信息来源，关联 sources 表',
  `introducer_id` int(11) NULL DEFAULT NULL COMMENT '介绍人',
  `type` tinyint(4) NULL DEFAULT NULL COMMENT '类型，1 品牌方 2 广告公司',
  `order_count` int(11) NOT NULL DEFAULT 0 COMMENT '关联的订单数',
  `no_order_interval` int(11) NOT NULL DEFAULT 0 COMMENT '未下单时长',
  `sale_amount` int(11) NOT NULL DEFAULT 0 COMMENT '用户成交额 单位分',
  `last_follow_at` datetime(0) NULL DEFAULT NULL COMMENT '最新跟进时间',
  `been_ka_at` datetime(0) NULL DEFAULT NULL COMMENT '成为 KA 时间',
  `been_ska_at` datetime(0) NULL DEFAULT NULL COMMENT '成为 SKA 时间',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`companies_bak`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `organization_level_id` int(2) NOT NULL DEFAULT 0 COMMENT '规格',
  `parent_id` int(11) NULL DEFAULT NULL COMMENT '层级关系',
  `province_id` int(11) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  `district_id` int(11) NULL DEFAULT NULL,
  `address` varchar(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `representative` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '法人代表',
  `enterprise_id` int(11) NULL DEFAULT NULL COMMENT '与企业认证对应',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '公司跟进人',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`company_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `relation_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联关系类型',
  `company_id` int(11) NOT NULL COMMENT '客户ID（关联 companies.id）',
  `relation_id` int(11) NOT NULL COMMENT '关联表ID',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `company_relations_relation_type_company_id_index`(`relation_type`, `company_id`) USING BTREE,
  INDEX `company_relations_relation_type_index`(`relation_type`) USING BTREE,
  INDEX `company_relations_company_id_index`(`company_id`) USING BTREE,
  INDEX `company_relations_relation_id_index`(`relation_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`competitors`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '竞争对手名称',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '竞争对手信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`consignee_addresses`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系人',
  `mobile` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系方式',
  `province_id` int(11) NOT NULL,
  `city_id` int(11) NOT NULL,
  `district_id` int(11) NOT NULL,
  `address` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '详细地址',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户的地址管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contact_contract_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `contact_id` int(11) NOT NULL,
  `contract_id` int(11) NOT NULL,
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contact_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `relation_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联关系类型',
  `contact_id` int(11) NOT NULL COMMENT '联系人ID（关联contacts.id）',
  `relation_id` int(11) NOT NULL COMMENT '关联表ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_contact`(`contact_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'CRM 联系人多对多关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contacts`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NULL DEFAULT NULL COMMENT '用户ID（关联users.id）',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '跟进人ID（关联users.id）',
  `company_id` int(11) NULL DEFAULT NULL COMMENT '客户ID（关联companies.id）',
  `type` tinyint(1) NOT NULL DEFAULT 0 COMMENT '联系人类型  1：目标任务  2：潜在联系人  3：精准联系人',
  `target_type` tinyint(1) NULL DEFAULT NULL COMMENT '目标任务类型  1：联系人类型  2：品牌类型  3：客户类型',
  `name` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '联系人姓名',
  `mobile` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '联系人手机号',
  `wechat` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '微信号',
  `email` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '邮箱',
  `department` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门名称',
  `position` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '岗位名称',
  `sex` tinyint(1) NULL DEFAULT NULL COMMENT '性别  1：男  2：女',
  `province_id` tinyint(4) NULL DEFAULT NULL COMMENT '籍贯（关联provinces.id）',
  `work_for` varchar(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '任职企业',
  `has_demand` tinyint(1) NULL DEFAULT NULL COMMENT '有无场地需求  0：无  1：有',
  `source_id` int(11) NULL DEFAULT NULL COMMENT '信息来源ID（关联sources.id）',
  `recommend_by` int(11) NULL DEFAULT NULL COMMENT '介绍人 （关联users.id）',
  `identity_type` tinyint(1) NULL DEFAULT NULL COMMENT '身份类型 1：品牌方（商家）  2：渠道方（供应商）',
  `icon` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '个人名片',
  `remark` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `is_release` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否被释放  1：是  2：否',
  `released_at` datetime(0) NULL DEFAULT NULL COMMENT '释放时间',
  `been_precise_at` datetime(0) NULL DEFAULT NULL COMMENT '成为精准联系人的时间',
  `been_ka_at` datetime(0) NULL DEFAULT NULL COMMENT '成为KA的时间',
  `been_ska_at` datetime(0) NULL DEFAULT NULL COMMENT '成为SKA的时间',
  `business_id` int(11) NOT NULL COMMENT '邻汇备注ID（关联businesses.id）',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `last_follow_time` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) COMMENT '最近跟进时间',
  `last_followed_at` timestamp(0) NULL DEFAULT NULL COMMENT '最近被指派时间',
  `followed_by_at_precise` int(11) NOT NULL DEFAULT 0 COMMENT '成为精准联系人时的跟进人',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `been_potential_at` timestamp(0) NULL DEFAULT NULL COMMENT '目标任务转成潜在联系人的时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `user_index`(`user_id`) USING BTREE,
  INDEX `type_index`(`type`, `identity_type`) USING BTREE,
  INDEX `idx_follower`(`followed_by`) USING BTREE,
  INDEX `idx_follower_precise`(`followed_by_at_precise`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'CRM 联系人管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `contract_id` int(11) NULL DEFAULT NULL,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图片标题',
  `type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'img' COMMENT '文件类型 img/图片 pdf/pdf文件',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '合同扫描件' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_instalment_receivables`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `contract_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同编号',
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'pending' COMMENT '当前分期状态  pending/待结账 finished/已完成 rejected/已拒绝 overdue_pay/超期未付款',
  `type` tinyint(2) NOT NULL COMMENT '分期类型  1/分期付款  2/分期收款  3/垫款',
  `stage_num` tinyint(2) NOT NULL COMMENT '分期期数（第一期 ...）',
  `stage_total` tinyint(2) NOT NULL COMMENT '总分期数',
  `checkout_date` date NOT NULL COMMENT '结账日期',
  `checkout_fee` decimal(10, 0) NOT NULL COMMENT '分期金额',
  `inform_users` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '到期提醒对象id （1,2,3,4,5,6）',
  `inform_days` int(10) NOT NULL DEFAULT 0 COMMENT '设置提醒时间',
  `has_remind` tinyint(2) NOT NULL DEFAULT 0 COMMENT '是否发送钉钉提醒 0/否 1/是',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `type`(`type`) USING BTREE,
  INDEX `idx_contract_num`(`contract_num`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '合同分期收款/付款表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_items`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `contract_id` int(11) NOT NULL,
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `district_id` int(11) NOT NULL,
  `position` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '摆摊位置',
  `field_type_id` int(11) NOT NULL,
  `size` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `level` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '展位等级',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市编号',
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源ID(见selling_resources表)',
  `follower` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '展位跟进人',
  `purchase_count` int(11) NULL DEFAULT NULL COMMENT '采购场次',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_sellingresourceid`(`selling_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '与物业签订的合同涉及的资源' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_modify_records`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `contract_id` int(10) NOT NULL COMMENT 'conrtacts 合同id',
  `contract_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同编号',
  `is_template` tinyint(2) NOT NULL DEFAULT 0 COMMENT '是否是合同模板 0/合同模板数据 1/合同变更数据',
  `user_id` int(10) NOT NULL COMMENT '合同变更操作人',
  `template` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同原数据或合同变更数据',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `contract_id`(`contract_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '合同变更记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_nors`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `has_sub_contract` tinyint(2) NOT NULL COMMENT '是否存在子合同 0/否 1/是',
  `parent_id` int(10) NOT NULL DEFAULT 0 COMMENT '主合同id',
  `contract_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同编号',
  `status` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '合同状态 submitted/待审核 invalidate/未生效 validate/生效中 rejected/已拒绝 expired/已超期',
  `signed_type` tinyint(2) NULL DEFAULT NULL COMMENT '签约对象 1/代理商 2/服务商',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `contract_num`(`contract_num`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '其它合同表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_purs`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `contract_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同编号',
  `status` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '合同状态 submitted/待审核 invalidate/未生效 validate/生效中 rejected/已拒绝 expired/已超期',
  `has_sub_contract` tinyint(2) NOT NULL COMMENT '是否存在子合同 0/否 1/是',
  `parent_id` int(10) NOT NULL DEFAULT 0 COMMENT '主合同id',
  `field_type` tinyint(2) NULL DEFAULT NULL COMMENT '所需场地类型 1/常规场地 2/地铁 3/机器 4/广告',
  `has_stage` tinyint(2) NULL DEFAULT NULL COMMENT '是否分期  0/无分期 1/有分期',
  `total_fee` decimal(12, 2) NOT NULL DEFAULT 0.00 COMMENT '合同总金额/元',
  `deposit` decimal(12, 2) NOT NULL DEFAULT 0.00 COMMENT ' 押金/元',
  `service_charge` decimal(12, 2) NOT NULL DEFAULT 0.00 COMMENT ' 服务费/元',
  `taxation` decimal(12, 2) NOT NULL DEFAULT 0.00 COMMENT ' 税费/元',
  `has_cushion` tinyint(2) NOT NULL COMMENT '是否垫款设置 0/无垫款 1/有垫款',
  `related_user_id` int(10) NULL DEFAULT NULL COMMENT '关联用户的id',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `contract_num`(`contract_num`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '买家合同表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `relation_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联关系类型',
  `contract_id` int(11) NOT NULL COMMENT '合同ID（关联 contracts.id）',
  `relation_id` int(11) NOT NULL COMMENT '关联表ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `contract_relations_relation_type_relation_id_index`(`relation_type`, `relation_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_settings`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(10) NOT NULL,
  `days` int(10) NOT NULL DEFAULT 0 COMMENT '合同过滤时间',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '合同设置表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contract_sups`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `contract_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同编号',
  `status` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '合同状态 submitted/待审核 invalidate/未生效 validate/生效中 rejected/已拒绝 expired/已超期',
  `has_sub_contract` tinyint(2) NOT NULL COMMENT '是否存在子合同 0/否 1/是',
  `parent_id` int(10) NOT NULL DEFAULT 0 COMMENT '主合同id',
  `contract_type_id` int(10) NOT NULL COMMENT '合同方式 数据选自 m_contract_types 表数据',
  `total_fee` decimal(12, 2) NOT NULL DEFAULT 0.00 COMMENT '合同总金额/元',
  `sup_type` tinyint(2) NULL DEFAULT NULL COMMENT '供应商类型 1/物业 2/第三方',
  `has_stage` tinyint(2) NULL DEFAULT NULL COMMENT '是否分期  0/无分期 1/有分期',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `contract_num`(`contract_num`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '供应商合同表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`contracts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NOT NULL,
  `applier_id` int(10) NOT NULL COMMENT '合同创建人',
  `company` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '签约主体',
  `company_id` int(11) NULL DEFAULT NULL COMMENT '客户 id (关联 companies.id)',
  `admin` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '对方签约人',
  `mobile` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '对方签约人的手机号',
  `start` date NOT NULL COMMENT '合同生效日期',
  `end` date NOT NULL COMMENT '合同结束日期',
  `status` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '合同状态 submitted/待审核 invalidate/未生效 validate/生效中 rejected/已拒绝 expired/已超期',
  `share_type` int(10) NULL DEFAULT NULL COMMENT '分成方式',
  `share` int(10) NULL DEFAULT NULL COMMENT '分成数',
  `pay_type` tinyint(2) NULL DEFAULT NULL COMMENT '费用支付方式，取自支付方式管理表 m_payment_methods',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `signed_at` date NOT NULL COMMENT '签约日期',
  `account_owner` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款人',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款账号',
  `is_standard` tinyint(4) NULL DEFAULT 1 COMMENT '是否规范：1代表规范，2代表不规范',
  `nonstandard_reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '不规范原因',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '跟进人',
  `continue_sign` int(11) NULL DEFAULT 0 COMMENT '是否续签',
  `contract_type_id` int(11) NULL DEFAULT NULL COMMENT '合同类型',
  `opening_bank` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开户行',
  `signed_days` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同签约天数',
  `notify_days` tinyint(2) NOT NULL COMMENT '设置提醒时间/天',
  `contract_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '合同编号',
  `relation_id` int(10) NOT NULL COMMENT '关联的合同id',
  `relation_type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联的合同模型',
  `signer_id` int(10) NOT NULL COMMENT '我方签约人id',
  `continue_contract_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '续签合同的原合同号',
  `has_involve_costs` tinyint(2) NOT NULL DEFAULT 0 COMMENT '是否涉及费用 0/不涉及 1/涉及',
  `labels` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '合同标签',
  `reject_reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '合同拒绝原因',
  `has_remind` tinyint(2) NOT NULL DEFAULT 0 COMMENT '合同是否提醒 0/未提醒 1/已提醒',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_signer_id`(`signer_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '与物业签订的合同' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`coupon_rules`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '优惠券名称',
  `scope` tinyint(4) NOT NULL DEFAULT 1 COMMENT '优惠范围（1:全场通用,2:限场地,3:限场地类目,4:限场地标签,5:限展位,6:限展位标签）',
  `hint` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '提示话术',
  `min_goods_amount` decimal(10, 2) NOT NULL COMMENT '使用门槛（单位:元）',
  `amount` decimal(10, 2) NOT NULL COMMENT '优惠金额（单位:元）',
  `user_id` int(11) NOT NULL COMMENT '最后提交人',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `u_idx`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`coupon_scopes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `coupon_rule_id` int(11) NOT NULL COMMENT '优惠券配置id,见coupon_rules',
  `relation_id` int(11) NOT NULL COMMENT '关联模型id',
  `relation_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联模型',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `r_idx`(`coupon_rule_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`coupons`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `coupon_rule_id` int(11) NOT NULL COMMENT '优惠券配置ID',
  `title` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '营销发放名称',
  `type` tinyint(4) NOT NULL COMMENT '类型(1:其他,2:新人礼包券,3:评价送券,4:领券中心)',
  `shelf_time` timestamp(0) NULL DEFAULT NULL COMMENT '上架时间',
  `down_time` timestamp(0) NULL DEFAULT NULL COMMENT '下架时间',
  `time_type` tinyint(4) NOT NULL COMMENT '有效时间类型(1:绝对时间,2:相对时间)',
  `relative_time` smallint(6) NULL DEFAULT NULL COMMENT '相对领取后多少天有效',
  `effective_start_time` timestamp(0) NULL DEFAULT NULL COMMENT '有效开始时间',
  `effective_end_time` timestamp(0) NULL DEFAULT NULL COMMENT '有效结束时间',
  `issue_target` tinyint(4) NOT NULL COMMENT '发放对象(1:会员等级,2:具体用户,3:用户分组,4:所有用户)',
  `user_group_id` int(11) NULL DEFAULT NULL COMMENT '用户分组ID,见user_groups',
  `method` tinyint(4) NOT NULL COMMENT '发放方式(1:用户领取,2:直接发放,3:积分兑换)',
  `point` mediumint(9) NULL DEFAULT NULL COMMENT '积分兑换所需积分',
  `is_display` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否前端展示(0:不展示,1:展示)',
  `quantity` mediumint(9) NULL DEFAULT NULL COMMENT '发行数量',
  `account_limit` tinyint(4) NULL DEFAULT NULL COMMENT '单账号限领数',
  `total_receive` mediumint(9) NOT NULL DEFAULT 0 COMMENT '已领取数量',
  `total_use` mediumint(9) NOT NULL DEFAULT 0 COMMENT '已使用数量',
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '优惠券状态 submitted/未上架 approved/已上架 terminated/已下架 denied/已拒绝',
  `user_id` int(11) NOT NULL COMMENT '最后提交人',
  `is_distributed` tinyint(4) NOT NULL DEFAULT 0 COMMENT '直接发放的是否已发放',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `push` tinyint(4) NOT NULL DEFAULT 0 COMMENT '用户领取定向推送是否已经推送(0:未推送,1:已推送)',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `c_idx`(`coupon_rule_id`) USING BTREE,
  INDEX `is_idx`(`is_display`, `status`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`crm_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `business_id` int(11) NULL DEFAULT NULL,
  `property_id` int(11) NULL DEFAULT NULL,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`crm_review_users`  (
  `review_id` int(11) NOT NULL COMMENT '审核记录（关联crm_reviews.id）',
  `user_id` int(11) NOT NULL COMMENT '审核人（关联users表id）',
  `status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '状态 0 待审核 1审核通过 2 审核拒绝',
  `reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '原因',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `level` tinyint(4) NOT NULL DEFAULT 1 COMMENT '审核层级',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`crm_reviews`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `review_id` int(11) NOT NULL COMMENT '外键id（关联contacts.id或companies.id）',
  `review_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联类型',
  `status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '状态 0 待审核 1审核通过 2 审核拒绝',
  `type` tinyint(4) NOT NULL COMMENT '审核类型 1:精准联系人 2:KA客户 3:SKA客户',
  `level` tinyint(4) NOT NULL DEFAULT 1 COMMENT '审批层级',
  `current_level` tinyint(4) NOT NULL DEFAULT 1 COMMENT '当前审批层级',
  `submitted_by` int(11) NOT NULL COMMENT '提交人（关联users表id）',
  `reviewed_by` int(11) NOT NULL COMMENT '审核人（关联users表id）',
  `reviewed_at` datetime(0) NULL DEFAULT NULL COMMENT '审核时间',
  `reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '原因',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `crm_reviews_review_id_index`(`review_id`) USING BTREE,
  INDEX `crm_reviews_review_type_index`(`review_type`) USING BTREE,
  INDEX `crm_reviews_status_index`(`status`) USING BTREE,
  INDEX `crm_reviews_type_index`(`type`) USING BTREE,
  INDEX `crm_reviews_submitted_by_index`(`submitted_by`) USING BTREE,
  INDEX `crm_reviews_reviewed_by_index`(`reviewed_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`daily_fields`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` date NOT NULL,
  `new` int(11) NOT NULL DEFAULT 0 COMMENT '新增物理场地',
  `approved` int(11) NOT NULL DEFAULT 0 COMMENT '审核通过售卖场地',
  `canceled` int(11) NOT NULL DEFAULT 0 COMMENT '审核拒绝售卖场地',
  `retrieved` int(11) NOT NULL DEFAULT 0 COMMENT '下架售卖场地',
  `total_physical` int(11) NOT NULL DEFAULT 0 COMMENT '总物理场地',
  `total_selling` int(11) NOT NULL DEFAULT 0 COMMENT '总售卖场地',
  `total_on_sale` int(11) NOT NULL DEFAULT 0 COMMENT '总在售物理场地',
  `has_order` int(11) NOT NULL DEFAULT 0 COMMENT '总售出物理场地',
  `saled` int(11) NOT NULL DEFAULT 0 COMMENT '当日成交场地',
  `first_saled` int(11) NOT NULL DEFAULT 0 COMMENT '当日首单场地',
  `total_sale_people` int(11) NOT NULL DEFAULT 0 COMMENT '在售场地总覆盖人流',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地日报表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`daily_users`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `day` date NOT NULL,
  `new_business` int(11) NOT NULL DEFAULT 0 COMMENT '新注册商家数',
  `purchased_business` int(11) NOT NULL DEFAULT 0 COMMENT '下单用户数',
  `first_purchased_business` int(11) NOT NULL DEFAULT 0 COMMENT '首单用户数',
  `total_business` int(11) NOT NULL DEFAULT 0 COMMENT '总商家数',
  `new_property` int(11) NOT NULL DEFAULT 0 COMMENT '新注册物业数',
  `applied_property` int(11) NOT NULL DEFAULT 0 COMMENT '申请发布权限数',
  `approved_property` int(11) NOT NULL DEFAULT 0 COMMENT '审核通过的发布权限申请',
  `published_property` int(11) NOT NULL DEFAULT 0 COMMENT '发布资源的物业数',
  `first_published_property` int(11) NOT NULL DEFAULT 0 COMMENT '首次发布资源的物业数',
  `total_property` int(11) NOT NULL DEFAULT 0 COMMENT '总物业数',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户日报表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`debit_additional_expenses`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `debit_id` int(11) NOT NULL COMMENT '财务付款id：关联 debits 表',
  `type` tinyint(1) NOT NULL COMMENT '额外支出类型 1：他项支出  2：特殊报批费',
  `amount` int(11) NOT NULL COMMENT '总金额（单位：分）',
  `pay_mode` tinyint(1) NOT NULL COMMENT '支付方式（1：现金 2：银行卡 3：微信 4：支付宝 5：对公转账）',
  `account` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '账号',
  `account_owner` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '收款人',
  `bank` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开户行',
  `payment_subject` tinyint(1) NULL DEFAULT NULL COMMENT '付款主体(1.杭州邻汇 2.上海趣推 3.深圳邻汇 4.杭州万一 5.杭州海瀛)',
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '付款状态：submitted 待支付，paid 已支付，canceled 已取消',
  `paid_at` timestamp(0) NULL DEFAULT NULL COMMENT '付款时间',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `objection` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '拒绝理由',
  `paid_by` int(11) NULL DEFAULT NULL COMMENT '确认付款操作人：关联users表 id',
  `rejected_by` int(11) NULL DEFAULT NULL COMMENT '拒绝付款操作人：关联users表 id',
  `rejected_at` datetime(0) NULL DEFAULT NULL COMMENT '拒绝付款操作时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_debit`(`debit_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`debit_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `debit_id` int(11) NOT NULL,
  `model_id` int(11) NOT NULL,
  `model_type` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`debits`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `to_user_id` int(11) NOT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '手机号码',
  `type` tinyint(1) NOT NULL DEFAULT 2 COMMENT '付款类型：1：邻汇付款 2：订单 3：邀请奖励 4：被邀请奖励 5：邻汇退款',
  `pay_mode` int(11) NOT NULL COMMENT '1.现金；2.银行卡；3.微信；4.支付宝；5.对公转账',
  `gateway_order_num` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `paid_at` datetime(0) NULL DEFAULT NULL,
  `amount` int(11) NOT NULL COMMENT '金额，单位为分',
  `paid_by` int(11) NOT NULL,
  `account` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `bank` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `payment_subject` tinyint(1) NULL DEFAULT NULL COMMENT '付款主体(1.杭州邻汇 2.上海趣推 3.深圳邻汇 4.杭州万一 5.杭州海瀛)',
  `account_owner` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `invite_id` int(11) NULL DEFAULT NULL COMMENT '待付帐款对应的邀请奖励',
  `remarks` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '转账备注',
  `transfer_certificate` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '转账证明(图片地址)',
  `created_by` int(11) NULL DEFAULT NULL COMMENT '创建的用户ID',
  `objection` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '拒绝支付理由',
  `recovery_status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否收回(0:未收回,1:已收回)',
  `recovery_at` timestamp(0) NULL DEFAULT NULL COMMENT '收回时间',
  `actual_amount` decimal(11, 2) NULL DEFAULT NULL COMMENT '实际开票金额（单位：元）',
  `deduct` int(11) NULL DEFAULT 0 COMMENT '抵扣金额（单位：分）',
  `total_amount` int(11) NOT NULL DEFAULT 0 COMMENT '付款总金额（单位分）',
  `relation_url` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '附件链接',
  `rejected_by` int(11) NULL DEFAULT NULL COMMENT '拒绝付款操作人：关联users表 id',
  `rejected_at` datetime(0) NULL DEFAULT NULL COMMENT '拒绝付款操作时间',
  `inward_objection` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '财务退回原因',
  `order_additional_id` int(11) NULL DEFAULT NULL COMMENT '追加金额id：关联order_additional_expenses.id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`delivery_companies`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT NULL COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '后台快递公司标签管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_assignment_processes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `rollback_id` tinyint(1) NOT NULL COMMENT '拒绝时回退到的id',
  `next_id` tinyint(1) NULL DEFAULT NULL COMMENT '继续往下的id',
  `single_deny_id` tinyint(1) NULL DEFAULT NULL COMMENT '单个专员或主管被驳回时的id',
  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '当前节点描述',
  `messages` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '消息信息json字符串内容模板code(代码中规定好消息code对应的消息体)',
  `change` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '审批时相关变动,例如follower表status变动之类',
  `status_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '状态展示名称:如全国资源部审批中',
  `operable_user_type` tinyint(1) NULL DEFAULT NULL COMMENT '操作人类型:对应demand_followers表中的approval_level',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `status_for_creator` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '商拓看到的状态展示名称:如待确认推荐结果',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_cities`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NOT NULL COMMENT '城市id,表cities',
  `demand_id` int(11) NOT NULL COMMENT '场地推荐系统-需求id,表demands',
  `field_types` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '展位类型json字符串',
  `is_indoor` tinyint(1) NULL DEFAULT NULL COMMENT '是否室内:0室外,1室内,2室内或室外',
  `fixed_period` tinyint(1) NOT NULL COMMENT '推广时间是否固定:1-固定 0-不固定',
  `spread_time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '预计推广时间字符串',
  `start` date NULL DEFAULT NULL COMMENT '推广时间-开始时间',
  `end` date NULL DEFAULT NULL COMMENT '推广时间-结束时间',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `process_id` tinyint(1) NULL DEFAULT NULL COMMENT '当前所处流程id',
  `unlimited_districts` tinyint(4) NOT NULL DEFAULT 1 COMMENT '是否不限区域：0限制，1不限',
  `tendency_resource_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '倾向性场地供给id字符串集合',
  `tendency_resource` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '倾向性场地名称,多个逗号隔开',
  `is_tendency` tinyint(1) NULL DEFAULT NULL COMMENT '是否倾向性场地:1是 0不是',
  `accept_recommend` tinyint(1) NULL DEFAULT NULL COMMENT '接受推荐:1是 0否',
  `regional_requirement` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '区域(商圈)要求',
  `demand_log_id` int(11) NOT NULL DEFAULT 0 COMMENT '需求日志id(用于查看重启前的推荐信息)',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_demand_city`(`demand_id`, `city_id`) USING BTREE,
  INDEX `idx_demand_log`(`demand_log_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '城市需求表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_city_district`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_city_id` int(10) UNSIGNED NOT NULL COMMENT '需求城市表ID',
  `district_id` smallint(5) UNSIGNED NOT NULL COMMENT '区域表ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_contract_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_id` int(11) NOT NULL COMMENT '需求 id',
  `contract_id` int(11) NOT NULL COMMENT '合同 id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_feedback_items`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_feedback_id` int(11) NOT NULL COMMENT 'demand_feedbacks表的id',
  `selling_resource_id` int(11) NOT NULL COMMENT '供给id,对应表selling_resources',
  `selling_resource_price_id` int(11) NOT NULL COMMENT '规格id,对应表selling_resource_id',
  `start` date NOT NULL COMMENT '所选中的开始日期',
  `end` date NOT NULL COMMENT '所选中的结束日期',
  `original_price` decimal(16, 2) NULL DEFAULT NULL COMMENT '市场价,单位:元',
  `cost_price` decimal(16, 2) NULL DEFAULT NULL COMMENT '成本价,单位:元',
  `deposit` decimal(16, 2) NULL DEFAULT NULL COMMENT '押金,单位:元',
  `price` decimal(16, 2) NULL DEFAULT NULL COMMENT '售价,单位:元',
  `origin_price_info` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '原规格信息(反馈时的规格信息和价格)',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `follower_price` decimal(16, 2) NULL DEFAULT NULL COMMENT '跟进人填的售价,单位:元',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_demand_feedback`(`demand_feedback_id`) USING BTREE,
  INDEX `idx_selling_resource`(`selling_resource_id`) USING BTREE,
  INDEX `idx_selling_resource_price`(`selling_resource_price_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部需求-反馈详细表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_feedback_rejections`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_follower_id` int(11) NOT NULL COMMENT 'demand_followers表的id',
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '类型 1-资拓拒绝提供反馈 2-商拓驳回反馈',
  `reason` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '拒绝理由',
  `attachment` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '附件url',
  `attachment_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '附件名称',
  `created_by` int(11) NOT NULL COMMENT '创建人id',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_demand_follower`(`demand_follower_id`) USING BTREE,
  INDEX `idx_created_by`(`created_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部需求反馈拒绝相关表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_feedbacks`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_follower_id` int(11) NOT NULL COMMENT 'demand_followers表id',
  `selling_resource_id` int(11) NOT NULL COMMENT 'selling_resources表id',
  `status` tinyint(4) NOT NULL DEFAULT 1 COMMENT '反馈状态:1-已挑选 2-未确认 3-已确认',
  `remark` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '备注',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `adopt_at` datetime(0) NULL DEFAULT NULL COMMENT '推荐到推荐结果(status=3)的时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_demand_follower`(`demand_follower_id`) USING BTREE,
  INDEX `idx_selling_resource`(`selling_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部需求反馈信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_followers`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_id` int(11) NOT NULL COMMENT '内部需求id 见demands表',
  `follower_id` int(11) NOT NULL COMMENT '跟进人id',
  `created_by` int(11) NOT NULL COMMENT '创建人id',
  `status` tinyint(1) NOT NULL DEFAULT 0 COMMENT '跟进状态:0-最初成为跟进人时状态,1-待处理,2-已反馈,3-被驳回,4-已拒绝反馈',
  `attachment` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '反馈附件url',
  `attachment_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '附件名称',
  `is_creator` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否是创建人 默认0不是创建人1是',
  `already_read` tinyint(4) NOT NULL DEFAULT 0 COMMENT '被指派后是否查看我跟进的需求列表:默认1已查看0未查看',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `accept_at` datetime(0) NULL DEFAULT NULL COMMENT '跟进人接受需求的时间',
  `approval_level` tinyint(1) NULL DEFAULT NULL COMMENT '审批人等级,1专员,2主管级3全国资源部',
  `demand_city_id` int(11) NULL DEFAULT NULL COMMENT '需求城市id',
  `process_id` tinyint(1) NULL DEFAULT NULL COMMENT '当前所处流程id,表demand_assignment_processes',
  `approved_at` datetime(0) NULL DEFAULT NULL COMMENT '当前用户进行同意/指派的时间',
  `rejected_at` datetime(0) NULL DEFAULT NULL COMMENT '当前用户进行同意/指派的时间',
  `remind_at` datetime(0) NULL DEFAULT NULL COMMENT '上次未处理提醒的时间',
  `demand_log_id` int(11) NOT NULL DEFAULT 0 COMMENT '需求日志id(用于查看重启前的推荐信息)',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_demand`(`demand_id`) USING BTREE,
  INDEX `idx_demand_city`(`demand_city_id`) USING BTREE,
  INDEX `idx_demand_log`(`demand_log_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部需求跟进人表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_histories`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `selling_resource_id` int(11) NOT NULL DEFAULT 0 COMMENT '需求推荐供给的id,表selling_resources',
  `user_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联用户的id,表users',
  `demand_id` int(11) NOT NULL DEFAULT 0 COMMENT '内部需求的id,表demands',
  `recommended_at` date NOT NULL COMMENT '推荐反馈的时间',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_selling_resource`(`selling_resource_id`) USING BTREE,
  INDEX `idx_user`(`user_id`) USING BTREE,
  INDEX `idx_demand`(`demand_id`) USING BTREE,
  INDEX `recommended_at`(`recommended_at`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '需求-供给反馈历史表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_logs`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_id` int(11) NOT NULL COMMENT '场推需求id',
  `type` int(11) NOT NULL COMMENT '操作类型:1-确认需求 2-关闭需求 3-重启需求',
  `reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '需求操作原因,可能是关闭和重启的原因',
  `status` tinyint(4) NULL DEFAULT NULL COMMENT '需求当时的状态',
  `process_id` tinyint(4) NULL DEFAULT NULL COMMENT '需求当时所处的流程id',
  `city_count` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '需求当时的城市个数',
  `created_by` int(11) NOT NULL COMMENT '操作人id,users表',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '需求状态变更记录' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demand_scopes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_id` int(11) NOT NULL COMMENT '内部需求id,见demands',
  `relation_id` int(11) NOT NULL COMMENT '关联模型id',
  `relation_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联模型',
  `min_area` decimal(16, 2) NULL DEFAULT NULL COMMENT '对应展位类型所需最小面积',
  `max_area` decimal(16, 2) NULL DEFAULT NULL COMMENT '对应展位类型所需最大面积',
  `min_amount` int(11) NULL DEFAULT NULL COMMENT '对应展位类型最小个数(告知跟进人需要提供的展位数量)',
  `max_amount` int(11) NULL DEFAULT NULL COMMENT '对应展位类型最大个数',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_demand`(`demand_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部需求管理-相关多选项 多态关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`demands`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `created_by` int(11) NOT NULL COMMENT '创建人id,对应表users',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '需求名称',
  `company_id` int(11) NULL DEFAULT NULL COMMENT '关联的客户 id',
  `contact_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联的联系人 id',
  `type` tinyint(4) NOT NULL DEFAULT 0 COMMENT '跟进状态 0 初始状态 1 初次报价、2 档期价格确认、3 客户签约中、4 场地签约中、5 成交支付、6 落地、7失败',
  `pre_type` tinyint(4) NOT NULL DEFAULT 0 COMMENT '之前跟进状态 0 初始状态 1 初次报价、2 档期价格确认、3 客户签约中、4 场地签约中、5 成交支付、6 落地、7失败',
  `type_change_at` datetime(0) NULL DEFAULT NULL COMMENT '更改跟进状态时间',
  `status` tinyint(4) NOT NULL DEFAULT 1 COMMENT '需求状态:1-未确认 2-已确认 3-已关闭',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '关联用户id,对应表users',
  `user_name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '用户名称,关联用户找不到的时候保存的字符串',
  `cooperation_cycle` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '合作周期',
  `sale_content` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '销售内容',
  `budget_type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '推广预算周期:1天 2周 3月 4年',
  `min_budget` decimal(16, 2) NULL DEFAULT NULL COMMENT '最低预算,单位:元',
  `max_budget` decimal(16, 2) NULL DEFAULT NULL COMMENT '最高预算,单位:元',
  `fixed_period` tinyint(1) NOT NULL COMMENT '推广时间是否固定:1-固定 0-不固定',
  `start` date NULL DEFAULT NULL COMMENT '推广时间-开始时间',
  `end` date NULL DEFAULT NULL COMMENT '推广时间-结束时间',
  `spread_time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '预计推广时间字符串',
  `company_type` tinyint(1) NULL DEFAULT NULL COMMENT '企业类型,数字代表见demand模型',
  `product` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '推广产品',
  `is_indoor` tinyint(4) NULL DEFAULT NULL COMMENT '是否是室内 1是 0不是 null没选',
  `remark` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '补充说明',
  `attachment` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '案例附件url',
  `attachment_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '附件名称',
  `field_order_id` int(11) NULL DEFAULT NULL COMMENT '关联订单id,对应表field_orders',
  `deadline` datetime(0) NOT NULL COMMENT '截止时间',
  `finish_at` datetime(0) NULL DEFAULT NULL COMMENT '需求实际关闭或已确认时间(用于记录逾期时间)',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `gender_tendency` tinyint(4) NULL DEFAULT NULL COMMENT '需求目标人群性别倾向(0:不限，1:男性，2:女性)',
  `min_number_of_people` int(11) NULL DEFAULT NULL COMMENT '最小人流量',
  `max_number_of_people` int(11) NULL DEFAULT NULL COMMENT '最大人流量',
  `cooperation_landing_times` int(11) NULL DEFAULT NULL COMMENT '合作落地次数',
  `requirement` tinyint(1) NULL DEFAULT NULL COMMENT '客户需求:1单场地,2多场地',
  `channel` tinyint(1) NULL DEFAULT NULL COMMENT '渠道:1品牌方 2渠道方',
  `is_tendency` tinyint(1) NULL DEFAULT NULL COMMENT '是否倾向性场地:1是 0不是',
  `tendency_resource` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '倾向性场地名称,多个逗号隔开',
  `accept_recommend` tinyint(1) NULL DEFAULT NULL COMMENT '接受推荐:1是 0否',
  `regional_requirement` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '区域(商圈)要求',
  `resource_size` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '场地大小',
  `acceptable_increase` tinyint(1) NULL DEFAULT NULL COMMENT '可接受的涨幅:单位%',
  `advertise_resource` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '免费广告资源id集合,多个id逗号隔开',
  `need_to_bid` tinyint(1) NULL DEFAULT NULL COMMENT '是否需要竞标',
  `bidding_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '竞标类型',
  `competing_company` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '竞品单位',
  `expected_success_rate` tinyint(1) NULL DEFAULT NULL COMMENT '预期成单率:单位%',
  `process_id` tinyint(1) NULL DEFAULT NULL COMMENT '当前所处流程id',
  `city_count` tinyint(1) NOT NULL COMMENT '城市需求个数',
  `customer_approved_at` datetime(0) NULL DEFAULT NULL COMMENT '客户采纳时间',
  `customer_rejected_at` datetime(0) NULL DEFAULT NULL COMMENT '客户拒绝采纳时间',
  `customer_rejected_reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '客户拒绝采纳原因',
  `close_reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '需求关闭原因',
  `reboot_reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '需求重启原因',
  `is_sync` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否同步场地推荐系统 0 否 1 是',
  `followed_by` int(11) NOT NULL DEFAULT 0 COMMENT '客户经理',
  `last_follow_at` datetime(0) NULL DEFAULT NULL COMMENT '最新跟进时间',
  `fail_reason` tinyint(4) NULL DEFAULT NULL COMMENT '失败原因',
  `fail_other_reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '失败原因选择其它时，文字输入原因',
  `customer_time_limit` datetime(0) NULL DEFAULT NULL COMMENT '客户确认时间限制',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_creator`(`created_by`) USING BTREE,
  INDEX `idx_field_order`(`field_order_id`) USING BTREE,
  INDEX `idx_user_name`(`user_name`) USING BTREE,
  INDEX `idx_user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部需求管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`department_operation`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `department_id` int(11) NOT NULL,
  `operation_id` int(11) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`deposit_histories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL COMMENT '关联的订单号',
  `operator_id` int(11) NOT NULL COMMENT '操作员',
  `modified` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '被修改字段',
  `old_value` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '初始值',
  `new_value` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '修改后的值',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_field_order_item_id`(`field_order_item_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`deposits`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL,
  `deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '买家支付的押金(单位:元)',
  `will_refund_deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '准备退给用户的押金(单位:元)',
  `refunded_deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '已退给用户的押金金额(单位:元)',
  `deposit_status` tinyint(4) NOT NULL DEFAULT 1 COMMENT '买家押金状态 0:不退押金 1:未处理 2:已退押金 3:等待确认退款',
  `deposit_refund_type` tinyint(4) NULL DEFAULT NULL COMMENT '买家押金退回方式 1:现金 2:银行卡 3:微信 4:支付宝 5:对公转账',
  `deposit_refund_payment_subject` tinyint(4) NULL DEFAULT NULL COMMENT '买家押金出款主体 1:杭州邻汇 2:上海趣推 3:深圳邻汇 4:杭州万一 5:杭州海瀛',
  `deposit_refund_user_name` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '买家收押金的用户名称',
  `deposit_refund_account` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '买家收押金退款的账号',
  `deposit_refund_bank` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '买家收押金退款的开户行',
  `deposit_refund_operator` int(11) NULL DEFAULT NULL COMMENT '退还押金操作人(关联users表)',
  `deposit_refunded_at` datetime(0) NULL DEFAULT NULL COMMENT '退还押金操作时间',
  `deposit_remark` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '买家押金相关的备注',
  `expense_deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '实付给物业的押金(单位:元)',
  `expense_deposit_will_refund` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '准备收回的物业押金(单位:元)',
  `expense_deposit_refunded` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '已退回的物业押金(单位:元)',
  `expense_deposit_status` tinyint(4) NOT NULL DEFAULT 1 COMMENT '物业押金状态 0:不收回押金 1:未处理 2:已收回押金 3:等待确认收回',
  `expense_deposit_refund_type` tinyint(4) NULL DEFAULT NULL COMMENT '物业押金收回方式 1:现金 2:银行卡 3:微信 4:支付宝 5:对公转账',
  `expense_deposit_refund_date` date NULL DEFAULT NULL COMMENT '物业押金收回日期',
  `expense_deposit_refund_user_name` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '物业押金打款的用户名称',
  `expense_deposit_refund_payment_subject` tinyint(4) NULL DEFAULT NULL COMMENT '物业押金回收主体 1:杭州邻汇 2:上海趣推 3:深圳邻汇 4:杭州万一 5:杭州海瀛',
  `refund_expense_deposit_at` datetime(0) NULL DEFAULT NULL COMMENT '物业押金操作时间',
  `refund_expense_deposit_operator` int(11) NULL DEFAULT NULL COMMENT '物业押金操作人(关联users表)',
  `expense_deposit_remark` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '物业押金相关备注',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_id`(`id`) USING BTREE,
  INDEX `idx_field_order_item_id`(`field_order_item_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`devices`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `device_token` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `os` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '系统（iOS/android)',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `is_crm` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否为crm_app绑定设备(0:不是,1:是)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '设备信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`ding_notify_tasks`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `userid_list` int(11) NOT NULL,
  `message` int(11) NOT NULL,
  `task_id` int(11) NULL DEFAULT NULL,
  `result` int(11) NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`districts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NOT NULL,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `code` int(11) NOT NULL,
  `lng` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '场地在百度地图上的经度坐标',
  `lat` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '场地在百度地图上的纬度坐标',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`employee_departments`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `linhui_user_id` int(11) NOT NULL COMMENT '邻汇员工id',
  `department_id` int(11) NOT NULL COMMENT '部门id',
  `is_manager` int(11) NOT NULL DEFAULT 0 COMMENT '是否是部门管理员 0/否 1/是',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '员工-部门关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`enquiry_information_images`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `enquiry_information_id` int(11) NOT NULL COMMENT '询价信息id',
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片url',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '询价关联图片表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`enquiry_informations`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源id',
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '询价用户的名称',
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '询价用户的手机号码',
  `company` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '公司名称',
  `product` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '产品名称',
  `industry_id` int(11) NOT NULL COMMENT '所在行业',
  `spread_way_id` int(11) NOT NULL COMMENT '推广形式id,见spread_ways表',
  `start` date NOT NULL COMMENT '开始时间',
  `end` date NOT NULL COMMENT '结束时间',
  `size` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '所需面积',
  `plan_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '文件url',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户填写的备注',
  `price` decimal(16, 2) NULL DEFAULT NULL COMMENT '报价,单位元',
  `cost_price` decimal(16, 2) NULL DEFAULT NULL COMMENT '成本价',
  `service_fee` decimal(16, 2) NULL DEFAULT NULL COMMENT '服务费,单位元',
  `reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '拒绝理由',
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT 'enquiring' COMMENT '询价状态，默认询价中',
  `enquiry_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '询价单号',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `filename` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '文件名',
  `admin_remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '管理员填写的备注',
  `deposit` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '应收商家押金，单位：元',
  `property_deposit` decimal(16, 2) NULL DEFAULT NULL COMMENT '支出给物业的押金，单位：元',
  `consumption_tax_point` int(11) NULL DEFAULT 600 COMMENT '商家购买场地需要缴的消费税点，整数。单位：0.01%',
  `consumption_special_tax_point` int(11) NULL DEFAULT 600 COMMENT '商家购买场地需要缴的专用发票消费税点，整数。单位：0.01%',
  `subsidy_rate` int(2) NULL DEFAULT 0 COMMENT '补贴率（单位1%）',
  `subsidy` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '补贴金额，单位元',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '询价信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`enterprises`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `registration_no` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '注册号（组织机构代码)',
  `name` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司名称',
  `corporation` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `citizen_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `cert_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '营业执照的URL',
  `province_id` int(11) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  `district_id` int(11) NULL DEFAULT NULL,
  `address` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '详细地址',
  `contact` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `mobile` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '0' COMMENT '0:待审核 1:认证通过 2:认证失败',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `user_id` int(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '企业认证信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`equipment`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `device_number` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '嗅探设备编号',
  `city_id` int(11) NOT NULL COMMENT '城市id',
  `field_id` int(11) NULL DEFAULT NULL COMMENT '关联的场地编号',
  `created_by` int(11) NOT NULL COMMENT '创建者',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '跟进人',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `display_name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '嗅探设备显示名称（别名）',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '关联的售卖资源ID(见selling_resources表)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '嗅探设备管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`equipment_flowrate_items`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `equipment_flowrate_id` int(11) NULL DEFAULT NULL COMMENT '嗅探设备主键id',
  `mac` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '采集到的手机mac地址',
  `rssi` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '手机的信号强度（单位/dbm），如 rssi=-75，则信号强度为-75dbm',
  `ts` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '目标ssid，手机连接的WIFI的ssid（手机没有连接WIFI则不发送ts、tmc、tc字段，为空时表示手机未连接路由器WIFI）',
  `tmc` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '目标设备的mac地址，手机连接的WIFI的mac地址',
  `tc` varchar(5) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '是否与路由器相连：Y是  N否',
  `ds` varchar(5) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '手机是否睡眠：Y是  N否',
  `essid0` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '该手机用户曾经连接过得WIFI的SSID（最多7个essid）',
  `essid1` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `essid2` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `essid3` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `essid4` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `essid5` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `essid6` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '手机用户姓名',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `rssi1` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '同一个周期内采集的同一个mac的信号强度，最多提供5个rssi，供滤波算法使用',
  `rssi2` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `rssi3` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `rssi4` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `range` decimal(16, 2) NULL DEFAULT NULL COMMENT '手机距离嗅探器的测距距离字段（单位：米）',
  `search_times` int(11) NULL DEFAULT 1 COMMENT '嗅探设备搜寻到设备的次数',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_mac_equipmentflowrateid_deletedat`(`mac`, `equipment_flowrate_id`, `deleted_at`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '嗅探设备检查的人流信息子表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`equipment_flowrates`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `equipment_id` int(11) NULL DEFAULT NULL COMMENT '嗅探设备主键id',
  `field_id` int(11) NULL DEFAULT NULL COMMENT '采集数据时关联的资源id',
  `device_number` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '嗅探设备编号',
  `mmac` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '嗅探器设备自身 WiFi mac',
  `rate` int(10) NULL DEFAULT NULL COMMENT '发送频率',
  `time` datetime(0) NULL DEFAULT NULL COMMENT '时间戳，采集到这些mac的时间',
  `lat` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '北半球，纬度，可能为空（当探针没有找到位置时），定位精度实测在0-50米范围内',
  `lon` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '经度',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `receive_times` int(11) NULL DEFAULT 1 COMMENT '接收同一个mmac嗅探设备上传数据的次数',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '采集数据时关联的售卖资源ID(见selling_resources表)',
  `item_count` int(11) NULL DEFAULT 0 COMMENT '该设备人流的总人流明细条数（总人流量），统计自equipment_flowrate_items表数据',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '嗅探设备检查的人流信息主表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`failed_jobs`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `connection` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `queue` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `payload` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `exception` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `failed_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`favorites`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `target_id` int(11) NOT NULL COMMENT '收藏目标的ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_tag`(`target_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '收藏表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`feedback_additional_infos`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `demand_follower_id` int(11) NOT NULL COMMENT '跟进人id,见demand_followers表',
  `selling_resource_id` int(11) NOT NULL COMMENT '供给id,见selling_resources表',
  `is_bidding` tinyint(1) NULL DEFAULT NULL COMMENT '是否是标类场地:1是0不是',
  `viscous` tinyint(1) NULL DEFAULT NULL COMMENT '场地粘性,1优势2普通3不良',
  `has_schedule` tinyint(1) NULL DEFAULT NULL COMMENT '是否有档期:0没有,1有',
  `retention_time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '保留时间',
  `approach_time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '提前进场搭建时间',
  `need_set_up_fee` tinyint(1) NULL DEFAULT NULL COMMENT '是否有搭建费用,1有0没有',
  `set_up_fee` decimal(16, 2) NULL DEFAULT NULL COMMENT '搭建费用:单位元',
  `need_certification` tinyint(1) NULL DEFAULT NULL COMMENT '是否有凭证要求,1有0没有',
  `certification` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '凭证要求字符串,多个要求逗号隔开',
  `need_property_charge` tinyint(1) NULL DEFAULT NULL COMMENT '是否有物业收费,1有0没有',
  `property_charge` decimal(16, 2) NULL DEFAULT NULL COMMENT '物业收费:单位元',
  `need_construction_list` tinyint(1) NULL DEFAULT NULL COMMENT '需要施工单,1有0没有',
  `water_and_electricity` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '水电费',
  `electric_power` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '电力',
  `need_personal_certification` tinyint(1) NULL DEFAULT NULL COMMENT '是否需要个人凭证:1需要0不需要',
  `need_personal_certification_charge` tinyint(1) NULL DEFAULT NULL COMMENT '是否需要对个人凭证收费:1需要0不需要',
  `personal_certification_charge` decimal(8, 2) NULL DEFAULT NULL COMMENT '个人凭证费用',
  `bargaining_space` tinyint(1) NULL DEFAULT NULL COMMENT '议价空间:单位%',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '其他备注',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_demand_follower_resource`(`demand_follower_id`, `selling_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '反馈补充信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`feedbacks`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `resource_id` int(11) NULL DEFAULT NULL COMMENT '反馈针对的资源,如果为NULL表示针对整个系统反馈',
  `content` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '反馈内容',
  `created_by` int(11) NOT NULL COMMENT '反馈创建者',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) COMMENT '反馈创建时间',
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT 'submitted' COMMENT '反馈状态，submitted：提交；accepted：接受；refused：拒绝；awarded：奖励已发放',
  `bonus` int(11) NULL DEFAULT 0 COMMENT '反馈奖励积分，由运营根据反馈价值填写',
  `feedback_type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '反馈类型：1纠错奖励，2咨询建议，3场地需求',
  `community_id` int(11) NULL DEFAULT NULL COMMENT '反馈针对的场地ID(以前的社区ID)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_contraband`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_id` int(11) NOT NULL COMMENT '资源ID',
  `contraband_id` int(11) NOT NULL COMMENT '禁摆品类ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '资源和禁摆品类多对多关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `field_id` int(20) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `seq` int(11) NULL DEFAULT 0 COMMENT '图片显示顺序',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_fieldid`(`field_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_item_deductions`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL COMMENT '待抵扣的订单id',
  `selling_resource_id` int(11) NOT NULL COMMENT '供应商ID(见selling_resources表)',
  `total_fee` int(11) NOT NULL DEFAULT 0 COMMENT '可以抵扣使用的钱(单位：分)',
  `create_by_id` int(11) NOT NULL COMMENT '创建待抵扣订单的user_id',
  `status` int(4) NULL DEFAULT 0 COMMENT '抵扣状态，0表示未抵扣，1表示已抵扣，2表示已取消取消不能抵扣',
  `deduction_field_order_item_id` int(11) NOT NULL COMMENT '使用抵扣的订单id',
  `deduction_fee` int(11) NOT NULL DEFAULT 0 COMMENT '抵扣掉的钱(单位：分)',
  `deduction_by_id` int(11) NOT NULL COMMENT '操作抵扣订单的user_id',
  `agree_deduction` int(4) NULL DEFAULT 0 COMMENT '是否同意抵扣，0表示不能抵扣，1表示同意抵扣',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '取消订单物业退款关联表（抵扣关联数据和退款记录）' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_item_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL COMMENT '小订单id,见表field_order_items',
  `relation_id` int(11) NOT NULL COMMENT '关联id',
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '关联类型:1-场地推荐系统',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '订单关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_item_scopes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL COMMENT '订单详细表id,见表field_order_items',
  `relation_id` int(11) NOT NULL COMMENT '关联模型id',
  `relation_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联模型',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_field_order_item`(`field_order_item_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '订单详细 多态关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_item_shifts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL,
  `from` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '修改前',
  `to` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '修改后',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注/变动原因',
  `created_by` int(11) NOT NULL COMMENT '修改人',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `column_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '被修改的字段名称',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '订单编辑记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_items`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `title` varchar(400) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `field_order_id` int(20) NOT NULL,
  `user_id` int(20) NOT NULL,
  `origin_fee` int(11) NULL DEFAULT NULL,
  `actual_fee` int(11) NULL DEFAULT NULL,
  `initial_price` int(11) NOT NULL COMMENT '订单创建时的初始价格（也就是运营改价之前的订单价格，单位：分）',
  `start` date NOT NULL,
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `approved_at` datetime(0) NULL DEFAULT NULL,
  `paid_at` datetime(0) NULL DEFAULT NULL,
  `finished_at` datetime(0) NULL DEFAULT NULL,
  `canceled_at` datetime(0) NULL DEFAULT NULL,
  `reviewed_at` datetime(0) NULL DEFAULT NULL,
  `order_remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `subsidy_fee` int(11) NULL DEFAULT NULL COMMENT '邻汇补贴金额',
  `count` int(11) NULL DEFAULT 1 COMMENT '数量',
  `frame` int(6) NULL DEFAULT NULL COMMENT '框架数',
  `size` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '场地大小',
  `lease_term_type` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '租期(使用m_lease_term_types表的display_name)',
  `tax` int(11) NOT NULL DEFAULT 0 COMMENT '税款(actual_fee*tax_point/10000)单位:分',
  `objection` varchar(25) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '审核不通过的理由',
  `invoice_status` int(11) NOT NULL DEFAULT 1 COMMENT '0：未开票，1：已开票',
  `is_execute` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否委托执行 0：否 ，1：委托执行',
  `payable` tinyint(4) NULL DEFAULT 0 COMMENT '是否已经支付给物业 0: 否，1：是 ',
  `payable_amount` int(11) NULL DEFAULT NULL COMMENT '实际支付给物业金额，以分为单位',
  `payable_remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '支付给物业款项备注',
  `leave_words` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '留言',
  `sale_by` int(11) NULL DEFAULT NULL COMMENT '订单发生时场地所有者',
  `execute_period` int(11) NOT NULL DEFAULT 0 COMMENT '地推天数',
  `approved_by` int(11) NULL DEFAULT NULL COMMENT '审核人',
  `rejected_by` int(11) NULL DEFAULT NULL COMMENT '拒绝人',
  `custom_dimension` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '自定义规格',
  `point` int(11) NOT NULL DEFAULT 0 COMMENT '使用的积分数',
  `deducted` int(11) NOT NULL DEFAULT 0 COMMENT '积分抵扣的费用(单位：分)',
  `unit_price` int(11) NOT NULL DEFAULT 0 COMMENT '订单提交时的商品单价',
  `invoice_id` int(11) NULL DEFAULT NULL COMMENT '订单行所属的发票(NULL表示还未申请开票)',
  `res_type_id` int(11) NOT NULL DEFAULT 1 COMMENT '资源类型ID',
  `field_type_id` int(11) NOT NULL DEFAULT 1 COMMENT '场地类型ID',
  `payment` int(11) NULL DEFAULT NULL COMMENT '实际支付金额',
  `field_followed_by` int(11) NULL DEFAULT NULL COMMENT '订单发生时场地跟进人',
  `business_followed_by` int(11) NULL DEFAULT NULL COMMENT '订单发生时商家跟进人',
  `return_visited` int(2) NULL DEFAULT 0 COMMENT '订单是否已经进行回访',
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '订单商品的图片',
  `linhui_discount_rate` int(11) NOT NULL DEFAULT 0 COMMENT '邻汇分成比例（单位1%)',
  `end` date NULL DEFAULT NULL COMMENT '订单结束时间',
  `event_end` date NULL DEFAULT NULL COMMENT '活动结束时间',
  `share` int(11) NULL DEFAULT NULL,
  `share_type` int(11) NULL DEFAULT 1 COMMENT '1：固定比例 2：固定金额',
  `fixed_share` int(11) NULL DEFAULT 0 COMMENT '固定分成金额',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '订单跟进人',
  `deposit_remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '押金备注',
  `deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '押金值(单位：元)',
  `refunded_deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '已退押金金额(单位：元)',
  `refund_deposit_operator` int(11) NULL DEFAULT NULL COMMENT '退还押金操作人user_id，关联users表',
  `deposit_refunded_at` datetime(0) NULL DEFAULT NULL COMMENT '退还押金操作时间',
  `minimum_order_quantity` int(11) NOT NULL DEFAULT 1 COMMENT '最小订货量(单位：天)',
  `consumption_tax_point` int(11) NOT NULL DEFAULT 800 COMMENT '商家购买场地需要缴的消费税点(普票或专票税点)，整数。单位：0.01%',
  `invoice_order_id` int(11) NULL DEFAULT NULL COMMENT '订单行所属的发票订单(NULL表示还未改开发票)',
  `material` int(11) NOT NULL DEFAULT 1 COMMENT '发票材质(0:电子 1:纸质)',
  `ticket_type` int(11) NOT NULL DEFAULT 1 COMMENT '开票类型：1收据 2发票 3专用发票',
  `receipted_by` int(11) NULL DEFAULT NULL COMMENT '确认收款（待支付订单）的操作人id',
  `original_price` int(11) NULL DEFAULT NULL COMMENT '场地原价(也就是加价前的价格,单位：分)',
  `expense` int(11) NOT NULL DEFAULT 0 COMMENT '成本,即实际支付给物业的金额(单位：分)',
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源ID(见selling_resources表)',
  `is_refund` tinyint(1) NULL DEFAULT 0 COMMENT '退款状态：0/未退款 1/已退款 2/不退款',
  `refund_by` int(11) NULL DEFAULT NULL COMMENT '退款人',
  `refund_at` datetime(0) NULL DEFAULT NULL COMMENT '退款时间',
  `service_fee` int(11) NULL DEFAULT 0 COMMENT '订单服务费，单位：分',
  `consumption_special_tax_point` int(11) NOT NULL DEFAULT 600 COMMENT '商家购买场地需要缴的消费税点(专票税点)，整数。单位：0.01%',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '订单场地所在城市id',
  `enquiry_information_id` int(11) NULL DEFAULT NULL COMMENT '询价单id',
  `handing_charge` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '支付手续费，元',
  `include_tax` int(4) NULL DEFAULT 0 COMMENT '实收款是否含税，默认不含税：0 不含税，1 含税',
  `after_tax_point` int(11) NOT NULL DEFAULT 0 COMMENT '事后税点，整数。单位：0.01%',
  `after_tax` int(11) NOT NULL DEFAULT 0 COMMENT '事后税款，整数。单位：分',
  `deposit_status` tinyint(4) NOT NULL DEFAULT 1 COMMENT '买家押金状态 0：不退押金 1：未处理 2：已退押金',
  `no_refund_for_deposit` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '不退押金原因',
  `contract_id` int(11) NULL DEFAULT NULL COMMENT '合同id',
  `is_manual_order` tinyint(4) NULL DEFAULT 0 COMMENT '是否人工下单：0 否，1 后台人工下单',
  `user_coupon_id` int(11) NULL DEFAULT NULL COMMENT '用户优惠券id',
  `coupon_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '优惠券优惠金额',
  `district_id` int(11) NULL DEFAULT NULL COMMENT '订单场地所在区域id，见districts',
  `expense_deposit` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '实付给物业的押金 （单位：分）',
  `auto_cancel` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否系统自动取消 0：否  1：是',
  `debit_id` int(11) NULL DEFAULT NULL COMMENT '财务指派记录id：关联表 debits',
  `no_refund_objection` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '不退款原因',
  `industry_id` int(11) NULL DEFAULT NULL COMMENT '买家所在主行业id',
  `recovery_status` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否收回(0:未收回,1:已收回,2:退回重填,3:待确认,4:无法开票)',
  `inward_objection` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '发票退回重填原因',
  `expense_deposit_status` tinyint(1) NOT NULL DEFAULT 1 COMMENT '付款至物业的押金状态 0：不退押金 1：未处理 2：已退押金',
  `refund_expense_deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '付款至物业的押金退回金额（单位：元）',
  `no_refund_for_expense_deposit` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '不退押金理由（付款至物业押金）',
  `refund_expense_deposit_at` datetime(0) NULL DEFAULT NULL COMMENT '物业押金操作时间',
  `refund_expense_deposit_by` int(11) NOT NULL COMMENT '物业押金操作人（关联users表）',
  `other_expense` int(11) NULL DEFAULT NULL COMMENT '他项支出费 （单位：分）',
  `special_expense` int(11) NULL DEFAULT NULL COMMENT '特殊报批费 （单位：分）',
  `additional_cost` int(11) NULL DEFAULT NULL COMMENT '额外成本 （单位：分）',
  `approved_by_self` tinyint(1) NULL DEFAULT NULL COMMENT '自主审核订单 1：自主审核  2：首单自主审核',
  `product` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '补充信息-产品名称',
  `approach_time` time(0) NULL DEFAULT NULL COMMENT '进场时间',
  `exit_time` time(0) NULL DEFAULT NULL COMMENT '退场时间',
  `invoice_submitted_at` timestamp(0) NULL DEFAULT NULL COMMENT '发票首次提交时间',
  `invoice_submitted_by` int(11) NULL DEFAULT NULL COMMENT '发票首次提交操作人',
  `invoice_confirmed_at` timestamp(0) NULL DEFAULT NULL COMMENT '财务确认收票时间',
  `invoice_confirmed_by` int(11) NULL DEFAULT NULL COMMENT '财务确认收票操作人 关联users.id',
  `invoice_unable_at` timestamp(0) NULL DEFAULT NULL COMMENT '无法开票操作时间',
  `invoice_unable_by` int(11) NULL DEFAULT NULL COMMENT '无法开票操作人 关联users.id',
  `is_batch_submitted` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否批量提交发票 0：否 1：是',
  `object_type` tinyint(4) NULL DEFAULT NULL COMMENT '拒绝原因类别 1：买家原因 2：供应商原因 3：其它原因',
  `operation_mark` varchar(800) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '内部备注（运营备注）',
  `custom_price` int(11) NOT NULL DEFAULT 0 COMMENT '物业自定义加价价格（单位：分）',
  `company_id` int(11) NULL DEFAULT NULL COMMENT '客户id（关联companies.id）',
  `brand_id` int(11) NULL DEFAULT NULL COMMENT '品牌id（关联m_brands.id）',
  `demand_id` int(11) NULL DEFAULT NULL COMMENT '场地需求id（关联demands.id）',
  `invoice_cancel_reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开票取消原因(对应invoices表申请开票后被取消时的原因)',
  `property_invoice_remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '后台提交订单发票给财务时填的原因',
  `community_id` int(11) NULL DEFAULT NULL COMMENT '场地ID，关联m_community_resources.id',
  `business_follower_city` int(11) NULL DEFAULT NULL COMMENT '下单用户商家跟进人当时城市的ID',
  `extra_amount` int(11) NOT NULL DEFAULT 0 COMMENT '订单追加金额总和：单位分',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `field_order`(`field_order_id`) USING BTREE,
  INDEX `idx_payment`(`payment`) USING BTREE,
  INDEX `idx_userid`(`user_id`) USING BTREE,
  INDEX `idx_sellingresourceid`(`selling_resource_id`) USING BTREE,
  INDEX `idx_d`(`deleted_at`) USING BTREE,
  INDEX `idx_invoiceid`(`invoice_id`) USING BTREE,
  INDEX `idx_user_coupon`(`user_coupon_id`) USING BTREE,
  INDEX `idx_seller`(`sale_by`) USING BTREE,
  INDEX `idx_debit`(`debit_id`) USING BTREE,
  INDEX `idx_business_followed_by`(`business_followed_by`) USING BTREE,
  INDEX `idx_deposit`(`deposit`) USING BTREE,
  INDEX `idx_expense_deposit`(`expense_deposit`) USING BTREE,
  INDEX `idx_status_visit`(`deleted_at`, `status`, `return_visited`) USING BTREE,
  INDEX `idx_finished_at`(`finished_at`) USING BTREE,
  INDEX `idx_canceled_at`(`canceled_at`) USING BTREE,
  INDEX `idx_approved_at`(`approved_at`) USING BTREE,
  INDEX `idx_debit_recovery_status`(`recovery_status`, `debit_id`) USING BTREE,
  INDEX `idx_deleted`(`deleted_at`, `community_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_receivable_shifts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_order_receivable_id` int(11) NOT NULL,
  `from` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '修改前',
  `to` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '修改后',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注/变动原因',
  `created_by` int(11) NOT NULL COMMENT '修改人',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `column_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '被修改的字段名称',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '主订单应收款（垫付）编辑记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_receivables`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `field_order_id` int(20) NOT NULL COMMENT '场地订单ID',
  `serial_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '流水号',
  `order_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '订单号',
  `transaction_type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '交易类型：1 垫付',
  `pay_type` tinyint(4) NULL DEFAULT -1 COMMENT '支付方式(-1:表示订单还未发起支付,方式未知 0:线下支付 1：微信app支付 2:微信公众号支付 3:微信原生扫码支付 4:邻汇钱包支付 5:微信小程序支付 6:5w微信app支付 7:微信H5支付 8:支付宝PC端网页支付,9:支付宝手机网页支付,10:支付宝APP支付)',
  `user_id` int(11) NOT NULL COMMENT '付款人用户编号',
  `amount` int(11) NOT NULL COMMENT '金额，单位为分',
  `status` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '状态  \r\nsubmitted：待支付/待收款\r\npaid：已成交/已收款\r\nexpired：已到期/已逾期',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `expired_at` datetime(0) NULL DEFAULT NULL COMMENT '垫付到期时间',
  `paid_at` datetime(0) NULL DEFAULT NULL COMMENT '成交/支付时间',
  `created_by` int(11) NOT NULL COMMENT '创建者',
  `paid_by` int(11) NULL DEFAULT NULL COMMENT '确认收款人id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_order_id`(`field_order_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '主订单应收款（垫付）表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_order_reviews`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL COMMENT '小订单id（小订单表field_order_items）',
  `score` tinyint(1) NOT NULL DEFAULT 5 COMMENT '综合评分 ( 1-5 星 )',
  `content` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL COMMENT '评价/回访 内容',
  `user_id` int(11) NOT NULL COMMENT '评价人id（用户表users）',
  `anonymity` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否匿名 0：否  1：是',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `delete_at` datetime(0) NULL DEFAULT NULL,
  `number_of_people` int(11) NULL DEFAULT NULL COMMENT '人流量',
  `volume` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT '' COMMENT '单量(也就是成交量)',
  `score_of_visitorsflowrate` tinyint(1) NOT NULL DEFAULT 5 COMMENT '人流量评分星级 ( 1-5 星 )',
  `score_of_userparticipation` tinyint(1) NOT NULL DEFAULT 5 COMMENT '用户参与度评分星级 ( 1-5 星 )',
  `score_of_propertymatching` tinyint(1) NOT NULL DEFAULT 5 COMMENT '物业配合度评分星级 ( 1-5 星 )',
  `score_of_goalcompletion` tinyint(1) NOT NULL DEFAULT 5 COMMENT '目标完成度评分星级 ( 1-5 星 )',
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源ID(见selling_resources表)',
  `sold_amount` decimal(16, 2) NULL DEFAULT NULL COMMENT '交易额：元',
  `age` int(11) NULL DEFAULT NULL COMMENT '年龄层（关联年龄层表m_age_levels）',
  `gender` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NULL DEFAULT NULL COMMENT '男性占比',
  `consumption` int(11) NULL DEFAULT NULL COMMENT '消费能力（管理消费能力表m_consumption_levels）',
  `industry_id` int(11) NULL DEFAULT NULL COMMENT '子行业id（行业表industries）',
  `root_industry_id` int(11) NULL DEFAULT NULL COMMENT '主行业id（行业表industries）',
  `fans` int(11) NULL DEFAULT NULL COMMENT '获客数',
  `fans_wechat` int(11) NULL DEFAULT NULL COMMENT '新增粉丝数',
  `app_downloads` int(11) NULL DEFAULT NULL COMMENT '新增下载量',
  `actual_fee` decimal(16, 2) NULL DEFAULT NULL COMMENT '订单实际费用（加价后、改价后的场地费），单位：元',
  `payment` decimal(16, 2) NULL DEFAULT NULL COMMENT '实际支付金额（实付款 = 场地费 - 补贴 - 积分抵扣 + 税费 + 押金 + 服务费），单位：元',
  `debit_fee` decimal(16, 2) NULL DEFAULT NULL COMMENT '物业应收款（物业应收款 = 场地原价（加价前原价） - 分成），单位：元',
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '类型 1：评价  2：回访  3：默认好评',
  `status` varchar(16) CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL DEFAULT 'approved' COMMENT '状态 approved：上架  denied：下架',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_oi`(`field_order_item_id`) USING BTREE,
  INDEX `idx_selling_resource`(`selling_resource_id`) USING BTREE,
  INDEX `idx_type`(`type`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_bin ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_orders`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `order_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `refund_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wx_prepay_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `user_id` int(11) NOT NULL,
  `status` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `contact` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `total_fee` int(11) NOT NULL,
  `actual_fee` int(11) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `paid_at` datetime(0) NULL DEFAULT NULL,
  `approved_at` datetime(0) NULL DEFAULT NULL,
  `finished_at` datetime(0) NULL DEFAULT NULL,
  `reviewed_at` datetime(0) NULL DEFAULT NULL,
  `confirmed_at` datetime(0) NULL DEFAULT NULL COMMENT '财务确认时间',
  `subsidy_fee` int(11) NULL DEFAULT NULL COMMENT '邻汇补贴金额',
  `tax` int(11) NOT NULL DEFAULT 0 COMMENT '所有商品税款的总计',
  `pay_type` tinyint(4) NOT NULL DEFAULT -1 COMMENT '支付方式(-1:表示订单还未发起支付,方式未知 0:线下支付 1：微信app支付 2:微信公众号支付 3:微信原生扫码支付 4:邻汇钱包支付 5:微信小程序支付 6:5w微信app支付 7:微信H5支付 8:支付宝PC端网页支付,9:支付宝手机网页支付,10:支付宝APP支付)',
  `delegated` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否托管执行',
  `need_decoration` int(11) NOT NULL DEFAULT 0 COMMENT '是否需要布置',
  `need_transportation` int(11) NOT NULL DEFAULT 0 COMMENT '是否需要运输',
  `voucher_image_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '线下支付的凭证',
  `point` int(11) NOT NULL DEFAULT 0 COMMENT '使用的积分总数',
  `deducted` int(11) NOT NULL DEFAULT 0 COMMENT '积分抵扣的总费用(单位：分)',
  `paid_by` int(11) NOT NULL DEFAULT 1 COMMENT '付款人ID',
  `out_trade_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '第三方支付商户订单号',
  `deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '押金值(单位：元)',
  `out_trade_no_for_query` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '未完成支付的商户订单号, 用来主动查询支付状态。(因为重新发起支付是都会重新生成商家订单号，所以需要增加一个字段用以避免已支付的商户订单号被覆盖)',
  `pay_type_for_query` tinyint(4) NOT NULL DEFAULT -1 COMMENT '未完成支付时用户选择支付方式, 用来主动查询支付状态。(因为重新发起支付是都会重新修改支付方式，所以需要增加一个字段用以避免已支付的支付方式被覆盖，可选值参考pay_type字段)',
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '联系人地址',
  `service_fee` int(11) NULL DEFAULT 0 COMMENT '场地服务费总额，单位：分',
  `ticket_type` int(11) NOT NULL DEFAULT 0 COMMENT '开票类型：0不开票据 1收据 2发票 3专用发票',
  `invoice_content` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开票内容',
  `invoice_content_tax_point` decimal(6, 2) NOT NULL DEFAULT 0.00 COMMENT '开票内容的税点,单位例:0.01=1%',
  `company_title` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司抬头',
  `tax_number` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司税号',
  `company_region` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司所属地区',
  `company_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司详细地址',
  `company_mobile` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司电话',
  `bank` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户行',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户账号',
  `material` int(11) NOT NULL DEFAULT 1 COMMENT '发票材质(0:电子 1:纸质)',
  `delivery_fee` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '快递费(单位：元)',
  `consignee` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '收货人',
  `consignee_mobile` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '收货人联系电话',
  `consignee_address` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '详细收件地址',
  `general_taxpayer_qualification` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '一般纳税人资格证明URL',
  `email` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '邮箱（用于接收电子发票）',
  `ticket_remarks` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开票备注',
  `refuse_reason` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '拒绝原因',
  `channel` tinyint(1) NOT NULL DEFAULT 6 COMMENT '下单渠道(1:andriod2:ios3:wxApplet4:pc5:wap6:未知)',
  `total_coupon_fee` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '优惠券总优惠金额',
  `received_status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '对公订单收款状态：confirming/待确认 received/已收款 unreceived/未收款',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_userid`(`user_id`) USING BTREE,
  INDEX `idx_pay_type`(`pay_type`) USING BTREE,
  INDEX `idx_order_num`(`order_num`) USING BTREE,
  INDEX `idx_status`(`status`, `deleted_at`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_qr_codes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '名称',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市编号',
  `district_id` int(11) NULL DEFAULT NULL COMMENT '区域编号',
  `qr_img` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '场地二维码图片地址',
  `clicked_times` int(11) NOT NULL DEFAULT 0 COMMENT '通过二维码进入页面的次数，更换场地后重置',
  `created_by` int(11) NULL DEFAULT NULL COMMENT '创建人',
  `related_by` int(11) NULL DEFAULT NULL COMMENT '关联场地的操作者',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '售卖资源ID(见selling_resources表)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地二维码表（物料覆盖）' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_requirement`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_id` int(11) NOT NULL COMMENT '资源ID',
  `requirement_id` int(11) NOT NULL COMMENT '物业要求ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '资源和物业要求多对多关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_shifts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `from` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,
  `to` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,
  `created_by` int(11) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `column_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '被修改的字段名称',
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源ID(见selling_resources表)',
  `relation_type` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关系类型，保存创建收支记录的表的Model路径，如 App\\Models\\AdvancePayment，App\\Models\\FieldOrderItem',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_sellingresourceid_deletedat`(`selling_resource_id`, `deleted_at`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_shopping_items`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `user_id` int(20) NOT NULL,
  `start` date NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `count` int(20) NULL DEFAULT 1,
  `count_of_time_unit` int(11) NOT NULL DEFAULT 1 COMMENT '时间单位数量(e.g. 3周, 3个季度)',
  `res_price_id` int(11) NOT NULL COMMENT '规格表ID',
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源ID(见selling_resources表)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_type_categories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `category_id` int(11) NOT NULL COMMENT '类别ID',
  `field_type_id` int(11) NOT NULL COMMENT '场地类别ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地类别与热门分类关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`field_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `icon` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '场地类型图标',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `sequence` int(11) NOT NULL DEFAULT 0 COMMENT '排序字段',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`filters`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `params` varchar(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`form_operation_records`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `form_name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '表单名  \r\nfield：场地资源表  ',
  `form_id` int(20) NOT NULL COMMENT '表单主键ID',
  `created_by` int(11) NOT NULL COMMENT '操作创建者',
  `operation_type` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '操作类别  \r\n创建  修改  同意审核  拒绝审核  等',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '备注/原因',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地编辑记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`group_purchases`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `min` int(11) NOT NULL COMMENT '成团最少人数',
  `max` int(11) NOT NULL COMMENT '成团最多人数',
  `field_length` decimal(16, 2) NOT NULL COMMENT '场地长度',
  `field_width` decimal(16, 2) NOT NULL COMMENT '场地宽度',
  `group_start` datetime(0) NOT NULL COMMENT '开团时间(开始)',
  `group_end` datetime(0) NOT NULL COMMENT '开团时间(结束)',
  `activity_start` date NOT NULL COMMENT '活动时间(开始)',
  `activity_end` date NOT NULL COMMENT '活动时间(结束)',
  `reviser_id` int(11) NOT NULL COMMENT '修改人id',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `status` int(1) NULL DEFAULT 0 COMMENT '拼团活动状态，0未成团，1已成团，2已结束',
  `number_of_group_purchase_now` int(11) NOT NULL DEFAULT 0 COMMENT '已成功参团的人数',
  `origin_price` decimal(16, 2) NOT NULL COMMENT '原价，单位元，后台发布拼团活动时填写的价格',
  `activity_allow` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '活动支持品类',
  `reason` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '删除理由',
  `is_clean_up` tinyint(4) NULL DEFAULT 0 COMMENT '拼团是否已结算标志，1表示已结算，0表示未结算',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '拼团表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`growth_value_increase_histories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `order_item_id` int(11) NULL DEFAULT NULL COMMENT '订单行ID',
  `remarks` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '成长值原因备注',
  `increment` int(11) NOT NULL COMMENT '成长值增额',
  `status` int(11) NOT NULL DEFAULT 1 COMMENT '增长状态(0:失败 1:成功)',
  `operation_type` int(11) NOT NULL DEFAULT 1 COMMENT '积分操作的类型:1.订单审核通过增加成长值;2.评论增加成长值;3.取消订单扣除成长值;4.成长值到期;5.历史成长值',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '成长值增长记录' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`home_configuration_content`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `home_configuration_id` int(11) NOT NULL COMMENT '首页配置',
  `title` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '配置区块标题',
  `description` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '配置区块描述',
  `keywords` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '配置区块关键字',
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '图片链接',
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '排序',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '首页配置区块内容表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`home_configurations`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '板块名称',
  `button` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '按钮名称',
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '按钮链接',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '首页配置区块管理' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`hot_categories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '分类的显示名称',
  `serial_number` int(11) NOT NULL COMMENT '分类的序号',
  `home_map_pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '首页小图',
  `list_page_pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '列表页大图',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `created_by` int(11) NULL DEFAULT NULL COMMENT '创建人（见uers表）',
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '热门分类表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`hot_search_words`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `word` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `city_id` int(32) NULL DEFAULT NULL COMMENT '城市ID',
  `seq` tinyint(4) NULL DEFAULT NULL COMMENT '排序',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '热门搜索词管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`hot_words`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `word` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NULL DEFAULT NULL,
  `updated_at` datetime(0) NULL DEFAULT NULL,
  `city_id` int(32) NULL DEFAULT NULL COMMENT '城市ID',
  `res_type_id` int(2) NULL DEFAULT NULL COMMENT '资源类型ID',
  `searched_times` int(11) NOT NULL DEFAULT 0 COMMENT '热词搜索次数',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`icons`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(125) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标签名称',
  `icon_url` varchar(125) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标签链接',
  `effective_start` datetime(0) NULL DEFAULT NULL COMMENT '生效开始时间',
  `effective_end` datetime(0) NULL DEFAULT NULL COMMENT '生效结束时间',
  `user_id` int(11) NOT NULL COMMENT '创建人：关联 users 表 id',
  `updated_by` int(11) NULL DEFAULT NULL COMMENT '更新人：关联 users 表 id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`images`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `relation_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联表id',
  `relation_type` tinyint(4) NOT NULL COMMENT '关联类型;1-小订单field_order_items表(效果图/方案)',
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片名称',
  `url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片url地址',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_relation_id`(`relation_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '图片信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`imminent_released_customers`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户名称',
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户联系方式',
  `reason` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '释放原因',
  `release_at` datetime(0) NOT NULL COMMENT '释放时间点',
  `followed_by` int(11) NOT NULL COMMENT '跟进人',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `release_rule_day` int(11) NOT NULL COMMENT '释放规则 /天',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '即将释放客户表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`industries`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `parent_id` int(11) NULL DEFAULT NULL,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`invites`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(10) NOT NULL COMMENT '新注册的用户id',
  `code` varchar(6) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '邀请码',
  `coupon` int(1) NOT NULL DEFAULT 0 COMMENT '邀请人奖励发放 1：已发放 0：未发放',
  `coupon_self` tinyint(1) NULL DEFAULT 0 COMMENT '被邀请人自己下单后的奖励标志 1：已领取 0：未领取',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `invited_by` int(11) NOT NULL,
  `status` int(2) NULL DEFAULT 0 COMMENT '邀请奖励发放状态： 0 未生效  1 待发放  2 无效  3 已指派（已发放，因为指派时可以选择发放，所以存在已指派但是邀请人或被邀请人未发放的情况）',
  `first_purchased_at` datetime(0) NULL DEFAULT NULL COMMENT '第一次下单时间',
  `first_published_at` datetime(0) NULL DEFAULT NULL COMMENT '第一次发布时间',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `invalid_reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '无效原因（status=2无效时填写）',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`invoice_cancelled_orders`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `invoice_id` int(11) NOT NULL COMMENT 'invoices表ID',
  `field_order_item_id` int(11) NOT NULL COMMENT '取消开票之前关联的订单信息,field_order_items表ID',
  `created_by` int(11) NOT NULL COMMENT '取消人ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_invoice`(`invoice_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '取消开票之前关联的订单中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`invoice_infos`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `invoice_id` int(11) NOT NULL COMMENT '发票信息ID',
  `field_order_item_id` int(11) NOT NULL COMMENT '订单ID',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `ticket_type` int(11) NOT NULL DEFAULT 2 COMMENT '开票类型：1收据 2发票',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户的开票信息，当订单完成之后需要在此表中生成未开票信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`invoice_nuonuos`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `invoice_id` int(11) NOT NULL COMMENT '开票id 对应表invoices',
  `params` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '诺诺开票请求提交的参数json集合',
  `result` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '诺诺开票根据流水号获取到的开票信息json集合',
  `created_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '诺诺开票时相关保存参数记录(一般不用 数据历史备份)' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`invoice_orders`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `order_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '订单号',
  `out_trade_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '第三方支付商户订单号',
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `title` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司抬头',
  `content` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开票内容',
  `tax_number` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '税号',
  `ticket_type` int(11) NOT NULL COMMENT '开票类型：1收据 2发票 3专票',
  `material` int(11) NOT NULL DEFAULT 1 COMMENT '发票材质(0:电子 1:纸质)',
  `contact` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '联系人',
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '联系电话',
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '收件地址',
  `amount` decimal(16, 2) NOT NULL COMMENT '发票金额（单位：元）',
  `tax` decimal(16, 2) NOT NULL COMMENT '税费（单位：元）',
  `refunded_tax` decimal(16, 2) NOT NULL COMMENT '已退税费金额（单位：元）',
  `bank` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户行',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户账号',
  `email` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '电子发票的收件email',
  `company_region` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司所属地区',
  `company_mobile` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司电话',
  `company_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司地址',
  `pay_type` tinyint(4) NOT NULL DEFAULT -1 COMMENT '支付方式(-1:表示订单还未发起支付,方式未知 0:线下支付 1：微信app支付 2:微信公众号支付 3:微信原生扫码支付 4:邻汇钱包支付 5:微信小程序支付 6:5w微信app支付 7:微信H5支付 8:支付宝PC端网页支付,9:支付宝手机网页支付,10:支付宝APP支付)',
  `status` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'submitted' COMMENT '待支付、待审核(已支付)、已取消',
  `paid_at` datetime(0) NULL DEFAULT NULL COMMENT '支付时间',
  `wx_prepay_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '微信预付单ID，用于小程序发送模板消息',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `delivery_fee` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '快递费',
  `general_taxpayer_qualification` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '一般纳税人资格证明图片URL',
  `canceled_at` datetime(0) NULL DEFAULT NULL COMMENT '取消开票时间',
  `refunded_delivery_fee` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '已退快递费',
  `ticket_remarks` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开票备注',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '发票订单表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`invoice_title_infos`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `title` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '发票抬头',
  `tax_number` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '税号',
  `invoice_content_id` int(11) NOT NULL COMMENT '开票内容类型ID\n使用statuses表',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `bank` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户行',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户账号',
  `company_region` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司所属地区',
  `company_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司详细地址',
  `company_mobile` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司电话',
  `general_taxpayer_qualification` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '一般纳税人资格证明URL',
  `email` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '电子发票的收件email',
  `invoice_type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '开票类型(1:收据,2:发票,3:专用发票)',
  `is_default` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否为默认发票抬头(0:不是默认,1:默认)',
  `province_id` int(11) NULL DEFAULT NULL COMMENT '省份id',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市id',
  `district_id` int(11) NULL DEFAULT NULL COMMENT '地区id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户的开票信息，当订单完成之后需要在此表中生成未开票信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`invoices`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `title` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '发票抬头',
  `tax_number` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '税号',
  `invoice_content` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开票内容',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系人',
  `mobile` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系方式',
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '详细地址',
  `status` tinyint(1) NULL DEFAULT 0 COMMENT '0:未开票，1:已开票，2:已取消，3:已邮寄，4:申请作废，5:已作废',
  `sum` int(11) NOT NULL DEFAULT 0 COMMENT '开票总价格 单位（分）',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `ticket_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '票号',
  `deliver` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '快递公司',
  `delivery_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '快递单号',
  `issued_at` datetime(0) NULL DEFAULT NULL COMMENT '开票时间',
  `ticket_type` int(11) NOT NULL DEFAULT 1 COMMENT '开票类型：1收据 2发票',
  `bank` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户行',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开户账号',
  `is_paper` int(1) NULL DEFAULT NULL COMMENT '是否为纸质发票，1为纸质发票，0为电子发票',
  `email` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '邮箱号',
  `company_region` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '公司所属地区',
  `company_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '公司详细地址',
  `company_mobile` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司电话',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '票据备注',
  `tax` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '税费（单位：元）',
  `canceled_at` datetime(0) NULL DEFAULT NULL COMMENT '取消开票时间',
  `invoice_content_tax_point` decimal(6, 2) NOT NULL DEFAULT 0.00 COMMENT '开票内容的税点,单位例:0.01=1%',
  `invoice_content_id` int(11) NULL DEFAULT NULL COMMENT '开票内容id,使用statuses表id',
  `general_taxpayer_qualification` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '一般纳税人资格证明URL',
  `remarked_by` int(11) NULL DEFAULT NULL COMMENT '票据备注人',
  `nuonuo_url` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '诺诺开票的pdf开票文件地址',
  `nuonuo_serial_number` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '诺诺开票流水号',
  `is_nuonuo` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否使用诺诺开票:0不使用 1使用',
  `drawer_id` int(11) NULL DEFAULT NULL COMMENT '开票人id',
  `abandoning_at` datetime(0) NULL DEFAULT NULL COMMENT '申请作废时间',
  `abandoned_at` datetime(0) NULL DEFAULT NULL COMMENT '作废时间',
  `pre_status` tinyint(1) NULL DEFAULT 0 COMMENT '(申请)作废之前的发票状态-0:未开票，1:已开票，2:已取消，3:已邮寄，4:申请作废，5:已作废',
  `cancel_reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '取消原因',
  `type` tinyint(1) NOT NULL DEFAULT 2 COMMENT '开票方式  1：预开票 2：正常开票',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户的开票信息，当订单完成之后需要在此表中生成未开票信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`jobs`  (
  `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT,
  `queue` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `payload` longtext CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `attempts` tinyint(3) UNSIGNED NOT NULL,
  `reserved` tinyint(3) UNSIGNED NOT NULL,
  `reserved_at` int(10) UNSIGNED NULL DEFAULT NULL,
  `available_at` int(10) UNSIGNED NOT NULL,
  `created_at` int(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `jobs_queue_reserved_reserved_at_index`(`queue`, `reserved`, `reserved_at`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_unicode_ci COMMENT = 'laravel队列--任务列表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`jwts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `token` varchar(1024) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT 'JSON WEB TOKEN',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户token' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`key_persons`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `potential_demand` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '潜在需求',
  `exist_problem` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '存在问题及其他',
  `level` tinyint(4) NOT NULL DEFAULT 0 COMMENT '星级 数字几就代表几星',
  `status` tinyint(4) NOT NULL DEFAULT 1 COMMENT '状态:1待审核 2待跟进 3已跟进 4已拒绝',
  `remind_time` datetime(0) NULL DEFAULT NULL COMMENT '提醒时间',
  `remind_content` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '提醒内容',
  `created_by` int(11) NOT NULL COMMENT '创建人id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `timed_reminding_date` date NULL DEFAULT NULL COMMENT '定时提醒日期,当天10点需要推送钉钉消息',
  `examine_time` datetime(0) NULL DEFAULT NULL COMMENT '审核通过时间',
  `reject_time` datetime(0) NULL DEFAULT NULL COMMENT '拒绝时间',
  `card` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '名片url',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_created_by`(`created_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'KP客户管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`kp_industries`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `key_person_id` int(11) NOT NULL COMMENT 'kp用户id',
  `industry_id` int(11) NOT NULL COMMENT '行业ID',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx＿key_person`(`key_person_id`) USING BTREE,
  INDEX `idx＿industry`(`industry_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'KP-买家行业中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`label_task_items`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `resource_id` int(11) NOT NULL COMMENT '资源ID',
  `label_task_id` int(11) NOT NULL COMMENT '标签任务ID 关联label_tasks.id',
  `status` varchar(8) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'pending' COMMENT '状态 pending：待处理  success：成功  fail：失败',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`label_tasks`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `type` tinyint(4) NOT NULL COMMENT '标签库类型:1场地标签库;2展位标签库;3用户标签库;4案例库;5服务商库;6活动库;7场地库;8广告库',
  `label_id` int(11) NOT NULL COMMENT '标签ID 关联m_label.id',
  `label_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '标签名称',
  `label_count` mediumint(9) NOT NULL COMMENT '标签总数',
  `success_count` mediumint(9) NOT NULL DEFAULT 0 COMMENT '成功总数',
  `process_count` mediumint(9) NOT NULL DEFAULT 0 COMMENT '完成数量',
  `user_id` int(11) NOT NULL COMMENT '创建人ID 关联users.id',
  `operator_id` int(11) NULL DEFAULT NULL COMMENT '操作人ID  关联users.id',
  `operate_at` datetime(0) NULL DEFAULT NULL COMMENT '操作时间',
  `is_pause` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否暂停 0:否 1:是 2:已完成',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '层级表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`linhui_city_data`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `linhui_data_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联邻汇数据id,见表linhui_data',
  `type` tinyint(4) NOT NULL DEFAULT 0 COMMENT '城市类型:0资源场地所在城市,1下单用户所在城市',
  `resource_city_id` int(11) NOT NULL DEFAULT 0 COMMENT '订单关联场地所在城市id,表cities',
  `user_city_id` int(11) NOT NULL DEFAULT 0 COMMENT '订单关联场地所在城市id,表cities',
  `order_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增下单数',
  `valid_order_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增成交订单数',
  `sale_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '对应城市下单(不论是否成交)交易额',
  `profit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '对应城市下单(不论是否成交)毛利数',
  `valid_sale_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '对应城市新增成交订单交易额',
  `valid_profit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '对应城市新增成交订单毛利数',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `cancel_order_count` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '时间内取消订单数',
  `cancel_sale_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '时间内取消订单交易额',
  `cancel_profit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '时间内取消订单毛利',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_linhui_data`(`linhui_data_id`) USING BTREE,
  INDEX `idx_resource_city`(`resource_city_id`) USING BTREE,
  INDEX `idx_user_city`(`user_city_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '邻汇员工每日分城市数据表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`linhui_contacts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `page` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市，留空表示所有城市有效',
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '详细地址',
  `reserved_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备用号码',
  `reserved_type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备用号码类型',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`linhui_data`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `linhui_user_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联邻汇员工的id',
  `user_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联用户的id',
  `date` date NOT NULL COMMENT '统计的时间日期',
  `new_register` int(11) NOT NULL DEFAULT 0 COMMENT '新增注册用户数',
  `new_business` int(11) NOT NULL DEFAULT 0 COMMENT '新增意向用户数',
  `new_kp` int(11) NOT NULL DEFAULT 0 COMMENT '新增KP用户数',
  `new_order_user` int(11) NOT NULL DEFAULT 0 COMMENT '新增下单用户数',
  `new_valid_order_user` int(11) NOT NULL DEFAULT 0 COMMENT '新增成单用户数',
  `new_property` int(11) NOT NULL DEFAULT 0 COMMENT '新增供应商数',
  `new_selling_resource` int(11) NOT NULL DEFAULT 0 COMMENT '新增供给数',
  `new_physical_resource` int(11) NOT NULL DEFAULT 0 COMMENT '新增展位数',
  `order_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增下单数',
  `valid_order_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增成交订单数',
  `sale_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '新增下单(不论是否成交)交易额',
  `profit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '新增下单(不论是否成交)毛利数',
  `valid_sale_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '新增成交订单交易额',
  `valid_profit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '新增成交订单毛利数',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `cancel_order_count` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '时间内取消订单数',
  `cancel_sale_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '时间内取消订单交易额',
  `cancel_profit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '时间内取消订单毛利',
  `new_business_record` int(11) NOT NULL COMMENT '新增买家跟进数',
  `new_resource_clue_record` int(11) NOT NULL COMMENT '新增资源线索跟进数',
  `new_selling_resource_record` int(11) NOT NULL COMMENT '新增供给跟进数',
  `business_visit_in_face` int(11) NOT NULL COMMENT '当面拜访客户跟进数',
  `resource_clue_visit_in_face` int(11) NOT NULL COMMENT '当面拜访资源线索跟进数',
  `selling_resource_visit_in_face` int(11) NOT NULL COMMENT '当面拜访供给跟进数',
  `new_created_selling_resources` smallint(5) UNSIGNED NOT NULL COMMENT '新创建供给数',
  `selling_resources_has_share` smallint(5) UNSIGNED NOT NULL COMMENT '新创建的有分成的供给数',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_linhui_user`(`linhui_user_id`) USING BTREE,
  INDEX `idx_user`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '邻汇员工每日跟进数据表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`linhui_roles`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `guard_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'web',
  `scope` tinyint(1) NOT NULL DEFAULT 4 COMMENT '数据权限 1：全公司 2：部门及部门以下 3：所属部门 4：个人',
  `special_scope` tinyint(1) NULL DEFAULT NULL COMMENT '特殊数据权限 1：按数据权限 2：按所在城市 3：按数据权限和所在城市',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`linhui_users`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司内部员工真实姓名',
  `job_num` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `sex` varchar(4) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `marriage` varchar(8) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '婚姻状态',
  `fertility` varchar(8) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '生育状态',
  `part_member` varchar(4) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '是否党员',
  `department_id` int(11) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  `position_id` int(11) NULL DEFAULT NULL,
  `level_id` int(11) NULL DEFAULT NULL,
  `id_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '身份证号',
  `education` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '学历',
  `college` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '毕业院校',
  `major` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '专业',
  `graduated_at` date NULL DEFAULT NULL COMMENT '毕业时间',
  `entry_time` date NULL DEFAULT NULL COMMENT '入职时间',
  `qualified_at` date NULL DEFAULT NULL COMMENT '转正时间',
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '状态：实习，试用，转正，离职',
  `birthday` date NULL DEFAULT NULL COMMENT '生日',
  `constellation` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '星座',
  `inner_email` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '公司邮箱',
  `register_type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '户籍类型',
  `id_card_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '身份证地址',
  `mother_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '母亲姓名',
  `mother_mobile` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '母亲电话',
  `mother_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '母亲地址',
  `father_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '父亲姓名',
  `father_mobile` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '父亲电话',
  `father_address` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '父亲地址',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `city_ids` varchar(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '员工可以查看到的资源城市范围',
  `report_to` int(11) NULL DEFAULT NULL COMMENT '直线汇报主管',
  `cc_to` int(11) NULL DEFAULT NULL COMMENT '虚线汇报主管',
  `leave_at` timestamp(0) NULL DEFAULT NULL COMMENT '员工离职时间',
  `avatar` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '邻汇内部员工头像',
  `city_change_at` datetime(0) NULL DEFAULT NULL COMMENT '城市修改时间',
  `department_change_at` datetime(0) NULL DEFAULT NULL COMMENT '部门修改时间',
  `position_change_at` datetime(0) NULL DEFAULT NULL COMMENT '岗位修改时间',
  `protection_period_start_at` date NOT NULL COMMENT '保护期开始时间',
  `protection_period_end_at` date NOT NULL COMMENT '保护期结束时间',
  `is_protection_period` tinyint(4) NOT NULL DEFAULT 1 COMMENT '是否在保护期:默认1在 0不在',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_userid`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部用户信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`location_types`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '展位位置类型标识',
  `display_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '类型名称',
  `created_by` int(11) NOT NULL COMMENT '创建者ID，见users表',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '展位位置类型表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_activity_cases_themes`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '主题名称',
  `user_id` int(11) NOT NULL COMMENT '创建人id',
  `creat_by` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '创建人',
  `is_show` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否在前端展示0不展示1展示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '案例主题表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_additional_requirement`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '额外需求名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '额外需求表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_age_groups`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `age_group` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '年龄段',
  `display_name` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '年龄段展示',
  `min_age` tinyint(4) NULL DEFAULT NULL COMMENT '年龄段对应的最小年龄',
  `max_age` tinyint(4) NULL DEFAULT NULL COMMENT '年龄段对应的最大年龄',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '显示顺序',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '年龄段管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_age_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '年龄层显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `display_name_for_user` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '用户信息有关的年龄层显示名称',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '年龄层分级表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_appeal_lease_term_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '需求的计价单位',
  `name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '需求计价单位的标识',
  `time` int(11) NOT NULL DEFAULT 0 COMMENT '使用次数',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '需求年龄层管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_brands`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名称',
  `image` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '封面图url',
  `status` tinyint(4) NOT NULL COMMENT '品牌状态:默认0待处理,1已通过,2已拒绝',
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '品牌类型：1买家品牌、2供应商品牌、3服务商品牌',
  `created_by` int(11) NOT NULL COMMENT '创建人id',
  `updated_by` int(11) NOT NULL COMMENT '修改人id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '品牌表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_career_backgrounds`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `career_background` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '职业背景',
  `display_name` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '职业背景展示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '显示顺序',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '职业背景管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_cases_imgs`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `source` tinyint(4) NULL DEFAULT NULL COMMENT '来源 :1-第三方',
  `field_order_item_id` int(11) NULL DEFAULT NULL COMMENT '订单id,见表field_order_items',
  `industry_id` int(11) NULL DEFAULT NULL COMMENT '行业id,见表industries',
  `purchaser_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '关联买家',
  `purchaser_id` int(11) NULL DEFAULT NULL COMMENT '关联买家id',
  `first_industry_id` int(11) NOT NULL DEFAULT 0 COMMENT '一级行业id',
  `second_industry_id` int(11) NOT NULL DEFAULT 0 COMMENT '二级行业id',
  `physical_resources_name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '关联展位name',
  `physical_resources_id` int(11) NULL DEFAULT NULL COMMENT '关联展位id',
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '图片name',
  `url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '图片URL地址',
  `theme_id` int(11) NULL DEFAULT NULL COMMENT '主题id',
  `is_show` int(11) NOT NULL COMMENT '前端是否显示 1：显示，0：不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `theme_id`(`theme_id`) USING BTREE,
  INDEX `purchaser_id`(`purchaser_id`) USING BTREE,
  INDEX `physical_resources_id`(`physical_resources_id`) USING BTREE,
  INDEX `idx_field_order_item`(`field_order_item_id`) USING BTREE,
  INDEX `idx_industry`(`industry_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '案例图片库表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_college_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `college_type` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '院校类别',
  `display_name` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '院校类别展示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '显示顺序',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '院校分类管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_community_attributes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `community_id` int(11) NOT NULL COMMENT '场地id',
  `attribute_id` int(11) NOT NULL COMMENT '类目属性id',
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '类目属性值的名称',
  `mark` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `option_id` int(11) NULL DEFAULT NULL COMMENT '属性值ID',
  `type` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否单选 1/单选 2/多选 3/单行文本 4/多行文本',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `attribute_index`(`community_id`, `attribute_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_community_career_backgrounds`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `community_id` int(20) NOT NULL COMMENT '场地id，见m_community_resources',
  `career_background_id` tinyint(4) NOT NULL COMMENT '职业背景id，见m_career_backgrounds',
  `proportion` tinyint(4) NOT NULL COMMENT '职业所占比例(单位：1%)',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地职业背景管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_community_resource_ages`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `community_id` int(11) NOT NULL COMMENT '场地id，见m_community_resources',
  `age_group_id` int(11) NOT NULL COMMENT '年龄段id，见m_age_groups',
  `proportion` tinyint(4) NOT NULL COMMENT '年龄段所占比例(单位：1%)',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地年龄段管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_community_resource_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `community_id` int(20) NOT NULL COMMENT '场地id，见m_community_resources',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `seq` tinyint(4) NULL DEFAULT 0 COMMENT '图片显示顺序',
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '场地图片类型 1：图片 2：附件 3：视频',
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '标题',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_communityid`(`community_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地图片管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_community_resource_labels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `community_id` int(11) NOT NULL COMMENT '场地id，见m_community_resources',
  `label_id` int(11) NOT NULL COMMENT '标签id，见m_label',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_cc`(`community_id`) USING BTREE,
  INDEX `idx_label`(`label_id`, `community_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地标签管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_community_resources`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '小区名称',
  `detailed_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '地址',
  `rent` int(11) NULL DEFAULT NULL COMMENT '租金，单位:分',
  `build_year` year NULL DEFAULT NULL COMMENT '建筑年代',
  `property_costs` int(11) NULL DEFAULT NULL COMMENT '物业费，单位:分',
  `occupancy_rate` int(11) NOT NULL DEFAULT 0 COMMENT '入住率，单位:1%(0表示未知)',
  `number_of_households` int(11) NULL DEFAULT NULL COMMENT '户数',
  `number_of_enterprises` int(11) NULL DEFAULT NULL COMMENT '企业数',
  `house_price` int(11) NULL DEFAULT NULL COMMENT '房价',
  `province_id` int(11) NOT NULL COMMENT '省份ID',
  `city_id` int(11) NOT NULL COMMENT '城市ID',
  `district_id` int(11) NULL DEFAULT NULL COMMENT '区id',
  `lng` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '经度',
  `lat` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '纬度',
  `precise` int(11) NULL DEFAULT NULL COMMENT '位置的附加信息，是否精确查找。1为精确查找，即准确打点；0为不精确，即模糊打点。',
  `confidence` int(11) NULL DEFAULT NULL COMMENT '可信度，描述打点准确度',
  `created_by` int(11) NOT NULL DEFAULT 1 COMMENT '创建者ID',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `building_area` decimal(16, 2) NULL DEFAULT NULL COMMENT '占地面积',
  `trading_area_id` int(11) NULL DEFAULT NULL COMMENT '商圈ID',
  `enterprise_type_id` int(11) NULL DEFAULT NULL COMMENT '企业类型。参见：m_enterprise_types',
  `total_number_of_people` int(11) NULL DEFAULT NULL COMMENT '社区总人数',
  `has_carport` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否提供车位',
  `charging_standard` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '车位收费标准',
  `enterprises` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '代表企业',
  `construction_class_id` int(11) NULL DEFAULT NULL COMMENT '等级(建筑标准等级)',
  `supermarket_type_id` int(11) NULL DEFAULT NULL COMMENT '超市定位,见m_supermarket_types表',
  `shopping_mall_type_id` int(11) NULL DEFAULT NULL COMMENT '商场定位,见m_shopping_mall_types表',
  `house_attribute_id` int(11) NULL DEFAULT NULL COMMENT '住宅属性',
  `average_fare` decimal(16, 2) NULL DEFAULT NULL COMMENT '平均票价(单位：元)',
  `restaurant` int(1) NULL DEFAULT NULL COMMENT '是否有配套餐厅:1代表有,0代表没有,null代表未录入',
  `number_of_seat` int(11) NULL DEFAULT NULL COMMENT '座位数',
  `facilities` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '配套设施',
  `total_floor` tinyint(4) NULL DEFAULT NULL COMMENT '总楼层',
  `description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '场地描述',
  `owned_property` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '场地所属物业',
  `male_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '男性所占比例(单位：1%)',
  `unmarried_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '未婚所占比例(单位：1%)',
  `married_unpregnant_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '已婚未育所占比例(单位：1%)',
  `married_pregnant_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '已婚已育所占比例(单位：1%)',
  `undergraduate_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '本科所占比例(单位：1%)',
  `graduate_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '研究生所占比例(单位：1%)',
  `specialty_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '专科所占比例(单位：1%)',
  `private_car_proportion` tinyint(4) NULL DEFAULT NULL COMMENT '私家车所占比例(单位：1%)',
  `theater_scale_id` int(11) NULL DEFAULT NULL COMMENT '影院规模id（见m_theater_scales表）',
  `college_type_id` int(11) NULL DEFAULT NULL COMMENT '院校分类id（见m_college_types表）',
  `developer_id` int(11) NULL DEFAULT NULL COMMENT '开发商，见m_developers表',
  `weekly_orders` int(11) NOT NULL DEFAULT 0 COMMENT '七天的单量',
  `weekly_periods` int(11) NOT NULL DEFAULT 0 COMMENT '七天的场地量',
  `order_quantity` int(11) NOT NULL DEFAULT 0 COMMENT '订单量',
  `floor_price` int(11) NOT NULL DEFAULT 0 COMMENT '场地对应所有供应商的最低价格(单位：分)',
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'approved' COMMENT '场地状态(上架:approved/下架:canceled)',
  `weight_score` decimal(11, 8) NOT NULL DEFAULT 0.00000000 COMMENT '权重得分',
  `is_initial` tinyint(4) NOT NULL DEFAULT 0 COMMENT 'weight_score是否为使用初始值(0:不使用,1:使用)',
  `category_id` int(11) NOT NULL,
  `max_price` int(11) NOT NULL DEFAULT 0 COMMENT '场地对应所有供应商的最高价格(减去了补贴后的)(单位：分)',
  `updated_by` int(11) NULL DEFAULT NULL COMMENT '场地信息更新者',
  `pc_description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT 'PC 图文详情',
  `app_description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT 'APP 图文详情',
  `panorama` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '全景图链接',
  `is_potential` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否是意向场地:0不是1是',
  `top_id` int(11) NULL DEFAULT NULL COMMENT '淘宝开放平台中场地所属的ID',
  `paid_order_quantity` int(11) NOT NULL DEFAULT 0 COMMENT '实际付款订单量',
  `order_count` int(11) NOT NULL DEFAULT 0 COMMENT '下单量',
  `manager` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '管理方名称',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '负责人ID：关联users.id',
  `is_head_office` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否总部  0：否   1：是',
  `has_store` tinyint(4) NOT NULL DEFAULT 0 COMMENT '场地信息是否完善 0：未完善  1：已完善',
  `online_status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '上线状态 0：初始状态 1：申请上线（待审核）2：已上线 3：已拒绝',
  `online_time` datetime(0) NULL DEFAULT NULL COMMENT '上线时间',
  `is_target_advantage` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否目标优势场地 0：否 1：是',
  `been_advantage_at` datetime(0) NULL DEFAULT NULL COMMENT '成为优势场地时间',
  `price_advantage` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否价格优势 0：否 1：是',
  `community_advantage` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否场地优势 0：否 1：是',
  `exclusive_advantage` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否独家优势 0：否 1：是',
  `is_backend_show` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否在后台场地管理列表显示 0：否 1：是',
  `last_order_time` datetime(0) NULL DEFAULT NULL COMMENT '最近下单时间',
  `recorded_at` timestamp(0) NULL DEFAULT NULL COMMENT '最近跟进时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `m_community_resources_category_id_index`(`category_id`) USING BTREE,
  INDEX `idx_cb`(`created_by`) USING BTREE,
  INDEX `idx_follower`(`followed_by`, `deleted_at`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '社区表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_community_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '社区类型显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `sequence` int(11) NOT NULL DEFAULT 0 COMMENT '排序字段',
  `amap_poitypes` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '高德POI类型映射',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '社区类型表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_construction_classes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '建筑等级显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '建筑等级' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_consumption_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '消费水平显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向买家ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '消费水平分级表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_contraband`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '禁摆品类显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '禁摆品类' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_contract_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT NULL COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '合同类型管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_custom_dimensions`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '自定义规格显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '常用自定义规格' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_departments`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `parent_id` int(11) NULL DEFAULT NULL,
  `managed_by` int(11) NULL DEFAULT NULL COMMENT '部门主管',
  `permissions` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门权限',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `city_ids` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '部门所管辖的城市,以逗号隔开,NULL为全部',
  `department_id` int(11) NULL DEFAULT NULL,
  `sub_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '部门下的所有子部门id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '部门表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_developers`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '开发商展示名称',
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '排序',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '开发商管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_enterprise_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '企业类型显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '企业类型' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_field_cooperation_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '场地合作方式显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '推广形式（收益方）管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_house_attributes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT NULL COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '房屋属性管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_label`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '名字',
  `display_name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '显示名字',
  `is_visible` tinyint(4) NOT NULL DEFAULT 1 COMMENT '前端用户是否可见',
  `seq` int(11) NULL DEFAULT NULL COMMENT '排序',
  `type` tinyint(4) NULL DEFAULT NULL COMMENT '标签库类型:1场地标签库;2展位标签库;3用户标签库;4案例库;5服务商库;6活动库;7场地库;8广告库',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `origin_label_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '原标签id(便于迁移数据)',
  `created_by` int(11) NOT NULL DEFAULT 0 COMMENT '创建人id',
  `category_id` int(11) NOT NULL DEFAULT 0 COMMENT '标签分类id',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `unique_type_name`(`type`, `name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '标签库管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_label_361`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '显示名字(别名)',
  `is_visible` tinyint(4) NOT NULL DEFAULT 1 COMMENT '前端用户是否可见',
  `seq` int(11) NULL DEFAULT NULL COMMENT '排序',
  `type` tinyint(4) NULL DEFAULT NULL COMMENT '标签库类型:1场地标签库;2展位标签库;3用户标签库;4案例库;5服务商库;6活动库;7场地库;8广告库',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `origin_label_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '原标签id(便于迁移数据)',
  `created_by` int(11) NOT NULL DEFAULT 0 COMMENT '创建人id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '标签库管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_label_categories`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '分类名字',
  `type` tinyint(4) NOT NULL COMMENT '1场地标签库;2展位标签库;3用户标签库;4案例库;5服务商库;6活动库;7场地库;8广告库',
  `created_by` int(11) NOT NULL DEFAULT 0 COMMENT '创建人id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `unique_type_name`(`type`, `name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_label_city`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `label_id` int(11) NOT NULL DEFAULT 0 COMMENT '标签id',
  `city_id` int(11) NOT NULL DEFAULT 0 COMMENT '城市id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_label_id`(`label_id`) USING BTREE,
  INDEX `idx_city_id`(`city_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '标签-城市中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_lease_term_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '租期显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `period` int(11) NULL DEFAULT 1 COMMENT '周期：该时间单位代表的实际天数',
  `display_name_for_group` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '分类标识',
  `name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '计价标识',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '租期类型表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_materiel_cover`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '类型:1-物料覆盖(邻汇物料) 2-物料类型(商家物料)',
  `image` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '物料icon地址',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '场地物料覆盖标签管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_membership_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '会员等级显示名称',
  `minimum_growth_value` int(11) NULL DEFAULT NULL COMMENT '对应会员等级最小成长值',
  `maximum_growth_value` int(11) NULL DEFAULT NULL COMMENT '对应会员等级最大成长值',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `membership_level` tinyint(4) NOT NULL COMMENT '会员等级',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户会员等级表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_other_categories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '列表筛选项对应的key',
  `display_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '展示名',
  `value` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '列表筛选项对应的value',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '其他分类管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_outsourcing_projects`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '外包项目名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '外包项目表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_participation_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '参与度等级显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户参与度分级表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_payment_methods`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '支付方式',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '支付方式管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_peak_times`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '高分时间段显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '高峰时间段' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_promotion_modes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT NULL COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '推广形式管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_promotion_purposes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `is_visible` int(1) NULL DEFAULT 1 COMMENT '是否显示：1代表显示，2代表不显示',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '推广目的管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_pushing_frequency_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '地推频率显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '地推频率分级表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_relation`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '物业关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_requirements`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '物业要求显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '常用物业要求表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_shopping_mall_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商场类型显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '超市类型' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_supermarket_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '超市类型显示名称',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '超市类型' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`m_theater_scales`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `theater_scale` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '影院规模',
  `display_name` varchar(36) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '影院规模展示',
  `min_seats` int(11) NULL DEFAULT NULL COMMENT '对应的最小座位数',
  `max_seats` int(11) NULL DEFAULT NULL COMMENT '对应的最大座位数',
  `min_halls` int(11) NULL DEFAULT NULL COMMENT '对应的最小展厅数',
  `max_halls` int(11) NULL DEFAULT NULL COMMENT '对应的最大展厅数',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '显示顺序',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '影院规模管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`message_field_type`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_type_id` int(11) NOT NULL COMMENT '场地类型id',
  `message_pushing_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联消息推送message_pushings表的ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`message_industry`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `industry_id` int(11) NOT NULL COMMENT '行业id',
  `message_pushing_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联消息推送message_pushings表的ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '营销消息关联行业信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`message_mobiles`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `mobile` char(11) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '推送手机号',
  `message_pushing_id` int(11) NOT NULL DEFAULT 0 COMMENT '推送信息id对应表:message_pushings',
  `created_at` datetime(0) NULL DEFAULT NULL,
  `updated_at` datetime(0) NULL DEFAULT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `email` varchar(125) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '邮箱',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '推送信息为导入用户时,保存手机号到这个表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`message_notices`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL DEFAULT 0 COMMENT '对应用户id',
  `title` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '弹窗标题',
  `image` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '首页弹窗图片',
  `url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '首页弹窗链接地址',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'APP对应用户首页弹窗信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`message_pushings`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键id',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `type` tinyint(1) NULL DEFAULT NULL COMMENT '推送类型 1代表短信推送 2代表消息推送 3邮箱推送',
  `push_range` tinyint(4) NULL DEFAULT NULL COMMENT '推送范围选项1:根据已注册用户筛选,2:自定义导入用户名单,3:全部设备,0:未选择',
  `title` varchar(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '消息标题',
  `content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '消息内容(短信保存模板id)',
  `tpl_id` int(11) NULL DEFAULT NULL COMMENT '云片模板id',
  `message_style` tinyint(4) NULL DEFAULT NULL COMMENT '消息形式1代表首页弹窗2代表消息中心0没选',
  `message_type` tinyint(4) NULL DEFAULT NULL COMMENT '消息类型1代表场地推荐,2代表平台营销,3代表市场营销',
  `link` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '消息链接',
  `mobile` char(11) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '预览手机号',
  `pushing_time_at` datetime(0) NOT NULL COMMENT '推送时间',
  `image` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '消息封面',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `status` tinyint(1) NOT NULL DEFAULT 0 COMMENT '默认0未推送1已推送2推送中',
  `import_file_url` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '导入的用户文件保存在本地的地址',
  `push_total_num` int(11) NOT NULL DEFAULT 0 COMMENT '推送的总用户数',
  `push_already_reg_num` int(11) NOT NULL DEFAULT 0 COMMENT '推送中注册的用户数,前台显示的有效用户数=这个字段除以push_total_num',
  `fail_num` int(11) NOT NULL DEFAULT 0 COMMENT '推送时失败的数量(页面没用到,记录一下)',
  `import_file_name` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '导入文件的名称',
  `push_open_link_num` int(11) NOT NULL COMMENT '打开消息链接数',
  `push_sent_count_num` int(11) NOT NULL COMMENT '消息实际发送数',
  `push_dismiss_count_num` int(11) NOT NULL COMMENT '消息忽略数',
  `iOS_task_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '友盟任务iOS消息id',
  `android_task_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '友盟任务android消息id',
  `user_group_id` int(11) NULL DEFAULT NULL COMMENT '用户分组ID,见user_groups',
  `email` varchar(125) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '预演邮箱',
  `attachments` varchar(1000) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '邮件附件json数组',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '营销消息及短信表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`message_resources`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `message_id` int(11) NOT NULL COMMENT '用户通知信息id',
  `res_id` int(11) NOT NULL COMMENT '资源id',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户通知信息关联场地' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`messages`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_by` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '创建者用户ID',
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '姓名',
  `mobile` varchar(12) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '手机',
  `email` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '邮箱',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户通知信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`migrations`  (
  `migration` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `batch` int(11) NOT NULL
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_unicode_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`model_has_permissions`  (
  `permission_id` int(11) NOT NULL,
  `model_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `model_id` bigint(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`permission_id`, `model_id`, `model_type`) USING BTREE,
  INDEX `model_has_permissions_model_id_model_type_index`(`model_id`, `model_type`) USING BTREE,
  CONSTRAINT `model_has_permissions_permission_id_foreign` FOREIGN KEY (`permission_id`) REFERENCES `linhui_test`.`abilities` (`id`) ON DELETE CASCADE ON UPDATE RESTRICT
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`model_has_roles`  (
  `role_id` int(10) UNSIGNED NOT NULL,
  `model_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `model_id` bigint(20) UNSIGNED NOT NULL,
  PRIMARY KEY (`role_id`, `model_id`, `model_type`) USING BTREE,
  INDEX `model_has_roles_model_id_model_type_index`(`model_id`, `model_type`) USING BTREE,
  CONSTRAINT `model_has_roles_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `linhui_test`.`linhui_roles` (`id`) ON DELETE CASCADE ON UPDATE RESTRICT
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`monthly_statistic`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `on_sale_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '在售场地数',
  `signed_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '签约场地数',
  `new_signed_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增签约场地数',
  `shared_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '分成场地数',
  `new_shared_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增分成场地数',
  `registered_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '注册场地数',
  `new_registered_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增注册场地数',
  `new_community_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增场地数',
  `signed_physical_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '签约展位数',
  `new_signed_physical_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增签约展位数',
  `shared_physical_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '分成展位数',
  `new_shared_physical_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增分成展位数',
  `registered_physical_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '注册展位数',
  `new_registered_physical_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增注册展位数',
  `new_physical_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增展位数',
  `on_sale_selling_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '在售供给数',
  `shared_selling_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '分成供给数',
  `new_shared_selling_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增分成供给数',
  `registered_selling_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '注册供给数',
  `new_registered_selling_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增注册供给数',
  `new_selling_resource_count` int(11) NOT NULL DEFAULT 0 COMMENT '新增供给数',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `on_sale_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存在售场地的id和类型的JSON',
  `signed_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存签约场地的id和类型的JSON',
  `new_signed_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增签约场地的id和类型的JSON',
  `shared_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存分成场地的id和类型的JSON',
  `new_shared_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增分成场的id和类型的JSON',
  `registered_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存注册场地的id和类型的JSON',
  `new_registered_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增注册场地的id和类型的JSON',
  `new_community_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增场地的id和类型的JSON',
  `signed_physical_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存签约展位的id和类型的JSON',
  `new_signed_physical_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增签约展位的id和类型的JSON',
  `shared_physical_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存分成展位的id和类型的JSON',
  `new_shared_physical_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增分成展位的id和类型的JSON',
  `registered_physical_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存注册展位的id和类型的JSON',
  `new_registered_physical_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增注册展位数的id和类型的JSON',
  `new_physical_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增展位的id和类型的JSON',
  `on_sale_selling_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存在售供给的id和类型的JSON',
  `shared_selling_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存在售场分成供给的id和类型的JSON',
  `new_shared_selling_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增分成供给的id和类型的JSON',
  `registered_selling_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存注册供给的id和类型的JSON',
  `new_registered_selling_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增注册供给的id和类型的JSON',
  `new_selling_resource_data` mediumtext CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '保存新增供给的id和类型的JSON',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `monthly_statistic_created_at_index`(`created_at`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`navigation_bars`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '名称',
  `data` varchar(20000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '该分类对应的内容',
  `plate` tinyint(4) NOT NULL DEFAULT 0 COMMENT '所属板块（1:导航栏配置，2:场地推荐区块配置）',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '导航栏管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`notices`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(28) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '公告标题',
  `content` varchar(84) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '公告内容',
  `publish_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) COMMENT '公告发布时间',
  `deadline` datetime(0) NOT NULL COMMENT '公告截止时间',
  `url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '公告详情链接地址',
  `count` int(11) NOT NULL DEFAULT 1 COMMENT '公告显示次数',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '公告表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`notifications`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_app_id` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat_app_secret` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `template` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `from` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `to` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `params` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`offline_transactions`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `out_trade_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '第三方支付商户订单号',
  `amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '金额（单位：元，精确到分）',
  `paid_at` datetime(0) NULL DEFAULT NULL COMMENT '支付时间',
  `pay_type` tinyint(4) NOT NULL DEFAULT -1 COMMENT '支付方式(-1:表示订单还未发起支付,方式未知 0:线下支付 1：微信app支付 2:微信公众号支付 3:微信原生扫码支付 4:邻汇钱包支付 5:微信小程序支付 6:5w微信app支付 7:微信H5支付 8:支付宝PC端网页支付,9:支付宝手机网页支付,10:支付宝APP支付)',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '付款人第三方平台用户名',
  `avatar` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '付款人第三方平台头像URL',
  `wechat_openid` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '微信openid',
  `alipay_buyer_logon_id` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '买家支付宝账号',
  `alipay_buyer_id` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '买家支付宝用户号',
  `settle_status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT 'submitted' COMMENT '线下交易订单结算状态(submitted:待结算 paid:已结算)',
  `settled_at` datetime(0) NULL DEFAULT NULL COMMENT '财务结算订单时间',
  `discount_rate` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '结算分成比例(默认0:0%)',
  `settled_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '结算金额（单位：元，精确到分）',
  `pay_mode` int(11) NOT NULL COMMENT '支付方式  1.现金；2.银行卡；3.微信；4.支付宝；5.对公转账',
  `account` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '收款账号',
  `bank` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开户银行',
  `account_owner` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '账号开人',
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系电话',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `transfer_certificate` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '转账证明(图片地址)',
  `is_read` int(1) NULL DEFAULT 0 COMMENT '是否已读',
  `settled_by` int(11) NULL DEFAULT NULL COMMENT '财务结算人员',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '商家编号',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '线下交易记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`operate_reports`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL DEFAULT 0 COMMENT '关联用户ID',
  `report_name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '报表名称',
  `condition` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '筛选条件(json数组格式)',
  `report_field` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '报表筛选查看的字段',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`operations`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `uri` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`order_additional_expenses`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `order_item_id` int(11) NOT NULL COMMENT '子订单id：关联field_order_items.id',
  `created_by` int(11) NOT NULL COMMENT '创建人id：关联users.id',
  `status` tinyint(1) NOT NULL DEFAULT 0 COMMENT '状态 0：待处理  1：已收款/退款 2：已拒绝 3：待财务处理',
  `amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '金额：单位元',
  `type` tinyint(1) NOT NULL COMMENT '变动类型  1：下单商家信息 2：供应商信息',
  `pay_type` tinyint(1) NOT NULL COMMENT '支付类型 1：商家支付 2：邻汇退款 3：物业退款 4：邻汇付款',
  `account_owner` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款人',
  `pay_method` tinyint(1) NULL DEFAULT NULL COMMENT '支付方式：关联m_payment_methods.id',
  `bank` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开户行',
  `account` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款账户',
  `deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '押金：单位元',
  `expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '成本：单位元',
  `other_expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '他项支出费用：单位元',
  `special_expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '特殊报批费用：单位元',
  `extra_expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '额外成本：单位元',
  `payment_subject` tinyint(1) NULL DEFAULT NULL COMMENT '付款主体(1.杭州邻汇 2.上海趣推 3.深圳邻汇 4.杭州万一 5.杭州海瀛)',
  `remark` varchar(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  `voucher` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '付款凭证',
  `receivable_information` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '额外收款信息',
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_order_item`(`order_item_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`order_invoices`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `order_item_id` int(11) NOT NULL COMMENT '子订单id：关联field_order_items.id',
  `invoice_id` int(11) NOT NULL COMMENT '发票id：关联invoices.id',
  `invoice_amount` int(11) NOT NULL DEFAULT 0 COMMENT '开票金额：单位分',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`order_item_property_invoices`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL COMMENT '子订单ID 关联field_order_items.id',
  `property_invoice_id` int(11) NOT NULL COMMENT '物业发票ID 关联property_invoices.id',
  `amount` decimal(8, 2) NOT NULL COMMENT '开票总额',
  `price` decimal(8, 2) NOT NULL COMMENT '开票单价',
  `tax` decimal(8, 2) NULL DEFAULT NULL COMMENT '开票税额',
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '订单title',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `property_invoice_batch_id` int(11) NOT NULL COMMENT '物业开票的ID,表property_invoice_batch',
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `property_ticket_id` int(11) NOT NULL DEFAULT 0 COMMENT '邻汇待收票ID,property_tickets.id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_invoice_batch`(`property_invoice_batch_id`) USING BTREE,
  INDEX `idx_field_order`(`field_order_item_id`) USING BTREE,
  INDEX `idx_property_ticket`(`property_ticket_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`order_price_histories`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `order_item_id` int(20) NOT NULL COMMENT '订单ID',
  `original_price` int(11) NOT NULL COMMENT '原价',
  `revised_price` int(11) NOT NULL COMMENT '修改后的价格',
  `created_by` int(11) NOT NULL COMMENT '修改人',
  `modify_reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '备注/变动原因',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `column_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '改价明细',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '订单价格变更记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`order_relation_contracts`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `order_item_id` int(11) NOT NULL COMMENT '订单行id',
  `contract_id` int(11) NOT NULL COMMENT '合同id (contracts)',
  `contract_type` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '合同类型: contractSup/供应商合同 contractPur/买家合同 contractNor/其它合同',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`order_review_tag_map`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tag_id` int(11) NOT NULL COMMENT '标签ID',
  `order_review_id` int(11) NOT NULL COMMENT '订单评价ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '评价标签映射表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`order_statistics`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `order_item_id` int(11) NOT NULL COMMENT '子订单ID',
  `resource_price` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '场地售价',
  `resource_expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '成本支出',
  `service_price` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '服务费',
  `subsidy_price` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '补贴',
  `other_expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '他项报批费',
  `special_expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '特殊报批费',
  `sales_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '销售额',
  `gross_profit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '毛利',
  `is_city_protected` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否城市保护期内 1：是 0：否',
  `is_owner_property` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否自营 1：是 0：否',
  `date` date NOT NULL COMMENT '日期（订单审核日期）',
  `business_user_id` int(11) NULL DEFAULT NULL COMMENT '商拓用户ID：关联users.id',
  `business_depart_id` int(11) NULL DEFAULT NULL COMMENT '商拓部门ID：关联m_departments.id',
  `business_root_depart_id` int(11) NULL DEFAULT NULL COMMENT '商拓父级部门ID：关联m_departments.id',
  `is_business_pro` tinyint(1) NOT NULL DEFAULT 0 COMMENT '商拓是否保护期内 1：是 0：否',
  `field_user_id` int(11) NULL DEFAULT NULL COMMENT '资拓用户ID：关联users.id',
  `field_depart_id` int(11) NULL DEFAULT NULL COMMENT '资拓部门ID：关联m_departments.id',
  `field_root_depart_id` int(11) NULL DEFAULT NULL COMMENT '资拓父级部门ID：关联m_departments.id',
  `is_field_pro` tinyint(1) NOT NULL DEFAULT 0 COMMENT '资拓是否保护期内 1：是 0：否',
  `city_id` int(11) NOT NULL COMMENT '城市ID：关联cities.id',
  `business_city_id` int(11) NULL DEFAULT NULL COMMENT '商拓所在城市ID：关联cities.id',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '订单跟进人 关联users.id',
  `approved_by` int(11) NOT NULL COMMENT '订单审核人 关联users.id',
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'approved' COMMENT '订单状态（approved：成交订单 canceled：取消订单）',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `business_position_id` int(11) NULL DEFAULT NULL COMMENT '商拓所在岗位ID（关联 positions.id）',
  `field_position_id` int(11) NULL DEFAULT NULL COMMENT '资拓所在岗位ID（关联 positions.id）',
  `user_id` int(11) NOT NULL COMMENT '订单下单用户ID（关联 users.id）',
  `external_expense` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '额外成本',
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '供给ID（关联selling_resources.id）',
  `physical_resource_id` int(11) NULL DEFAULT NULL COMMENT '展位ID（关联physical_resources.id）',
  `community_resource_id` int(11) NULL DEFAULT NULL COMMENT '场地ID（关联m_community_resources.id）',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `date_city_index`(`date`, `city_id`) USING BTREE,
  INDEX `date_department_index`(`date`, `business_depart_id`) USING BTREE,
  INDEX `date_user_index`(`date`, `business_user_id`) USING BTREE,
  INDEX `idx_selling_resource`(`selling_resource_id`) USING BTREE,
  INDEX `idx_physical_resource`(`physical_resource_id`) USING BTREE,
  INDEX `idx_community_resource`(`community_resource_id`) USING BTREE,
  INDEX `idx_user`(`user_id`, `date`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '订单报表统计备份表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`organization_levels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '组织层级表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`password_resets`  (
  `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `token` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `created_at` timestamp(0) NOT NULL DEFAULT '0000-00-00 00:00:00',
  INDEX `password_resets_email_index`(`email`) USING BTREE,
  INDEX `password_resets_token_index`(`token`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_unicode_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`physical_resource_contraband`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `physical_resource_id` int(11) NOT NULL COMMENT '物理资源ID',
  `contraband_id` int(11) NOT NULL COMMENT '禁摆品类ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_physical_resource_id`(`physical_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '物理资源和禁摆品类关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`physical_resource_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `physical_resource_id` int(20) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `seq` int(11) NULL DEFAULT 0 COMMENT '图片显示顺序',
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '展位图片链接类型 1：图片 2：视频',
  `top_image_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `origin_pic_url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '展位图片原图',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_physicalresourceid_deletedat_seq`(`physical_resource_id`, `seq`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '物理资源对应图片表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`physical_resource_labels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `physical_resource_id` int(11) NOT NULL COMMENT '展位id，见physical_resources',
  `label_id` int(11) NOT NULL COMMENT '标签id，见m_label',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_physicalresourceid`(`physical_resource_id`) USING BTREE,
  INDEX `idx_label`(`label_id`, `physical_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '展位标签管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`physical_resource_requirement`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `physical_resource_id` int(11) NOT NULL COMMENT '物理资源ID',
  `requirement_id` int(11) NOT NULL COMMENT '物业要求ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_physical_resource_id`(`physical_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '物理资源和物业要求关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`physical_resource_schemes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `physical_resource_id` int(11) NOT NULL COMMENT '展位ID 关联physical_resources.id',
  `title` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标题',
  `source` tinyint(1) NOT NULL DEFAULT 1 COMMENT '方案来源 1：甲方  2：渠道',
  `contact_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关联联系人id，多个联系人用，隔开',
  `order_item_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关联订单id，多个订单用，隔开',
  `city_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关联城市id，多个城市用，隔开',
  `category_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '场地类型id，多个类目用，隔开',
  `industry_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关联行业id，多个行业用，隔开',
  `spread_way_ids` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关联推广形式id，多个用，隔开',
  `purpose_ids` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关联推广目的id，多个用，隔开',
  `brand_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关联品牌id，多个用，隔开',
  `budget` decimal(16, 2) NULL DEFAULT NULL COMMENT '预算（单位：元）',
  `is_landed` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否落地 0：否  1：是',
  `images` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '文件地址，多个文件用，隔开',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_physical_resource`(`physical_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`physical_resource_sizes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `physical_resource_id` int(11) NOT NULL COMMENT '物理资源ID',
  `size` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '物理资源对应的规格',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_physical_resource_id`(`physical_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '物理资源规格表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`physical_resources`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_by` int(11) NOT NULL COMMENT '创建物理资源的用户ID',
  `res_type_id` int(2) NULL DEFAULT 1 COMMENT '资源类型：如场地、广告',
  `community_id` int(11) NULL DEFAULT NULL COMMENT '物理资源所在社区社区,见m_community_resources表',
  `indoor` tinyint(4) NULL DEFAULT NULL COMMENT '是否在室内(0表示室外，1表示室内，默认值NULL表示未录入)',
  `doLocation` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '摆摊位置',
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '场地名称',
  `field_type_id` int(11) NULL DEFAULT NULL COMMENT '场地类型(见field_types表)',
  `ad_type_id` int(2) NULL DEFAULT NULL COMMENT '广告类型：如电梯，公告栏(见ad_types表)',
  `description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '展位描述',
  `total_area` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '场地总面积(单位:米,精确到小数点后两位)',
  `doBegin` time(0) NULL DEFAULT NULL COMMENT '摆摊起始时间（格式09:00:00）',
  `doFinish` time(0) NULL DEFAULT NULL COMMENT '摆摊截止时间（格式18:00:00）',
  `peak_time_id` int(11) NULL DEFAULT NULL COMMENT '人流量高峰时间段,见m_peak_times表',
  `number_of_people` int(11) NULL DEFAULT NULL COMMENT '人流量',
  `facade` int(11) NULL DEFAULT NULL COMMENT '展示方向(1面、2面、3面、4面)',
  `participation_level_id` int(11) NULL DEFAULT 1 COMMENT '用户参与度等级,见m_participation_levels表',
  `male_proportion` int(11) NULL DEFAULT NULL COMMENT '男性占比(单位：1%)',
  `age_level_id` int(11) NULL DEFAULT 1 COMMENT '年龄水平,见m_age_levels表',
  `consumption_level_id` int(11) NULL DEFAULT 1 COMMENT '消费水平,见m_consumption_levels表',
  `company_comment` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '邻汇测评',
  `number_of_order` int(11) NOT NULL DEFAULT 0 COMMENT '订单量',
  `count_of_reviews` int(11) NOT NULL DEFAULT 0 COMMENT '用户评价数',
  `average_score` decimal(16, 1) NULL DEFAULT NULL COMMENT '用户评价的综合平均分(5分制)',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `administrators_score` int(11) NOT NULL DEFAULT 0 COMMENT '后台管理员场地评分',
  `average_visitorsflowrate_score` decimal(16, 2) NULL DEFAULT NULL COMMENT '用户评价的人流量平均分(5分制)',
  `average_userparticipation_score` tinyint(4) NULL DEFAULT NULL COMMENT '用户评价的用户参与度平均分(5分制)',
  `average_propertymatching_score` decimal(16, 2) NULL DEFAULT NULL COMMENT '用户评价的用户参与度平均分(5分制)',
  `average_goalcompletion_score` decimal(16, 2) NULL DEFAULT NULL COMMENT '用户评价的用户参与度平均分(5分制)',
  `sale` decimal(16, 2) NULL DEFAULT NULL COMMENT '销售额(单位：分)',
  `property_requirement` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '其他物业要求',
  `sales_volume` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '其他历史单量',
  `number_of_company` int(11) NULL DEFAULT NULL COMMENT '企业数',
  `other_contraband` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '其他禁摆品类',
  `number_of_follower` int(11) NULL DEFAULT NULL COMMENT '关注人数',
  `number_of_download` int(11) NULL DEFAULT NULL COMMENT 'APP下载量',
  `number_of_registered_users` int(11) NULL DEFAULT NULL COMMENT '注册用户量',
  `browse_times` int(11) NOT NULL DEFAULT 0 COMMENT '资源详情浏览次数',
  `approve_at` datetime(0) NULL DEFAULT NULL COMMENT '展位上架时间',
  `cancel_at` datetime(0) NULL DEFAULT NULL COMMENT '展位下架时间',
  `the_objection` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '下架理由',
  `erection_height` decimal(16, 2) NULL DEFAULT NULL COMMENT '可搭建高度（单位：m）',
  `is_activity` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否为活动展位(0:不使用,1:使用)',
  `full_name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '展位全称字段(供搜索使用)',
  `updated_by` int(11) NULL DEFAULT NULL COMMENT '展位信息更新者',
  `location_type_id` int(11) NULL DEFAULT NULL COMMENT '展位位置类型，见location_types表',
  `other_location_type` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '其他展位位置类型',
  `weight_score` mediumint(9) NOT NULL DEFAULT 0 COMMENT '排序用的权重分',
  `custom_weight_score` mediumint(9) NOT NULL DEFAULT 0 COMMENT '用戶自定义权重分',
  `system_weight_score` mediumint(9) NOT NULL DEFAULT 0 COMMENT '系统权重分',
  `weight_score_switch` tinyint(4) NOT NULL DEFAULT 0 COMMENT '权重分排序开关 0：系统权重分 1：自定义权重分',
  `pc_description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT 'PC 图文详情',
  `app_description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT 'APP 图文详情',
  `least_price` int(11) NOT NULL DEFAULT 0 COMMENT '对应供给最低价（单位：分）',
  `icon_id` int(11) NULL DEFAULT NULL COMMENT '图标id：关联 icons 表',
  `panorama` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '全景图链接',
  `longitude` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '展位所在经度',
  `latitude` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '展位所在纬度',
  `local_floor` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '展位所在楼层',
  `status` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT 'approved' COMMENT '展位状态：approved/已上架 canceled/已下架',
  `is_potential` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否是意向展位:0不是1是',
  `top_id` int(11) NULL DEFAULT NULL COMMENT '淘宝开放平台中场地所属的ID',
  `paid_order_quantity` int(11) NOT NULL DEFAULT 0 COMMENT '实际付款订单量',
  `order_count` int(11) NOT NULL DEFAULT 0 COMMENT '下单量',
  `regular_price` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '刊例价（单位：元）',
  `channel_price` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '渠道价（单位：元）',
  `display_type` tinyint(4) NULL DEFAULT NULL COMMENT '展位展示类型 1：展位 2：展厅 3：展台',
  `local_description` tinyint(4) NULL DEFAULT NULL COMMENT '展位位置描述 1：中庭 2：外展 3：连廊 4：扶梯区',
  `has_store` tinyint(4) NOT NULL DEFAULT 0 COMMENT '展位信息是否完善  0：未完善  1：已完善',
  `is_backend_show` tinyint(1) NOT NULL DEFAULT 0 COMMENT '上线状态 0：初始状态 1：申请上线（待审核）2：已上线 3：已拒绝',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `index_ci`(`community_id`) USING BTREE,
  INDEX `idx_ly`(`location_type_id`) USING BTREE,
  INDEX `idx_score`(`weight_score`) USING BTREE,
  INDEX `idx_price`(`least_price`) USING BTREE,
  INDEX `idx_noo`(`number_of_order`) USING BTREE,
  INDEX `idx_icon`(`icon_id`) USING BTREE,
  INDEX `idx_cb`(`created_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '物理资源表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`point_increase_histories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `order_item_id` int(11) NOT NULL COMMENT '订单行ID',
  `increment` int(11) NOT NULL COMMENT '积分增额',
  `status` int(11) NOT NULL DEFAULT 1 COMMENT '增长状态(0:失败 1:成功)',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `operation_type` int(11) NOT NULL DEFAULT 1 COMMENT '积分操作的类型:1.订单完成增加积分;2.下单使用积分抵扣;3.拒绝订单积分回退;4:反馈问题积分奖励',
  `order_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '订单号',
  `order_id` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '订单ID',
  `feedback_id` int(11) NULL DEFAULT NULL COMMENT '由反馈奖励引起的积分变化',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '积分增长记录' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`positions`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `use_protect_rule` tinyint(1) NOT NULL DEFAULT 1 COMMENT '是否使用保护期考核规则',
  `protect_day_at` tinyint(4) NOT NULL DEFAULT 15 COMMENT '保护期节点时间（例：15号）',
  `protect_months` tinyint(4) NOT NULL DEFAULT 3 COMMENT '保护期时长（单位：月）',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '岗位表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`price_rules`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '创建者',
  `name` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '规则名称',
  `type` tinyint(4) NOT NULL DEFAULT 0 COMMENT '加价方式 1 比例 2 金额',
  `percent` int(11) NOT NULL DEFAULT 0 COMMENT '加价比例',
  `amount` int(11) NOT NULL DEFAULT 0 COMMENT '加价金额，单位分',
  `status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '状态 1 未生效 2 生效中 3 已失效',
  `start_date` date NOT NULL COMMENT '开始时间',
  `end_date` date NOT NULL COMMENT '结束时间',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `price_rules_status_index`(`status`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`profiles`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `field_count` int(11) NOT NULL,
  `ad_count` int(11) NOT NULL,
  `active_count` int(11) NOT NULL,
  `sale_count` int(11) NOT NULL,
  `sale_money` int(11) NOT NULL,
  `purchased_count` int(11) NOT NULL,
  `purchased_money` int(11) NOT NULL,
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `last_purchased_at` datetime(0) NULL DEFAULT NULL COMMENT '最近一次下单时间',
  `first_purchased_at` datetime(0) NULL DEFAULT NULL COMMENT '第一次下单时间',
  `total_purchase_discount` int(11) NULL DEFAULT NULL COMMENT '下单总补贴',
  `avg_money` int(11) NULL DEFAULT NULL COMMENT '平均每单价格',
  `purchase_freq` int(11) NULL DEFAULT NULL COMMENT '下单频次',
  `sale_period` int(11) NULL DEFAULT NULL COMMENT '售出场次',
  `purchased_period` int(11) NULL DEFAULT NULL COMMENT '购买场次',
  `first_purchase_id` int(11) NULL DEFAULT NULL COMMENT '首次下单订单id，关联field_order_items主键id',
  `first_publish_id` int(11) NULL DEFAULT NULL COMMENT '首次发布场地供应商的供应商id，关联selling_resources主键id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_userid`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`promotion_area_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `promotion_area_id` int(11) NOT NULL COMMENT '推广图区配置id,(见promotion_areas表)',
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '图片链接',
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '链接',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '名称',
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '排序',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '首页配置区块管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`promotion_areas`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `is_show` tinyint(4) NOT NULL DEFAULT 1 COMMENT '是否显示字段（0：不显示，1：显示）',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '推广图区块配置表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`properties`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NULL DEFAULT NULL,
  `city` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `company` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '客户名称',
  `project` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '项目名称',
  `field_type_id` int(11) NULL DEFAULT NULL,
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `gainsharing` int(11) NULL DEFAULT NULL,
  `created_by` int(11) NULL DEFAULT NULL,
  `contact` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `position` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `mobile` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `work_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `worth` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `people_count` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `description` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  `followed_by` int(11) NULL DEFAULT NULL,
  `signed_at` datetime(0) NULL DEFAULT NULL,
  `field_types` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '拥有的场地类型',
  `ad_types` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '拥有的广告类型',
  `company_id` int(11) NULL DEFAULT NULL COMMENT '所属公司',
  `province_id` int(11) NULL DEFAULT NULL,
  `district_id` int(11) NULL DEFAULT NULL,
  `resource_ids` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '物业所拥有的资源列表',
  `field_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '场地名称v3.4改动',
  `cooperation_with_others` tinyint(4) NOT NULL DEFAULT 2 COMMENT '是否已经和其他竞争对手合作了:0没有1和其他合作了2没有填选',
  `cooperation_company` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '合作的竞争对手公司名称',
  `is_hq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否总部:1-总部 0-非总部',
  `management` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '管理方名称',
  `category_id` int(11) NOT NULL DEFAULT 0 COMMENT '类目id',
  `last_follow_time` datetime(0) NULL DEFAULT NULL COMMENT '最近跟进时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_cityid`(`city_id`) USING BTREE,
  INDEX `idx_deletedat`(`deleted_at`) USING BTREE,
  INDEX `idx_category`(`category_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '资源线索表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`property_applications`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `cert_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `status` int(11) NOT NULL DEFAULT 0 COMMENT '发布权限审核状态:0待审核 1同意 2拒绝 3被取消资格',
  `committed_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) COMMENT '提交申请的时间',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `contact` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '本申请的联系人',
  `company` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `reason` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `approved_at` date NULL DEFAULT NULL COMMENT '审核通过时间',
  `approved_by` int(11) NULL DEFAULT NULL COMMENT '审核人',
  `rejected_at` date NULL DEFAULT NULL COMMENT '拒绝时间',
  `rejected_by` int(11) NULL DEFAULT NULL COMMENT '拒绝人',
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '联系人电话',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '后台管理备注',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '发布权限申请表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`property_histories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `property_id` int(11) NOT NULL,
  `column_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '修改字段',
  `origin` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '修改前内容',
  `revised` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '修改后内容',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '物业变更表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`property_invoice_batch`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `status` tinyint(1) NOT NULL COMMENT '是否收回(0:未收回,1:已收回,2:退回重填,3:待确认,4:无法开票)',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '提交发票时填的备注信息',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `confirmed_at` timestamp(0) NULL DEFAULT NULL COMMENT '财务确认收票时间',
  `confirmed_by` int(11) NULL DEFAULT NULL COMMENT '财务确认收票人',
  `reward_reason` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '退回重填理由',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_creator`(`created_by`) USING BTREE,
  INDEX `idx_confirm`(`confirmed_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '资拓提交物业发票信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`property_invoices`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '创建人 关联users.id',
  `ticket_type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '票据类型 1：普通 2：专票 3：收据',
  `invoice_num` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '发票号码',
  `amount` decimal(12, 2) NOT NULL COMMENT '开票总额（单位：元）',
  `price` decimal(12, 2) NULL DEFAULT NULL COMMENT '开票单价（单位：元）',
  `tax` decimal(12, 2) NULL DEFAULT NULL COMMENT '开票税额（单位：元）',
  `seller` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '销售方',
  `purchaser` tinyint(4) NOT NULL COMMENT '购买方 1：杭州邻汇 2：上海趣推 3：深圳邻汇 4：杭州万一 5：杭州海瀛',
  `order_item_id` int(11) NOT NULL COMMENT '关联订单id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `property_invoice_batch_id` int(11) NOT NULL COMMENT '物业开票的ID,表property_invoice_batch',
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_invoice_batch`(`property_invoice_batch_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`property_tickets`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `field_order_item_id` int(11) NOT NULL COMMENT '关联小订单,field_order_items表ID',
  `order_additional_id` int(11) NOT NULL COMMENT '关联追加金额ID,order_additional_id表ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_order`(`field_order_item_id`) USING BTREE,
  INDEX `idx_order_additional`(`order_additional_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '邻汇收票信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`provinces`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `code` int(11) NOT NULL,
  `name_py` varchar(18) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '省份拼音首字母',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`receipt_addresses`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `is_home` int(1) NOT NULL,
  `resident_id` int(20) NOT NULL,
  `province_id` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `city_id` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `district_id` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `community` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `address` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `receiver` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`receivable_orders`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `receivable_id` int(11) NOT NULL COMMENT '收款id：receivables.id',
  `order_item_id` int(11) NOT NULL COMMENT '子订单id：关联field_order_items.id',
  `additional_expense_id` int(11) NULL DEFAULT NULL COMMENT '追加金额id：关联order_additional_expenses.id',
  `title` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '展位全称',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市id：关联cities.id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`receivables`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `order_num` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '订单号',
  `out_trade_no` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '流水号',
  `order_id` int(11) NOT NULL COMMENT '订单id：关联field_orders.id',
  `purchased_by` int(11) NOT NULL COMMENT '买家id：关联users.id',
  `ordering_at` datetime(0) NOT NULL COMMENT '下单时间',
  `operate_at` datetime(0) NULL DEFAULT NULL COMMENT '操作时间',
  `operate_by` int(11) NULL DEFAULT NULL COMMENT '操作人id：关联users.id',
  `status` tinyint(1) NOT NULL DEFAULT 0 COMMENT '状态 0：未处理  1：已到账  2：未到账 3：已拒绝',
  `refuse_reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '拒绝理由',
  `amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '收款金额：单位元',
  `voucher_image_url` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '付款证明图片地址',
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '收款类型  1：订单  2：追加金额',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`receivables_informations`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `account_owner` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款人',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款账号',
  `pay_type` int(11) NULL DEFAULT NULL COMMENT '付款方式（见m_payment_methods表）',
  `opening_bank` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开户行',
  `selling_resource_id` int(11) NOT NULL COMMENT '售卖资源id（见selling_resources表）',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `user_recevice_id` int(11) NULL DEFAULT NULL COMMENT '用户收款账号id（见user_receivables_informations表）',
  `is_default` tinyint(4) NULL DEFAULT 0 COMMENT '是否默认（0：非默认，1：默认）',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_sellingresourceid`(`selling_resource_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '售卖资源收款信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`received_appeals`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `appeal_id` int(11) NOT NULL COMMENT '需求表id',
  `name` varchar(40) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '接需求人的姓名',
  `mobile` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '接需求人的联系方式',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '接需求管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`records`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `model_id` int(11) NOT NULL COMMENT '跟进类型对应的id',
  `model` tinyint(4) NOT NULL COMMENT '跟进记录类型1-联系人contacts表,2-供应商properties表,3-供给selling_resources表,4-场地需求demands表',
  `business_id` int(11) NULL DEFAULT NULL,
  `property_id` int(11) NULL DEFAULT NULL,
  `content` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_by` int(11) NULL DEFAULT NULL COMMENT '记录人',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `user_id` int(11) NULL DEFAULT NULL COMMENT '记录与用户关联',
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '售卖资源ID(见selling_resources表)',
  `type` int(11) NOT NULL DEFAULT 0 COMMENT '记录类型(0：跟进记录，1：操作记录)',
  `key_person_id` int(11) NOT NULL COMMENT '关联key_person表id',
  `images` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '跟进记录图片,多张图片之间英文逗号隔开',
  `method` tinyint(4) NOT NULL DEFAULT 1 COMMENT '拜访类型:1-电话拜访,2-当面拜访,3-微信聊天',
  `longitude` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '当面拜访时所在经度',
  `latitude` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '当面拜访时所在纬度',
  `address` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '当面拜访时具体位置',
  `is_first` tinyint(4) NOT NULL DEFAULT 0 COMMENT '默认0不是首次 1是首次拜访',
  `next_visit_time` timestamp(0) NULL DEFAULT NULL COMMENT '下次回访时间',
  `visit_remind` tinyint(4) NULL DEFAULT NULL COMMENT '下次回访提醒：0否，1是',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_key_person_id`(`key_person_id`) USING BTREE,
  INDEX `idx_business_id`(`business_id`) USING BTREE,
  INDEX `idx_property`(`property_id`) USING BTREE,
  INDEX `idx_model`(`model_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_black_lists`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `type` tinyint(1) NOT NULL COMMENT '类型 1：城市 2：部门 3：个人',
  `name` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '名称',
  `sales_amount` decimal(16, 4) NOT NULL DEFAULT 0.0000 COMMENT '销售总额（单位：万元）',
  `average` decimal(16, 4) NOT NULL DEFAULT 0.0000 COMMENT '人均销售额（单位：万元）',
  `gross_profit` decimal(16, 4) NOT NULL DEFAULT 0.0000 COMMENT '毛利（单位：元）',
  `month_display` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '上榜时间（格式：1月）',
  `date` date NOT NULL COMMENT '上榜时间（Y-m-d）',
  `list_type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '榜单类型 1：黑名单 2：Top榜单',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '月度黑名单统计表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_blocks`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `report_template_id` int(11) NOT NULL COMMENT '汇报模板id,见表report_templates',
  `module_id` int(11) NOT NULL DEFAULT 1 COMMENT '信息组所属的模块',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '信息组名称',
  `extend_limit` tinyint(4) NOT NULL DEFAULT 1 COMMENT '可扩展上限,几就代表可以同时存在几个一样的信息组',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '汇报模板-信息组表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_dates`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `number` int(11) NOT NULL DEFAULT 0 COMMENT '数量',
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '汇报类型:1-日报 2-周报 3-月报',
  `start` date NOT NULL COMMENT '开始日期',
  `end` date NOT NULL COMMENT '结束日期',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '汇报日期表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_modules`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '模块名称',
  `template_id` int(11) NOT NULL COMMENT '所属模板id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_reads`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '已读用户id,见users表',
  `report_id` int(11) NOT NULL COMMENT '汇报id,见users表',
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '汇报类型:1-日报 2-周报 3-月报',
  `start` date NOT NULL COMMENT '开始日期',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) COMMENT '看了汇报的时间',
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户已读汇报信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_reviewers`  (
  `report_id` int(11) NOT NULL COMMENT '汇报id',
  `reviewer_id` int(11) NOT NULL COMMENT '批阅者id',
  INDEX `report_reviewers_report_id_index`(`report_id`) USING BTREE,
  INDEX `report_reviewers_reviewer_id_index`(`reviewer_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_template_items`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `report_block_id` int(11) NOT NULL COMMENT '汇报信息组id,见表report_blocks',
  `type` tinyint(4) NOT NULL COMMENT '字段类型选项:1-文本型 2-数字型 3-选项型 4-用户型 5-图片型',
  `title` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '每种类型的展示标题',
  `placeholder` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '字段提示文案',
  `options` varchar(500) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '选项型支持的选项值json字符串',
  `new_line` tinyint(4) NULL DEFAULT NULL COMMENT '是否需要换行: 1-需要换行 0-不需要 null-未选',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '汇报模板选项类型管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_templates`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '模板类型:1-日报模板 2-周报模板 3-月报模板',
  `display_name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '模板名称',
  `created_by` int(11) NOT NULL COMMENT '创建人,见users',
  `updated_by` int(11) NOT NULL COMMENT '最后修改的人,见users',
  `has_module` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否区分模块',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_created_by`(`created_by`) USING BTREE,
  INDEX `idx_updated_by`(`updated_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '汇报模板表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`report_types`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '汇报类型名称',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`reports`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `created_by` int(11) NOT NULL COMMENT '汇报提交人id,见users表',
  `content` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '汇报内容json字符串',
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '汇报类型:1-日报 2-周报 3-月报',
  `start` date NOT NULL COMMENT '开始日期',
  `end` date NOT NULL COMMENT '结束日期',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `report_template_id` int(11) NOT NULL DEFAULT 0 COMMENT '汇报模板id',
  `examiner_id` int(11) NULL DEFAULT NULL COMMENT '批复人id,见users表',
  `examine_at` datetime(0) NULL DEFAULT NULL COMMENT '批复时间',
  `examiners` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '直属领导,可批阅的人id',
  `reminded_user_ids` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '@的人的用户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '汇报表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`res_labels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `label_id` int(11) NOT NULL COMMENT '标签id',
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '售卖资源ID(见selling_resources表)',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_res_id_label_id`(`label_id`) USING BTREE,
  INDEX `index_sel_lab`(`selling_resource_id`, `label_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '资源标签关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`res_prices`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `res_id` int(11) NULL DEFAULT NULL,
  `size` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '场地大小',
  `lease_term_type_id` int(11) NOT NULL COMMENT '租期(使用m_lease_term_types表)',
  `price` int(11) NOT NULL COMMENT '现售价(单位:分)',
  `original_price` int(11) NOT NULL DEFAULT 0 COMMENT '原价（单位：分）',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `count_of_frame` int(11) NOT NULL DEFAULT 0 COMMENT '媒体位数量',
  `custom_dimension` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '自定义规格',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_res_id_price_lease_term_type_id_size`(`res_id`, `price`, `lease_term_type_id`, `size`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '价格表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`res_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '名字',
  `display_name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '显示名字',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`residents`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `community_id` int(20) NOT NULL,
  `nickname` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `gender` int(1) NULL DEFAULT NULL,
  `birthday` date NULL DEFAULT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_openid` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_nickname` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_country` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat_province` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat_city` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `wechat_avatar_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`resource_additional_infos`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `physical_resource_id` int(11) NOT NULL COMMENT '展位id',
  `created_by` int(11) NOT NULL COMMENT '创建人id,users表',
  `updated_by` int(11) NOT NULL COMMENT '更新人id,users表',
  `is_bidding` tinyint(1) NULL DEFAULT NULL COMMENT '是否是标类场地:1是0不是',
  `viscous` tinyint(1) NULL DEFAULT NULL COMMENT '场地粘性,1优势2普通3不良',
  `has_schedule` tinyint(1) NULL DEFAULT NULL COMMENT '是否有档期:0没有,1有',
  `retention_time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '保留时间',
  `approach_time` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '提前进场搭建时间',
  `need_set_up_fee` tinyint(1) NULL DEFAULT NULL COMMENT '是否有搭建费用,1有0没有',
  `set_up_fee` decimal(16, 2) NULL DEFAULT NULL COMMENT '搭建费用:单位元',
  `need_certification` tinyint(1) NULL DEFAULT NULL COMMENT '是否有凭证要求,1有0没有',
  `certification` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '凭证要求字符串,多个要求逗号隔开',
  `need_property_charge` tinyint(1) NULL DEFAULT NULL COMMENT '是否有物业收费,1有0没有',
  `property_charge` decimal(16, 2) NULL DEFAULT NULL COMMENT '物业收费:单位元',
  `need_construction_list` tinyint(1) NULL DEFAULT NULL COMMENT '需要施工单,1有0没有',
  `water_and_electricity` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '水电费',
  `electric_power` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '电力',
  `need_personal_certification` tinyint(1) NULL DEFAULT NULL COMMENT '是否需要个人凭证:1需要0不需要',
  `need_personal_certification_charge` tinyint(1) NULL DEFAULT NULL COMMENT '是否需要对个人凭证收费:1需要0不需要',
  `personal_certification_charge` decimal(8, 2) NULL DEFAULT NULL COMMENT '个人凭证费用',
  `bargaining_space` tinyint(1) NULL DEFAULT NULL COMMENT '议价空间:单位%',
  `remark` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '其他备注',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_physical_resource`(`physical_resource_id`) USING BTREE,
  INDEX `idx_created_by`(`created_by`) USING BTREE,
  INDEX `idx_updated_by`(`updated_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '资源补充信息' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`resource_clue_contacts`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `property_id` int(11) NOT NULL COMMENT '资源线索id,见表properties',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '姓名',
  `mobile` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '手机号',
  `email` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '邮箱',
  `department` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '部门名称',
  `position` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '职能名称',
  `level` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '级别',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '注册用户id,表users',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `community_id` int(11) NULL DEFAULT NULL COMMENT '场地id 关联 m_community_resources.id',
  `wechat` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '微信',
  `sex` varchar(1) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '性别 1：男 2：女',
  `company` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '所在企业',
  `card_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '名片链接',
  `remark` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_property`(`property_id`) USING BTREE,
  INDEX `idx_user`(`user_id`) USING BTREE,
  INDEX `idx_community`(`community_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '资源线索联系人表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`review_images`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片URL',
  `order_review_id` int(11) NOT NULL COMMENT '订单评价ID',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '评价标签映射表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`review_tag`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_order_review_id` int(11) NOT NULL,
  `tag_id` int(11) NOT NULL,
  `value` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`role_has_permissions`  (
  `permission_id` int(11) NOT NULL,
  `role_id` int(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`permission_id`, `role_id`) USING BTREE,
  INDEX `role_has_permissions_role_id_foreign`(`role_id`) USING BTREE,
  CONSTRAINT `role_has_permissions_permission_id_foreign` FOREIGN KEY (`permission_id`) REFERENCES `linhui_test`.`abilities` (`id`) ON DELETE CASCADE ON UPDATE RESTRICT,
  CONSTRAINT `role_has_permissions_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `linhui_test`.`linhui_roles` (`id`) ON DELETE CASCADE ON UPDATE RESTRICT
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`role_user`  (
  `user_id` int(10) UNSIGNED NOT NULL,
  `role_id` int(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`user_id`, `role_id`) USING BTREE,
  INDEX `role_user_role_id_foreign`(`role_id`) USING BTREE,
  CONSTRAINT `role_user_role_id_foreign` FOREIGN KEY (`role_id`) REFERENCES `linhui_test`.`roles` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `role_user_user_id_foreign` FOREIGN KEY (`user_id`) REFERENCES `linhui_test`.`users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_unicode_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`roles`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `tag` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `display_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `description` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `roles_name_unique`(`name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`scheme_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `relation_type` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联关系类型',
  `scheme_id` int(11) NOT NULL COMMENT '联系人ID（关联schemes.id）',
  `relation_id` int(11) NOT NULL COMMENT '关联表ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_relation_id`(`relation_id`) USING BTREE,
  INDEX `idx_scheme_id`(`scheme_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '方案库添加与编辑中一些多选项保存表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`schemes`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `source` tinyint(4) NOT NULL COMMENT '方案理来源：1：甲方；2：渠道',
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标题',
  `budget` decimal(16, 2) NULL DEFAULT NULL COMMENT '预算（单位：元）',
  `is_landed` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否落地:1是；0否',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `is_sync` int(11) NOT NULL DEFAULT 1 COMMENT '是否是平台方案（同步过来的）',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`secondaries`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `resident_id` int(20) NOT NULL,
  `is_sell` int(11) NOT NULL,
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `target_price` int(11) NULL DEFAULT NULL,
  `description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `origin_price` int(11) NULL DEFAULT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `secondary_catagory_id` int(20) NOT NULL,
  `can_change` int(11) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`secondary_catagories`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `parent_id` int(11) NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`secondary_comments`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `secondary_id` int(20) NOT NULL,
  `resident_id` int(20) NOT NULL,
  `price` int(11) NOT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `message` varchar(300) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`secondary_imgs`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `secondary_id` int(20) NULL DEFAULT NULL,
  `secondary_comment_id` int(20) NULL DEFAULT NULL,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`selling_resource_imgs`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片链接',
  `selling_resource_id` int(11) NOT NULL COMMENT '供给id',
  `seq` tinyint(4) NOT NULL DEFAULT 0 COMMENT '图片顺序',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`selling_resource_price_rule`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `selling_resource_id` int(11) NOT NULL,
  `price_rule_id` int(11) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`selling_resource_prices`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '售卖资源ID(使用selling_resources表)',
  `size` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '场地大小',
  `lease_term_type_id` int(11) NOT NULL COMMENT '租期(使用m_lease_term_types表)',
  `price` int(11) NOT NULL COMMENT '价格.单位(分)',
  `count_of_frame` int(11) NOT NULL DEFAULT 0 COMMENT '媒体位数量',
  `custom_dimension` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '自定义规格',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `original_price` int(11) NOT NULL DEFAULT 0 COMMENT '原价（单位：分）',
  `cost_price` int(11) NULL DEFAULT NULL COMMENT '成本价（单位：分）',
  `share_type` tinyint(4) NOT NULL DEFAULT 1 COMMENT '1：固定比例 2：固定金额',
  `rate_share` tinyint(4) NOT NULL DEFAULT 0 COMMENT '分成比例（单位1%）',
  `fixed_share` int(11) NOT NULL DEFAULT 0 COMMENT '固定分成金额(单位：分)',
  `deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '押金（单位：元）',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_selling_resource_id_price_lease_term_type_id_size`(`selling_resource_id`, `price`, `lease_term_type_id`, `size`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '售卖资源价格表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`selling_resources`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `created_by` int(11) NOT NULL COMMENT '收益方id/资源拥有者id（见users表）',
  `creator` int(11) NULL DEFAULT NULL COMMENT '发布资源用户id（见users表）',
  `physical_resource_id` int(11) NOT NULL COMMENT '物理资源ID(见physical_resources表)',
  `res_type_id` int(2) NOT NULL DEFAULT 1 COMMENT '售卖资源类型：如场地、广告、活动',
  `custom_name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '创建者自定义售卖资源名称',
  `days_in_advance` int(11) NOT NULL DEFAULT 2 COMMENT '提前预定时间（单位：天）',
  `activity_start_date` date NULL DEFAULT NULL COMMENT '活动起始日期',
  `deadline` date NULL DEFAULT NULL COMMENT '活动截止日期字段',
  `minimum_booking_days` int(11) NOT NULL DEFAULT 1 COMMENT '最小起订天数（单位：天）',
  `subsidy_rate` int(2) NOT NULL DEFAULT 0 COMMENT '补贴率（单位1%）',
  `integral_rebate_proportion` int(11) NULL DEFAULT 100 COMMENT '积分返点比例（百分比）(单位：1%)',
  `invoice` int(1) NOT NULL DEFAULT 0 COMMENT '物业是否能开发票:0代表不开发票，1代表是开发票',
  `consumption_tax_point` int(11) NOT NULL DEFAULT 600 COMMENT '商家购买场地需要缴的消费税点，整数。单位：0.01%',
  `consumption_special_tax_point` int(11) NOT NULL DEFAULT 600 COMMENT '商家购买场地需要缴的专用发票消费税点，整数。单位：0.01%',
  `tax_point` int(11) NULL DEFAULT NULL COMMENT '物业给邻汇吧开普通发票的税点，整数。单位：0.01%',
  `special_tax_point` int(11) NULL DEFAULT NULL COMMENT '物业给邻汇吧开专用发票的税点，整数。单位：0.01%',
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '备注',
  `has_power` int(1) NOT NULL DEFAULT 0 COMMENT '是否供电:0代表不提供电，1代表供电',
  `has_chair` int(1) NOT NULL DEFAULT 0 COMMENT '是否提供桌椅:0代表不提供桌椅，1代表提供桌椅',
  `overnight_material` int(1) NOT NULL DEFAULT 0 COMMENT '是否提供物料过夜:0代表不提供物料过夜，1代表提供物料过夜',
  `leaflet` int(1) NOT NULL DEFAULT 0 COMMENT '是否可发传单:0代表不可发传单，1代表可发传单',
  `has_tent` int(1) NOT NULL DEFAULT 0 COMMENT '是否提供帐篷:0代表不提供帐篷，1代表提供帐篷',
  `deposit` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '押金值(单位：元)',
  `cooperation_type_id` tinyint(4) NULL DEFAULT NULL COMMENT '场地合作方式ID(见m_field_cooperation_types表)',
  `connecter` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '对接人',
  `connecter_mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '对接人电话',
  `manager` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '场地负责人',
  `manager_mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '场地负责人电话',
  `accountant` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '财务联系人',
  `accountant_mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '财务联系人电话',
  `materiel_cover_id` int(11) NULL DEFAULT NULL COMMENT '物料覆盖ID(见m_materiel_cover表)',
  `retrieved_at` datetime(0) NULL DEFAULT NULL COMMENT '售卖资源下架时间',
  `approved_at` datetime(0) NULL DEFAULT NULL COMMENT '售卖资源审核通过时间',
  `canceled_at` datetime(0) NULL DEFAULT NULL COMMENT '售卖资源审核拒绝时间',
  `cooperation_at` datetime(0) NULL DEFAULT NULL COMMENT '修改合作方式时间',
  `min_price` int(11) NOT NULL DEFAULT 0 COMMENT '售卖资源最低价(单位:分)',
  `max_price` int(11) NOT NULL DEFAULT 0 COMMENT '售卖资源最高价(单位:分)',
  `max_area` decimal(7, 2) NULL DEFAULT NULL COMMENT '售卖资源最大面积',
  `cost_performance` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '性价比=人流量/价格',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `is_hot` tinyint(4) NULL DEFAULT NULL COMMENT '是否热门(1代表热门)',
  `browse_times` int(11) NOT NULL COMMENT '售卖资源浏览次数',
  `off_shelves_reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '下架原因',
  `on_shelves_way` int(11) NOT NULL DEFAULT 0 COMMENT '上架方式(0:未知 1:最新创建 2:修改上架 3:自动上架)',
  `auto_on_shelves_date` date NULL DEFAULT NULL COMMENT '自动上架日期',
  `activity_type_id` int(2) NULL DEFAULT NULL COMMENT '活动类型(见activity_types表)',
  `original_min_price` int(11) NOT NULL DEFAULT 0 COMMENT '原价最低价（单位：分）',
  `original_max_price` int(11) NOT NULL DEFAULT 0 COMMENT '原价最高价（单位：分）',
  `ad_print_type_id` tinyint(4) NULL DEFAULT NULL COMMENT '微信打印机类别',
  `avg_price` int(11) NULL DEFAULT NULL COMMENT '资源平均价格，单位分',
  `cancel_reason` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '拒绝原因',
  `is_registed` int(11) NULL DEFAULT 0 COMMENT '是否注册  0：未注册 1：注册  （默认未注册）',
  `status` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '售卖资源状态(submitted:待审核，approved:已发布，rejected:已拒绝，retrieved:已下架，pending:跟进中，publishless:不能发布，unavailable:不能摆摊)',
  `group_purchase_id` int(11) NULL DEFAULT NULL COMMENT '拼团关联关系，见group_purchases表',
  `daily_price` int(11) NULL DEFAULT 0 COMMENT '日均价,单位分',
  `is_enquiry` int(4) NULL DEFAULT 0 COMMENT '是否为询价的售卖资源，1表示是，0不是',
  `support_rescheduling` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否支持改期,0未知,1支持改期,2不支持改期',
  `goal` int(4) NULL DEFAULT 0 COMMENT '需要提供活动目的，1需要，0不需要',
  `process` int(4) NULL DEFAULT 0 COMMENT '需要提供活动流程，1需要，0不需要',
  `effect_pic` int(4) NULL DEFAULT 0 COMMENT '需要提供效果图，1需要，0不需要',
  `license` int(4) NULL DEFAULT 0 COMMENT '需要提供营业执照，1需要，0不需要',
  `copying_of_id_card` int(4) NULL DEFAULT 0 COMMENT '需要提供执行人员身份证复印件，1需要，0不需要',
  `m_else` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '询价，其它补充说明',
  `refer_min_price` int(11) NULL DEFAULT 0 COMMENT '询价参考价（低）',
  `refer_max_price` int(11) NULL DEFAULT 0 COMMENT '询价参考价（高）',
  `min_price_after_subsidy` int(11) NOT NULL DEFAULT 0 COMMENT '补贴后售卖资源最低价(单位:分)',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '供给跟进人 id，关联 `users`.`id`',
  `max_share` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '所有规格中分成最大的值(用于筛选有无分成) 单位:元',
  `markup_rate` decimal(6, 4) NOT NULL DEFAULT 0.0000,
  `reschedule_in_advance` int(11) NULL DEFAULT NULL COMMENT '提前改期天数',
  `description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '活动描述',
  `updated_by` int(11) NULL DEFAULT NULL COMMENT '展位信息更新者',
  `pc_description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT 'PC 图文详情',
  `app_description` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT 'APP 图文详情',
  `first_set_share_at` timestamp(0) NULL DEFAULT NULL COMMENT '第一次设置分成的时间',
  `pending_objection` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '待跟进理由',
  `is_potential` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否是意向供给:0不是1是',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市id：关联cities.id',
  `reviewed_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0) COMMENT '最近复核时间',
  `support_unsubscribe` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否可协商退订：0未知，1支持，2不支持',
  `unsubscribe_days` smallint(5) UNSIGNED NOT NULL DEFAULT 0 COMMENT '活动几天前可退订',
  `provide_repository` tinyint(4) NOT NULL DEFAULT 0 COMMENT '提供仓库 0：否 1：是',
  `business_hours` tinyint(4) NOT NULL DEFAULT 0 COMMENT '营业时间搭建 0：否 1：是',
  `net_wire` tinyint(4) NOT NULL DEFAULT 0 COMMENT '网线 0：否 1：是',
  `wifi` tinyint(4) NOT NULL DEFAULT 0 COMMENT '无线 0：否 1：是',
  `has_store` tinyint(1) NOT NULL DEFAULT 1 COMMENT '信息是否完善 1：是  0：否',
  `is_backend_show` tinyint(1) NOT NULL DEFAULT 0 COMMENT '上线状态 0：初始状态 1：申请上线（待审核）2：已上线 3：已拒绝',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `index_idx`(`retrieved_at`, `approved_at`) USING BTREE,
  INDEX `index_pri`(`physical_resource_id`) USING BTREE,
  INDEX `idx_physicalresourceid`(`physical_resource_id`) USING BTREE,
  INDEX `idx_createdby`(`created_by`) USING BTREE,
  INDEX `idx_grouppurchaseid`(`group_purchase_id`) USING BTREE,
  INDEX `physical_resource_id`(`physical_resource_id`) USING BTREE,
  INDEX `idx_res_type_id`(`res_type_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '售卖资源表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`service_items`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT '' COMMENT '服务项目名称',
  `created_by` int(11) NOT NULL DEFAULT 0 COMMENT '创建人id',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NULL DEFAULT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `created_by`(`created_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '服务项目管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`service_provider_brands`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `service_provider_id` int(11) NOT NULL COMMENT '服务商表id,见表service_providers',
  `brand_id` int(11) NOT NULL COMMENT '品牌id,见表m_brands',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_service_provider`(`service_provider_id`) USING BTREE,
  INDEX `idx_brand`(`brand_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '服务商-品牌中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`service_provider_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '企业形象图片地址',
  `service_provider_id` int(11) NOT NULL COMMENT '图片所属服务商的ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '服务商企业形象表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`service_provider_item`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `service_item_id` int(11) NOT NULL DEFAULT 0 COMMENT '服务项目id',
  `service_provider_id` int(11) NOT NULL DEFAULT 0 COMMENT '服务商id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `service_item`(`service_item_id`) USING BTREE,
  INDEX `service_provider`(`service_provider_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '服务商-服务项目中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`service_provider_labels`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `label_id` int(11) NOT NULL DEFAULT 0 COMMENT '标签id',
  `service_provider_id` int(11) NOT NULL DEFAULT 0 COMMENT '服务商id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_label_id`(`label_id`) USING BTREE,
  INDEX `idx_service_provider_id`(`service_provider_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '标签-服务商中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`service_providers`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `company` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '公司名称',
  `office_location` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '办公地点',
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '联系电话',
  `company_profile` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '企业简介',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '服务商企业形象图片URL',
  `contact` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '联系人',
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户备注',
  `popularity` int(11) NULL DEFAULT 0 COMMENT '人气值',
  `created_by` int(11) NOT NULL DEFAULT 0 COMMENT '创建人',
  `province_id` int(11) NULL DEFAULT NULL COMMENT '省份id',
  `city_id` int(11) NULL DEFAULT NULL COMMENT '城市id',
  `district_id` int(11) NULL DEFAULT NULL COMMENT '地区id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '服务商数据表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`service_representatives`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `name` varchar(25) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '客服名称',
  `avatar` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '头像',
  `qrcode` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '二维码',
  `tel` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '联系电话',
  `wechat` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '微信号',
  `profile` text CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '简介',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`services`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `community_id` int(20) NOT NULL,
  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `icon_id` int(20) NOT NULL,
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `phone_num` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `clicked_times` int(11) NOT NULL DEFAULT 0,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `type`(`type`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`sharing_managements`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `img` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '分享图',
  `wx_friend_circle_copy` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '朋友圈文案',
  `wx_dialog_copy` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '微信对话框文案',
  `qq_space_copy` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'QQ空间文案',
  `qq_dialog_copy` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'QQ对话框文案',
  `type` tinyint(4) NULL DEFAULT NULL COMMENT '类型',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`signups`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NOT NULL,
  `user_id` int(11) NOT NULL,
  `property_id` int(11) NULL DEFAULT NULL,
  `business_id` int(11) NULL DEFAULT NULL,
  `lng` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `lat` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '签到地址',
  `cities` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '岗位负责的城市',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`sms`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `content` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `status` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `sent_at` datetime(0) NULL DEFAULT NULL,
  `ip` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '调用IP',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`sources`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `type` smallint(6) NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户来源表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`spending_items`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `spending_id` int(11) NOT NULL COMMENT '支出id,对应表spendings',
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '支出明细项目名称',
  `price` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '费用:元',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_spending`(`spending_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '支出明细表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`spendings`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NOT NULL DEFAULT 0 COMMENT '支出所在城市,对应表cities',
  `total` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '当月总支出',
  `year` char(4) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '2000' COMMENT '年',
  `month` tinyint(4) NOT NULL DEFAULT 0 COMMENT '月份:1-12',
  `created_by` int(11) NOT NULL DEFAULT 0 COMMENT '上一次更新的人,见users表id',
  `updated_by` int(11) NOT NULL DEFAULT 0 COMMENT '最后更新的人,见users表id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `year_month` date NOT NULL COMMENT '支出年月',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_city_year_month`(`city_id`, `year`, `month`) USING BTREE,
  INDEX `idx_created`(`created_by`) USING BTREE,
  INDEX `idx_updated`(`updated_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '内部支出表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`splash_screen_cities`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `splash_screen_id` int(11) NOT NULL COMMENT '闪屏id',
  `city_id` int(11) NOT NULL COMMENT '城市id',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '闪屏城市关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`splash_screens`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标题',
  `start` datetime(0) NOT NULL COMMENT '开始时间',
  `end` datetime(0) NOT NULL COMMENT '结束时间',
  `jump_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '跳转URL',
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '图片URL',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '闪屏表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`spread_ways`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `spread_way` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '推广形式管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`statuses`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `tag` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `seq` int(11) NOT NULL DEFAULT 1 COMMENT '开票内容类型的获取顺序序号',
  `tax_point` int(11) NOT NULL DEFAULT 0 COMMENT '开票内容对应的税点，单位0.01%',
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`subway_lines`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NOT NULL COMMENT '城市id',
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '地铁线名称',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`subway_stations`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `subway_line_id` int(11) NOT NULL COMMENT '地铁线id',
  `station_name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '站点名称',
  `detail_address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '详细地址',
  `lng` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '经度',
  `lat` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '纬度',
  `seq` int(11) NOT NULL DEFAULT 1 COMMENT '排序优先级',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `city_id` int(11) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`sys_config`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `field_name` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '字段名',
  `field_value` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '字段值',
  `field_type` char(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '字段类型',
  `field_tip` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '字段名描述',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `sys_config_field_name_index`(`field_name`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`target_items`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `target_id` int(11) NOT NULL,
  `month` tinyint(4) NOT NULL DEFAULT 1 COMMENT '月份:1-12的数字',
  `net_profit` decimal(16, 2) NULL DEFAULT NULL COMMENT '净利润:单位元',
  `transaction_volumn` decimal(16, 2) NULL DEFAULT NULL COMMENT '交易额(元)',
  `gross_profit` decimal(16, 2) NULL DEFAULT NULL COMMENT '毛利（元）',
  `execution` decimal(16, 2) NULL DEFAULT NULL COMMENT '城市执行额目标:元',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_target`(`target_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '目标对应各月份目标值' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`targets`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `city_id` int(11) NULL DEFAULT NULL,
  `user_id` int(11) NULL DEFAULT NULL,
  `field_increment` int(11) NULL DEFAULT 0 COMMENT '新增场地',
  `registered_fields` int(11) NULL DEFAULT 0 COMMENT '注册场地',
  `signed_fields` int(11) NULL DEFAULT 0 COMMENT '签约场地',
  `transaction_volumn` int(11) NULL DEFAULT 0 COMMENT '交易额(元)',
  `gross_profit` int(11) NULL DEFAULT 0 COMMENT '毛利（元）',
  `start` date NOT NULL COMMENT '开始时间',
  `period` int(3) NOT NULL DEFAULT 2 COMMENT '计划周期（1: 周；2:月；3.年）',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `execution` int(11) NULL DEFAULT NULL COMMENT '城市执行额目标',
  `department_id` int(11) NULL DEFAULT NULL COMMENT '目标所属部门',
  `self_run_sales` int(11) NULL DEFAULT NULL COMMENT '自营销售额目标（万元），即订单资源的合作方式为自营（非邻汇吧）',
  `net_profit` decimal(16, 2) NULL DEFAULT NULL COMMENT '净利润:单位元',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`task_attachments`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `task_id` int(11) NULL DEFAULT NULL COMMENT '关联任务',
  `task_record_id` int(11) NULL DEFAULT NULL COMMENT '附件关联记录',
  `url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '附件地址',
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '附件名称',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`task_histories`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `task_id` int(11) NULL DEFAULT NULL COMMENT '关联任务',
  `operator_id` int(11) NOT NULL COMMENT '操作员',
  `modified` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '被修改字段',
  `old_value` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '初始值',
  `new_value` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '修改后的值',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_task_id`(`task_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`task_records`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `task_id` int(11) NOT NULL COMMENT '任务类型',
  `content` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL COMMENT '任务描述',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图片地址',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '客服工单跟进记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`task_relations`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `task_id` int(11) NOT NULL COMMENT '关联工单表tasks：id',
  `relation_id` int(11) NOT NULL COMMENT '关联关系表id',
  `relation_type` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联关系模型',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_task`(`task_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '工单-资源 关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`task_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `managed_by` int(11) NULL DEFAULT NULL COMMENT '该类型任务统一分配者',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`tasks`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `task_type_id` int(11) NOT NULL COMMENT '任务类型',
  `description` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '任务描述',
  `expired_at` date NOT NULL COMMENT '任务截止时间',
  `priority` int(2) NOT NULL DEFAULT 5 COMMENT '优先级，1-5从高到低',
  `status` int(11) NOT NULL COMMENT '任务状态:1.进行中;2.进行中(不用了);3.已完成;4.已取消',
  `created_by` int(11) NOT NULL COMMENT '创建人',
  `followed_by` int(11) NOT NULL COMMENT '跟进人',
  `assigned_by` int(11) NOT NULL COMMENT '最后一次指派人',
  `field_order_item_id` int(11) NULL DEFAULT NULL COMMENT '关联的订单id',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '关联的用户id',
  `appeal_id` int(11) NULL DEFAULT NULL COMMENT '关联的需求id',
  `invoice_id` int(11) NULL DEFAULT NULL COMMENT '关联的票据申请',
  `selling_resource_id` int(11) NULL DEFAULT NULL COMMENT '关联的资源id',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `property_application_id` int(11) NULL DEFAULT NULL COMMENT '关联的发布权限表id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`tb_log`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(10) NULL DEFAULT NULL COMMENT '操作用户id',
  `table_id` int(10) NULL DEFAULT NULL COMMENT '资源在对应表中的id',
  `table_name` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '表名',
  `comment` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '备注',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `is_linhui` tinyint(4) NOT NULL DEFAULT 1 COMMENT '是否是邻汇员工 1：是  0：否',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `log_table_name`(`table_name`) USING BTREE,
  INDEX `log_table_id`(`table_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_unicode_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`tb_log_content`  (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `log_id` int(10) NULL DEFAULT NULL,
  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '标题',
  `tb_key` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '变更记录表字段名',
  `tb_zh_key` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '变更记录表字段中文名',
  `tb_value` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL COMMENT '旧值',
  `current_tb_value` text CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL COMMENT '新值',
  `is_extend` tinyint(2) NOT NULL DEFAULT 1 COMMENT '判断是否是变更记录 1/变更记录 0/操作记录',
  `field_type` varchar(8) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT 'string' COMMENT '字段类型 string/字符串 integer/数字 boolean/布尔 float/浮点数 array/数组 ',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `log_id`(`log_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_unicode_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`tel_catagories`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `community_id` int(20) NOT NULL,
  `icon_id` int(20) NOT NULL,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`tel_nums`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `tel_catagory_id` int(20) NOT NULL,
  `name` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `dial_times` int(20) NOT NULL,
  `tel_num` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`templates`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `wechat_id` varchar(128) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `community_id` int(20) NOT NULL,
  `type` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`theme_cities`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `theme_id` int(11) NOT NULL COMMENT '专题id : 关联表 themes',
  `city_id` int(11) NOT NULL COMMENT '城市id : 关联表 cities',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '专题-城市 关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`theme_classify`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '标题',
  `theme_id` int(11) NOT NULL COMMENT '专题id : 关联表 themes',
  `pc_banner` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'PC-banner',
  `app_banner` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'APP-banner',
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'banner链接',
  `type` tinyint(4) NULL DEFAULT NULL COMMENT '展示类型  1/推荐位  2/普通展位',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_theme`(`theme_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '专题分类' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`theme_resources`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `theme_id` int(11) NOT NULL COMMENT '专题id : 关联表 themes',
  `theme_classify_id` int(11) NOT NULL COMMENT '专题分类id : 关联表 theme_classify',
  `pc_banner_width` mediumint(9) NULL DEFAULT NULL COMMENT 'PC-banner 宽度限制，单位：px',
  `app_banner_width` mediumint(9) NULL DEFAULT NULL COMMENT 'APP-banner 宽度限制，单位：px',
  `pc_banner` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'PC-banner',
  `app_banner` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'APP-banner',
  `type` tinyint(4) NULL DEFAULT NULL COMMENT '数据内容：1/关联展位  2/链接',
  `physical_resource_id` int(11) NULL DEFAULT NULL COMMENT '关联展位id : 关联表 physical_resources',
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '链接',
  `batch` tinyint(4) NOT NULL COMMENT '批次号',
  `seq` tinyint(4) NOT NULL COMMENT '顺序',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_theme_classify`(`theme_classify_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '专题关联展位' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`themes`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '专题名称',
  `description` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '专题描述',
  `template_num` tinyint(4) NOT NULL DEFAULT 1 COMMENT '模板编号: 1/模板一  2/模板二',
  `display` tinyint(4) NOT NULL DEFAULT 1 COMMENT '是否前端展示：0/否  1/是',
  `cover_map_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '专题封面',
  `color` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '专题背景颜色',
  `pc_banner` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'PC专题banner',
  `app_banner` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'APP专题banner',
  `link` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '专题链接',
  `city_ids` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '专题展示城市 : 多城市用\",\"分隔',
  `created_by` int(11) NOT NULL COMMENT '专题创建人 : 关联表 users',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `deleted_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_display_template`(`display`, `template_num`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '专题' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`track_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `track_id` int(20) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户足迹的图片表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`tracks`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `field_order_item_id` varchar(20) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL COMMENT '订单ID',
  `number_of_people` int(11) NULL DEFAULT NULL COMMENT '人流量',
  `sale` double(11, 2) NULL DEFAULT NULL COMMENT '销售额,单位：元',
  `number_of_fans` int(11) NULL DEFAULT NULL COMMENT '增粉',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户足迹，订单效果管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`trading_areas`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `center` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `lng` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商圈中心经度',
  `lat` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商圈中心纬度',
  `minLat` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商圈范围最小纬度',
  `maxLat` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商圈范围最大纬度',
  `minLng` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商圈范围最小经度',
  `maxLng` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '商圈范围最大经度',
  `province_id` int(11) NOT NULL COMMENT '省份ID',
  `city_id` int(11) NOT NULL COMMENT '城市ID',
  `district_id` int(11) NOT NULL COMMENT '区域ID',
  `precise` int(11) NOT NULL COMMENT '位置的附加信息，是否精确查找。1为精确查找，即准确打点；0为不精确，即模糊打点。',
  `confidence` int(11) NOT NULL COMMENT '可信度，描述打点准确度',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `radius` decimal(16, 2) NULL DEFAULT 0.00 COMMENT '商圈半径(单位：米)',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '商圈类型表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`transaction_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `display_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '交易类型表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`transactions`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `wallet_id` int(11) NOT NULL COMMENT '钱包ID',
  `transaction_type` tinyint(1) NOT NULL COMMENT '交易类型 1：充值 2：消费 3：退款 4：补交税费及快递费 5：退款(押金) 6：退款(税费及快递费) 7：优质供应商奖金 8：提现 9：邀请奖励奖金',
  `name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '交易名称',
  `out_trade_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '交易订单号',
  `amount` decimal(16, 2) NOT NULL COMMENT '金额',
  `payment_mode` int(11) NOT NULL DEFAULT 0 COMMENT '支付方式(0:线下支付 1：微信app支付 2:微信公众号支付 3:微信原生扫码支付)',
  `voucher_image_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '线下支付的凭证',
  `confirmed` tinyint(1) NOT NULL DEFAULT 0 COMMENT '是否确认到账 0：未到账  1：已到账  2：已拒绝',
  `paid_at` datetime(0) NULL DEFAULT NULL COMMENT '支付成功的时间',
  `balance` decimal(16, 2) NOT NULL COMMENT '交易完成后的余额(用于对账)',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `order_num` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '订单号：（多个订单号用，分隔开）',
  `serial_num` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '流水号',
  `goods` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '商品',
  `wx_prepay_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '微信预付单ID，用于小程序发送模板消息',
  `invoice_order_id` int(11) NULL DEFAULT NULL COMMENT '对应的发票订单id，见invoice_orders表',
  `finished_at` datetime(0) NULL DEFAULT NULL COMMENT '订单完成时间',
  `rejected_at` datetime(0) NULL DEFAULT NULL COMMENT '审核拒绝时间',
  `objection` varchar(512) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '审核决绝理由',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '提现账号',
  `invite_user_id` int(11) NULL DEFAULT NULL COMMENT '被邀请的用户id',
  `order_item_id` int(11) NULL DEFAULT NULL COMMENT '订单id',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '钱包交易记录表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`type_worker`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `type_id` int(20) NOT NULL,
  `worker_id` int(20) NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`types`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `community_id` int(20) NULL DEFAULT NULL,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `type` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`unity_bills`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `community_id` int(20) NOT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `out_trade_no` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wx_prepay_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_trade_no` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `id_num` varchar(6) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `owner` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `payer_wechat_openid` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `amount` int(11) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `status` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_activity_cases`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `activity_case_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '活动案例(文件)URL地址',
  `name` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '活动案例(文件)名字',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向用户ID',
  `user_id` int(11) NOT NULL COMMENT '文件所属用户的ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户活动案例(文件)表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_ad_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `user_ad_type_id` int(11) NOT NULL COMMENT '关联的广告类型id',
  `property_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向供应商ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '广告类型关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_additional_requirement`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `additional_requirement_id` int(11) NOT NULL COMMENT '额外需求id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向用户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其场地意向额外需求关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_age_level`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `age_level_id` int(11) NOT NULL COMMENT '消费水平id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向客户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其公司用户年龄层关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_assigns`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `operator_id` int(11) NOT NULL COMMENT '操作人id',
  `assigned_id` int(11) NOT NULL COMMENT '被指派人id',
  `business_id` int(11) NULL DEFAULT NULL COMMENT 'businesses表id',
  `user_id` int(11) NULL DEFAULT NULL COMMENT '用户id',
  `perfect_end_time` timestamp(0) NULL DEFAULT NULL COMMENT '指派完善信息截止日期',
  `created_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` timestamp(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '类型:1-指派 2-转交 3-认领',
  `status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否钉钉提醒过了 默认0未提醒1提醒过了',
  `property_id` int(11) NOT NULL DEFAULT 0 COMMENT '资源线索id,见properties表',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_operator_id`(`operator_id`) USING BTREE,
  INDEX `idx_assigned_id`(`assigned_id`) USING BTREE,
  INDEX `idx_business_id`(`business_id`) USING BTREE,
  INDEX `idx_user`(`user_id`) USING BTREE,
  INDEX `idx_property`(`property_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '指派关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_backend_settings`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL,
  `nickname` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户的备注名称',
  `unschedule_interval` int(11) NOT NULL DEFAULT 0 COMMENT '用户未下单时长',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户后台设置表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_cities`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `city_id` int(11) NOT NULL COMMENT '城市id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向用户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其场地意向城市关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_consumption_level`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `consumption_level_id` int(11) NOT NULL COMMENT '消费水平id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向客户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其公司用户消费水平关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_coupons`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `coupon_rule_id` int(11) NOT NULL COMMENT '优惠券规则ID',
  `coupon_id` int(11) NOT NULL COMMENT '优惠券ID',
  `scope` tinyint(4) NOT NULL COMMENT '适用范围 1/全场通用；2/限场地；3/限场地类目；4/限标签',
  `channel` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '优惠券领取渠道：客户端 pc、wap、android、ios、wxApplet',
  `title` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '优惠券名称',
  `hint` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '优惠券提示语',
  `effective_start_time` datetime(0) NOT NULL COMMENT '生效开始日期',
  `effective_end_time` datetime(0) NOT NULL COMMENT '生效结束日期',
  `min_goods_amount` decimal(10, 2) NOT NULL COMMENT '使用门槛（单位:元）',
  `amount` decimal(10, 2) NOT NULL COMMENT '优惠金额（单位:元）',
  `used` tinyint(4) NOT NULL DEFAULT 1 COMMENT '优惠券是否使用：1/未使用 2/已使用',
  `reminded` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否推送过期提醒  0/否  1/是',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `used_channel` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '优惠券使用渠道：客户端 pc、wap、android、ios、wxApplet',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_user_coupon`(`user_id`, `coupon_id`) USING BTREE,
  INDEX `idx_cid`(`coupon_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户-优惠券中间表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_deputy_industry`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `deputy_industry_id` int(11) NOT NULL COMMENT '副行业id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向用户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其场地意向副行业关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_ditui_imgs`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `pic_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '地推现场的照片URL地址',
  `user_id` int(11) NOT NULL COMMENT '图片所属用户的ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向客户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户地推图片表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_enterprise`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `enterprise_id` int(11) NOT NULL COMMENT '企业ID',
  `role` int(11) NOT NULL DEFAULT 2 COMMENT '用户在企业中的角色:1.管理员2.普通员工',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_enterprise`(`enterprise_id`) USING BTREE,
  INDEX `idx_user_enterprise`(`user_id`, `enterprise_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = 'user和enterprise多对多关系表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_field_type`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `user_field_type_id` int(11) NOT NULL COMMENT '场地类型id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向用户ID',
  `property_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向供应商id',
  `user_category_id` int(11) NOT NULL COMMENT '类目ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其场地意向场地类型关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_food_safety_licenses`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `license_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '食品安全许可证URL地址',
  `user_id` int(11) NOT NULL COMMENT '图片所属用户的ID',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向客户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户食品安全许可证表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_group_imports`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_group_id` int(11) NOT NULL COMMENT '用户分组id',
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '自定义导入的手机号',
  `user_id` int(11) NOT NULL COMMENT '对应users表的id',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户自定义导入数据' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_group_industries`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_group_id` int(11) NOT NULL COMMENT '用户分组ID',
  `industry_id` int(11) NOT NULL COMMENT '行业ID',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `u_idx`(`user_group_id`) USING BTREE,
  INDEX `i_idx`(`industry_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_group_item_options`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_group_item_id` int(11) NOT NULL COMMENT '用户分组子表id，见user_group_items表',
  `option_id` int(11) NOT NULL COMMENT '关联模型id',
  `option_type` varchar(48) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '关联模型类名',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_group_items`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_group_id` int(11) NOT NULL COMMENT '用户分组id，见user_groups',
  `lately_order_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近下单时间类型(1:绝对时间,2:相对时间)',
  `lately_order` mediumint(9) NULL DEFAULT NULL COMMENT '最近下单天数',
  `lately_order_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近下单天数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `lately_order_start` date NULL DEFAULT NULL COMMENT '最近下单开始时间',
  `lately_order_end` date NULL DEFAULT NULL COMMENT '最近下单结束时间',
  `lately_no_order_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近未下单时间类型(1:绝对时间,2:相对时间)',
  `lately_no_order` mediumint(9) NULL DEFAULT NULL COMMENT '最近未下单天数',
  `lately_no_order_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近未下单天数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `lately_no_order_start` date NULL DEFAULT NULL COMMENT '最近未下单开始时间',
  `lately_no_order_end` date NULL DEFAULT NULL COMMENT '最近未下单结束时间',
  `level_type` tinyint(4) NULL DEFAULT NULL COMMENT '会员等级类型(1:等级划分,2:成长值划分)',
  `min_growth_level` int(11) NULL DEFAULT NULL COMMENT '最小成长值',
  `max_growth_level` int(11) NULL DEFAULT NULL COMMENT '最大成长值',
  `is_enterprise` tinyint(4) NULL DEFAULT NULL COMMENT '是否企业认证(0:全部,1:未认证,2:已认证)',
  `lately_login_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近登录时间类型(1:绝对时间,2:相对时间)',
  `lately_login` mediumint(9) NULL DEFAULT NULL COMMENT '最近登录天数',
  `lately_login_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近登录天数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `lately_login_start` date NULL DEFAULT NULL COMMENT '最近登录开始时间',
  `lately_login_end` date NULL DEFAULT NULL COMMENT '最近登录结束时间',
  `lately_no_login_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近未登录时间类型(1:绝对时间,2:相对时间)',
  `lately_no_login` mediumint(9) NULL DEFAULT NULL COMMENT '最近未登录天数',
  `lately_no_login_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近未登录天数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `lately_no_login_start` date NULL DEFAULT NULL COMMENT '最近未登录开始时间',
  `lately_no_login_end` date NULL DEFAULT NULL COMMENT '最近未登录结束时间',
  `lately_sold_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近售出时间类型(1:绝对时间,2:相对时间)',
  `lately_sold` mediumint(9) NULL DEFAULT NULL COMMENT '最近售出天数',
  `lately_sold_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近售出天数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `lately_sold_start` date NULL DEFAULT NULL COMMENT '最近售出开始时间',
  `lately_sold_end` date NULL DEFAULT NULL COMMENT '最近售出结束时间',
  `lately_push_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近发布时间类型(1:绝对时间,2:相对时间)',
  `lately_push` mediumint(9) NULL DEFAULT NULL COMMENT '最近发布天数',
  `lately_push_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '最近发布天数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `lately_push_start` date NULL DEFAULT NULL COMMENT '最近发布开始时间',
  `lately_push_end` date NULL DEFAULT NULL COMMENT '最近发布结束时间',
  `approved_order` mediumint(9) NULL DEFAULT NULL COMMENT '通过订单数',
  `approved_order_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '通过订单数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `rejected_order` mediumint(9) NULL DEFAULT NULL COMMENT '拒绝订单数',
  `rejected_order_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '拒绝订单数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `site` mediumint(9) NULL DEFAULT NULL COMMENT '创建场地数',
  `site_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '创建场地数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `booth` mediumint(9) NULL DEFAULT NULL COMMENT '创建展位数',
  `booth_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '创建展位数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `supply` mediumint(9) NULL DEFAULT NULL COMMENT '创建供给数',
  `supply_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '创建供给数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `active` mediumint(9) NULL DEFAULT NULL COMMENT '活跃天数',
  `active_comparison_type` tinyint(4) NULL DEFAULT NULL COMMENT '活跃天数比较类型(1: <,2: <=,3: =,4: >, 5: >=)',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `type` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '该条件分组选中条件类型',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户分组子表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_group_levels`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_group_id` int(11) NOT NULL COMMENT '用户分组ID',
  `membership_level` int(11) NOT NULL COMMENT '等级id,关联m_membership_levels表id字段',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `u_idx`(`user_group_id`) USING BTREE,
  INDEX `m_idx`(`membership_level`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_groups`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `title` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '分组名称',
  `target` tinyint(4) NULL DEFAULT NULL COMMENT '分组对象(1:买家,2:卖家,3:全部)',
  `is_enterprise` tinyint(4) NULL DEFAULT NULL COMMENT '是否企业认证(0:全部,1:未认证,2:已认证)',
  `lately_order` tinyint(4) NULL DEFAULT NULL COMMENT '最近下单(0:全部,1:一个月内,2:三个月,3:半年内,4:一年内,5:自定义)',
  `order_day` int(11) NULL DEFAULT NULL COMMENT '自定义最近下单时间',
  `lately_no_order` tinyint(4) NULL DEFAULT NULL COMMENT '最近未下单(0:全部,1:一个月内,2:三个月,3:半年内,4:一年内,5:自定义)',
  `no_order_day` int(11) NULL DEFAULT NULL COMMENT '自定义最近未下单时间',
  `lately_login` tinyint(4) NULL DEFAULT NULL COMMENT '最近登录(0:全部,1:一个月内,2:三个月,3:半年内,4:一年内,5:自定义)',
  `login_day` int(11) NULL DEFAULT NULL COMMENT '自定义最近登录时间',
  `lately_no_login` tinyint(4) NULL DEFAULT NULL COMMENT '最近未登录(0:全部,1:一个月内,2:三个月,3:半年内,4:一年内,5:自定义)',
  `no_login_day` int(11) NULL DEFAULT NULL COMMENT '自定义最近未登录时间',
  `lately_sold` tinyint(4) NULL DEFAULT NULL COMMENT '最近售出(1:一个月内,2:三个月,3:半年内,4:一年内,5:自定义)',
  `sold_day` int(11) NULL DEFAULT NULL COMMENT '自定义最近售出时间',
  `lately_push` tinyint(4) NULL DEFAULT NULL COMMENT '最近发布(1:一个月内,2:三个月,3:半年内,4:一年内,5:自定义)',
  `push_day` int(11) NULL DEFAULT NULL COMMENT '自定义最近发布时间',
  `membership_level_type` tinyint(4) NOT NULL DEFAULT 0 COMMENT '会员划分类型(1:按等级划分,2:按成长值划分,0:没选)',
  `min_growth_level` int(11) NULL DEFAULT NULL COMMENT '成长值区间最小值',
  `max_growth_level` int(11) NULL DEFAULT NULL COMMENT '成长值区间最大值',
  `user_id` int(11) NOT NULL COMMENT '最后提交人',
  `is_system` tinyint(4) NOT NULL COMMENT '是否为系统创建分组(0:不是,1:是)',
  `user_ids` varchar(1000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户id串',
  `all_available` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否所有用户(0:不是,1:是)',
  `created_at` timestamp(0) NULL DEFAULT NULL,
  `updated_at` timestamp(0) NULL DEFAULT NULL,
  `relation` tinyint(4) NULL DEFAULT NULL COMMENT '分组之间的关系(1:且,2:或)',
  `file_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '文件链接',
  `file_name` varchar(125) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '文件名称',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_labels`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `label_id` int(11) NOT NULL,
  `business_id` int(11) NOT NULL COMMENT '大宽表:businesses表id',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_business_id`(`business_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户标签关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_login_logs`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `login_time` datetime(0) NOT NULL COMMENT '登录时间',
  `login_source` tinyint(3) UNSIGNED NOT NULL COMMENT '登录来源:1:android、2:ios、3:pc、4:wap、5:wxApplet',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_messages`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID',
  `title` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '标题',
  `content` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '内容',
  `url` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '相关URL',
  `is_read` int(11) NOT NULL DEFAULT 0 COMMENT '是否已读',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `type` tinyint(1) NULL DEFAULT NULL COMMENT '消息类型（1:系统消息,2:邻汇精选,3:买家活跃提醒,4:客户变动提醒,5:订单提醒,6:工单提醒,7:场地推荐提醒,8:发票提醒）',
  `bc_params` varchar(5000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '对应管理后台显示页面参数',
  `is_bc` tinyint(4) NULL DEFAULT NULL COMMENT '移动端是否发送指令',
  `jump_page` tinyint(4) NULL DEFAULT NULL COMMENT '跳转页面(1:客户信息页,2:“即将被释放客户”页,3:“订单列表”页)',
  `page_params` varchar(5000) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '跳转页面参数',
  `bc_at` datetime(0) NULL DEFAULT NULL COMMENT '发送指令时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_user`(`user_id`) USING BTREE,
  INDEX `idx_type_read`(`type`, `is_read`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户消息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_outsourcing_projects`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `outsourcing_projects_id` int(11) NOT NULL COMMENT '外包项目id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向用户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其场地意向外包项目关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_receivables_informations`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `account_owner` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款人',
  `account` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '收款账号',
  `pay_type` int(11) NULL DEFAULT NULL COMMENT '付款方式（见m_payment_methods表）',
  `opening_bank` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '开户行',
  `user_id` int(11) NOT NULL COMMENT '用户id（见users表）',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `flag` int(11) NOT NULL DEFAULT 0 COMMENT '默认设置  0/正常  1/设为默认',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户收款信息表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_release_rules`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `release_time` int(11) NOT NULL DEFAULT 0 COMMENT '用户释放规则 / 天',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `type` tinyint(1) NOT NULL DEFAULT 1 COMMENT '1代表买家自动释放天数2代表KP自动释放',
  `is_execute` tinyint(1) NOT NULL DEFAULT 0 COMMENT '1代表10点需要发送kp钉钉消息,0不需要',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户释放规则表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_shifts`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '关联的用户ID(见users表)',
  `from` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,
  `to` text CHARACTER SET utf8 COLLATE utf8_general_ci NULL,
  `remark` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT '' COMMENT '备注/变动原因',
  `column_name` varchar(32) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '被修改的字段名称',
  `created_by` int(11) NOT NULL COMMENT '创建者',
  `relation_type` varchar(256) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '关系类型，保存创建收支记录的表的Model路径，如 App\\User，App\\Models\\FieldOrderItem',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户信息变更记录管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_spread_ways`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户id',
  `spread_way_id` int(11) NOT NULL COMMENT '推广方式id',
  `business_id` int(11) NOT NULL DEFAULT 0 COMMENT '意向用户ID',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户与其场地意向推广方式关联表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_task_types`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NULL DEFAULT NULL COMMENT '用户id',
  `task_type_id` int(11) NOT NULL COMMENT '任务类型',
  `city_id` varchar(64) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '城市',
  `district_id` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '区域',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`user_white_lists`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NOT NULL COMMENT '用户ID，见users表',
  `has_property_publish` int(11) NULL DEFAULT NULL COMMENT '是否有物业发布权限：0 无，1 有',
  `created_by` int(11) NULL DEFAULT NULL COMMENT '创建人',
  `updated_by` int(11) NOT NULL COMMENT '修改人',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `idx_user_id`(`user_id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`users`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `role_id` int(11) NOT NULL,
  `is_linhui` int(11) NULL DEFAULT 0,
  `tag` varchar(32) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `name` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `username` varchar(40) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `company` varchar(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `product` varchar(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `wechat_openid` varchar(32) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `email` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `password` varchar(60) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  `remember_token` varchar(100) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `comfirmed` int(11) NULL DEFAULT NULL,
  `created_at` datetime(0) NOT NULL DEFAULT '0000-00-00 00:00:00',
  `updated_at` datetime(0) NOT NULL DEFAULT '0000-00-00 00:00:00',
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `province_id` int(32) NULL DEFAULT NULL,
  `city_id` int(32) NULL DEFAULT NULL,
  `district_id` int(32) NULL DEFAULT NULL,
  `address` varchar(256) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `community_id` int(32) NULL DEFAULT NULL,
  `api_updated_at` datetime(0) NULL DEFAULT NULL,
  `apikey` varchar(60) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL,
  `location` int(32) NULL DEFAULT NULL,
  `relation_id` int(2) NOT NULL DEFAULT 4 COMMENT 'm_relation中的id,默认合作方式为:4合作',
  `invite_code` varchar(6) CHARACTER SET utf8 COLLATE utf8_bin NULL DEFAULT NULL COMMENT '自己邀请码',
  `default_consignee_addresses_id` int(11) NULL DEFAULT NULL COMMENT '默认收货地址ID',
  `inviter_code` varchar(6) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT '' COMMENT '邀请者的邀请码',
  `industry_id` int(11) NULL DEFAULT NULL COMMENT '行业ID',
  `source_id` int(11) NULL DEFAULT NULL COMMENT '来源ID',
  `comment` varchar(2000) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '用户测评',
  `followed_by` int(11) NULL DEFAULT NULL COMMENT '跟进人',
  `consumption_point` int(11) NOT NULL DEFAULT 0 COMMENT '消费积分数',
  `channel` varchar(16) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '未知' COMMENT '注册方式',
  `income` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '总收入',
  `count_of_order` int(11) NOT NULL DEFAULT 0 COMMENT '单量',
  `ding_user_id` varchar(32) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '钉钉用户id',
  `avatar` varchar(256) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '用户头像',
  `spread_way_id` smallint(6) NULL DEFAULT NULL COMMENT '公司推广方式ID',
  `wechat_unionid` varchar(32) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '微信用户企业唯一标识',
  `wechat_ticket` varchar(256) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '微信生成带参数的二维码时产生的ticket(https://mp.weixin.qq.com/wiki?t=resource/res_main&id=mp1443433542&token=&lang=zh_CN)',
  `appointment_sign_status` tinyint(4) NOT NULL DEFAULT 0 COMMENT '预约签约状态',
  `url_from` varchar(256) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '用户来源的URL',
  `pushing_frequency_level_id` int(11) NULL DEFAULT NULL COMMENT '地推频率,见m_pushing_frequency_levels表',
  `appointment_sign_at` datetime(0) NULL DEFAULT NULL COMMENT '申请签约时间',
  `demand_area` decimal(16, 2) NULL DEFAULT NULL COMMENT '需求面积',
  `acceptable_minimum_price` decimal(16, 2) NULL DEFAULT NULL COMMENT '公司能接受的最低价格（单位：元）',
  `acceptable_maximum_price` decimal(16, 2) NULL DEFAULT NULL COMMENT '公司能接受的最高价格（单位：元）',
  `feature_description` varchar(2000) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '特征描述',
  `growth_value` int(11) NOT NULL DEFAULT 0 COMMENT '成长值',
  `membership_level_id` tinyint(4) NOT NULL DEFAULT 1 COMMENT '会员等级ID',
  `grading_at` datetime(0) NULL DEFAULT NULL COMMENT '用户会员等级更新时间',
  `cert_url` varchar(256) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL DEFAULT '' COMMENT '营业执照的URL',
  `other_requirement` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NULL DEFAULT NULL COMMENT '场地意向其他需求',
  `gender_tendency` int(11) NULL DEFAULT NULL COMMENT '场地意目标人群性别倾向(0:不限，1:男性，2:女性)',
  `demand_max_area` decimal(16, 2) NULL DEFAULT NULL COMMENT '场地意向需求最大面积（单位：米，精确到小数点后两位）',
  `last_online` datetime(0) NULL DEFAULT NULL COMMENT '用户最后一次上线时间',
  `qq_login_id` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT 'QQ互联返回的id',
  `ordering_noticed` tinyint(4) NOT NULL DEFAULT 0 COMMENT '下单须知 ：0/未标记  1/已标记',
  `accept_wechat_notice` tinyint(4) NOT NULL DEFAULT 1 COMMENT '是否接受公众号消息提醒:1接受 0不接受',
  `last_order` datetime(0) NULL DEFAULT NULL COMMENT '用户最近下单时间',
  `last_login_time` datetime(0) NULL DEFAULT NULL COMMENT '最后登录时间(与最后一条登录记录时间一致)',
  `last_sold` datetime(0) NULL DEFAULT NULL COMMENT '用户最近售出时间',
  `last_push` datetime(0) NULL DEFAULT NULL COMMENT '用户最近发布资源时间',
  `order_count` int(11) NOT NULL COMMENT '用户成交的单量',
  `sale_amount` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '用户成交的交易额',
  `verified` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否邮箱验证(0:否,1:是)',
  `email_at` timestamp(0) NULL DEFAULT NULL COMMENT '邮件发送时间',
  `is_coupon` tinyint(4) NOT NULL DEFAULT 0 COMMENT '邮箱注册后，是否发放优惠券',
  `approved_order` int(11) NULL DEFAULT 0 COMMENT '通过订单数',
  `rejected_order` int(11) NULL DEFAULT 0 COMMENT '拒绝订单数',
  `site` mediumint(9) NULL DEFAULT NULL COMMENT '创建场地数',
  `booth` mediumint(9) NULL DEFAULT NULL COMMENT '创建展位数',
  `supply` mediumint(9) NULL DEFAULT NULL COMMENT '创建供给数',
  `active` mediumint(9) NULL DEFAULT NULL COMMENT '活跃天数',
  `excellent` tinyint(1) NULL DEFAULT NULL COMMENT '优质供应商 1：月结  2：非月结',
  `approved_order_count` int(11) NOT NULL DEFAULT 0 COMMENT '供应商自主审核的订单数',
  `is_subscribe` tinyint(4) NOT NULL DEFAULT 0 COMMENT '是否订阅邮箱推送 0：否  1：是',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `invite_code`(`invite_code`) USING BTREE,
  UNIQUE INDEX `invite_code_2`(`invite_code`) USING BTREE,
  INDEX `idx_deletedat_roleid_islinhui`(`deleted_at`, `role_id`, `is_linhui`) USING BTREE,
  INDEX `idx_followedby`(`followed_by`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`version_info`  (
  `id` int(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `num` varchar(45) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `url` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `platformname` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `newfeature` varchar(2000) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `vid` int(11) NOT NULL,
  `force_update` int(11) NULL DEFAULT 0 COMMENT '是否需要强制更新',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`virtual_number`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `virtual_number` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '虚拟中间号码',
  `called_number` varchar(16) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '被叫号码',
  `time` int(11) NOT NULL DEFAULT 0 COMMENT '使用次数',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '虚拟号码管理表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`wallets`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `user_id` int(11) NULL DEFAULT NULL COMMENT '用户ID',
  `password` varchar(60) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL COMMENT '支付密码',
  `balance` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '余额',
  `unconfirmed` decimal(16, 2) NOT NULL DEFAULT 0.00 COMMENT '待确认金额',
  `frozen` tinyint(4) NOT NULL DEFAULT 0 COMMENT '钱包账户是否被冻结',
  `created_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `updated_at` datetime(0) NOT NULL DEFAULT CURRENT_TIMESTAMP(0),
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  `times_of_wrong_password` int(11) NOT NULL DEFAULT 0 COMMENT '验证密码连续出错的次数',
  `locked_at` datetime(0) NULL DEFAULT NULL COMMENT '锁定钱包的时间',
  `last_wrong_at` datetime(0) NULL DEFAULT NULL COMMENT '上次密码错误的时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '用户钱包表' ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`workers`  (
  `id` int(20) NOT NULL AUTO_INCREMENT,
  `community_id` int(20) NOT NULL,
  `name` varchar(40) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `wechat_open_id` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `mobile` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `status` varchar(10) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
  `task_count` int(11) NOT NULL,
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = Compact;

CREATE TABLE `linhui_test`.`yunpian_templates`  (
  `id` int(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `created_by` int(11) NULL DEFAULT NULL COMMENT '创建者',
  `tpl_id` int(11) NOT NULL DEFAULT 0 COMMENT '云片模板id',
  `tpl_content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '云片模板内容',
  `check_status` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL DEFAULT 'CHECKING' COMMENT '审核状态:云片返回的值',
  `reason` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT NULL COMMENT '审核未通过的原因',
  `created_at` datetime(0) NOT NULL,
  `updated_at` datetime(0) NOT NULL,
  `deleted_at` datetime(0) NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci COMMENT = '云片模板保存表' ROW_FORMAT = Compact;

SET FOREIGN_KEY_CHECKS=1;
```




# 待办

- [ ] PHP错误与异常 https://segmentfault.com/a/1190000009504337  
- [ ] Laravel消息队列 https://learnku.com/articles/4169/analysis-of-laravel-message-queue
- [ ] Trait https://www.php.net/manual/zh/language.oop5.traits.php
